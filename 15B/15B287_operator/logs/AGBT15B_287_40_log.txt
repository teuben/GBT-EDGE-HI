 
 
#######################################################
 SCRIPT NUMBER 1, project:AGBT15B_287_40 
 179187 128 OPERATOR 10 Amber Bonsall 2016-01-10 08:16:25 obs_completed 
#######################################################
# test script to update catalog as you go...

########## CHANGE THESE ONLY #############
OnOffOnTime = 10 #minutes (change this to 12 to be in line with DSS scheduling)
obs_per_source = 3 #total observing time per source = OnOffOnTime * obs_per_source
h = Horizon(10.0) #minimum of 10 degrees elevation
h_up = Horizon(85.0) #maximum of 85 degrees due to keyhole
myOff = Offset("J2000",1.0,0.0,cosv=True)  # Off position relative to source
doFirstPointing = True #Setting to False will skip the first pointing
doFirstCal = True  #Setting to False will skip the first 3C calibrator OnOff scan
peak_every = 12 #peak/cal every 12 OnOffOn (every 2.5 hours)
peak_near_source = False #Do another peak when changing to new source
#####################################

######### NOTES ###############
# This script runs in blocks of On-Off-On position switching with
# the two outer 'on' scans sharing one 'off'
# Total on-source time = 20 minutes
# Length of one 'On' or 'Off' = 3 minutes 20 seconds
# Length of one On-Off-On = 10 minutes
# 3 On-Off-On blocks are needed per source (30 minutes total per source)

###### Timing
# It takes 34m to completely observe 1 source+overhead (9 track scans)

execfile("/home/astro-util/projects/15B287_operator/15B287_config.py")
execfile("/home/astro-util/projects/15B287_operator/15B287_utils.py")
Catalog(fluxcal)
Catalog(lband_pointing)

scanTime = OnOffOnTime * 20.0 #seconds
tdelta = DateTime.TimeDelta(minutes=OnOffOnTime)
obs_count = 0
doCal = doFirstCal
doPointing = doFirstPointing
project_obs = 0
old_catalog_name = 'dummy'
fullcat = '/home/astro-util/projects/15B287_operator/15B287_operator.cat'

Configure(config_1)

while project_obs < 100:
    mycat,altcal = select_my_catalog()
    if mycat == old_catalog_name:
        print 'SAME CATALOG HAS BEEN SELECTED: Using FULL catalog'
        mycat = fullcat
        altcal = '3C309_1'
    old_catalog_name = mycat
    c = Catalog(mycat)
    sources = c.keys()
    for source in sources:
        doBalance = True
        newPeak = True
        calibrator = c[source]["calibrator"]
        n_obs = int(float(c[source]["n_obs"]))
        obs_left = obs_per_source-n_obs
        obs_ok = obs_left > 0
        t_now = Now()
        if t_now != None and obs_ok:
            source_rise = h.GetRise(source)
            source_set  = h.GetSet(source)
            keyhole_rise = h_up.GetRise(source)
            keyhole_set = h_up.GetSet(source)
            if source_rise != None or keyhole_set != None:
                if source_set != None and keyhole_rise != None:
                    t_ok = ((t_now + tdelta) < source_set)
                    t_ok = t_ok and (t_now >= source_rise)
                    t_ok = t_ok and ((t_now + tdelta) < keyhole_rise)
                else:
                    t_ok = True
            else:
                t_ok = False
        else:
            t_ok = False

        source_ok = t_ok and obs_ok

        if source_ok:
            if doPointing == True:
                #check the calibrator is above the horizon
                keyhole_cal_rise = h_up.GetRise(calibrator)
                keyhole_cal_set = h_up.GetSet(calibrator)
                cal_rise = h.GetRise(calibrator)
                if cal_rise>t_now or keyhole_cal_set == None:
                    myCal = altcal #low circumpolar alternative
                    print 'Calibrator %s is too low: Using %s' %(calibrator,altcal)
                else:
                    if keyhole_cal_rise != None:
                        if (t_now+tdelta) >= keyhole_cal_rise:
                            print 'Calibrator %s is in keyhole: Using %s' %(calibrator,altcal)
                            myCal = altcal
                        else:
                            myCal = calibrator
                    else:
                        myCal = calibrator

                if obs_count == 0:
                    AutoPeakFocus(myCal)
                    #Break("Check Peak and Focus")
                else:
                    AutoPeak(myCal)
                Configure(config_1)
                doBalance = True
                doPointing = False

            if doCal:
                Slew(myCal)
                Balance()
                print 'Calibration scans (OnOff) :%s ' %(myCal)
                OnOff(myCal,myOff,120.0)
                doCal = False
                doBalance = True

            for i in range(obs_left):
                t_now = Now()   #check time ok again
                t_ok = False
                if t_now != None and keyhole_set != None:
                    if source_rise != None:
                        if source_set != None:
                            t_ok = ((t_now + tdelta) < source_set)
                            t_ok = t_ok and (t_now >= source_rise)
                            if keyhole_rise != None:
                                t_ok = t_ok and ((t_now+tdelta) < keyhole_rise)
                        else:
                            t_ok = True
                    else:
                        t_ok = False
                else:
                    t_ok = False

                if t_ok:
                    if peak_near_source and newPeak:
                        Slew(source)
                        AutoPeak()
                        Configure(config_1)
                        newPeak = False
                        doBalance = True
                    if doBalance:
                        Slew(source)
                        Balance()
                        doBalance = False

                    Comment("Starting on-source scan")
                    Track(source,None,scanTime)
                    Comment("Starting off-source scan")
                    Track(source,None,scanTime,fixedOffset=myOff)
                    Comment("Starting on-source scan")
                    Track(source,None,scanTime)
                    obs_count = obs_count + 1
                    obs_tot = obs_per_source+1-obs_left+i
                    print '%s: OBS COMPLETE = %s/%s' %(source,obs_tot,obs_per_source)
                    update_my_catalogs(source,obs_tot)

                    if obs_count % peak_every == 0:  #Cal/pointing interval
                        doCal = True
                        doPointing = True
        if source_ok and mycat == fullcat:
            break
    project_obs = project_obs+1

#######################################################
 LOG SESSION NUMBER 1 
[08:16:25] ******** Begin Scheduling Block
[08:16:25] ******** observer = OPERATOR, SB name = 15B287_operator, project ID = AGBT15B_287, date = 10 Jan 2016

[08:16:25] Configuring telescope.
[08:16:26]     Setting State: Activating
[08:16:42]     Setting State: Ready
[08:16:44]     Setting State: Activating
[08:16:45]     Setting State: Ready
[08:16:45] Default values are
[08:16:45] if3freq  =  [0, 0, 0]
[08:16:45] notchfilter  =  In
[08:16:45] polswitch  =  thru
[08:16:45] The bad devices are: 
[08:16:45] OpticalDriver5
[08:16:45] The bad devices are: 
[08:16:45] OpticalDriver5
[08:16:45] Waiting for the ScanCoordinator to finish activating
[08:16:45] . . . . . . . . . . . . . . . . .
[08:16:45] Checking telescope
[08:16:45] Configuration Complete
[08:16:45] INFO: Selecting Catalog
[08:16:45] INFO: Using Catalog for LST 9-13
[08:16:45] INFO: Selecting Catalog
[08:16:45] INFO: Using Catalog for LST 9-13
[08:16:45] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:16:45] Calibrator 3C48 is too low: Using 3C309_1
[08:16:46] Configuring telescope.
[08:16:46]     Setting State: Activating
[08:16:48]     Setting State: Ready
[08:16:50]     Setting State: Activating
[08:16:51]     Setting State: Ready
[08:16:51] Default values are
[08:16:51] if3freq  =  [0]
[08:16:51] notchfilter  =  In
[08:16:51] polswitch  =  thru
[08:16:51] The bad devices are: 
[08:16:51] OpticalDriver5
[08:16:51] Waiting for the LO1 to finish activating
[08:16:51] . .
[08:16:51] Checking telescope
[08:16:51] Configuration Complete
[08:16:51] source : 3C309_1
               F1 : 1.4
               F2 : 32.0
               S22235 : 1.0
               S1400 : 7.5
               angsize : 1.5
               location : J2000 @ (14:59:07.58, 71:40:19.87)
[08:16:51] Slewing to source.
[08:16:51] In state Ready, waiting for state Activating
[08:16:51]     Setting State: Activating
[08:16:51] Detected state Activating
[08:16:51] In state Activating, waiting for state Ready
[08:19:19]     Setting State: Ready
[08:19:19] Detected state Ready
[08:19:19] Balancing IF system.
[08:19:19] Balancing IFRack
[08:19:20]     Setting State: Activating
[08:19:20]     Setting State: Ready
[08:19:21] the sampler values are:
[08:19:21] RF_power 1 : 0.9814453
[08:19:21] RF_power 2 : 0.004882812
[08:19:21] RF_power 3 : 1.030273
[08:19:21] RF_power 4 : 0.01464844
[08:19:21] RF_power 5 : 0.03417969
[08:19:21] RF_power 6 : 4.365234
[08:19:21] RF_power 7 : 0.703125
[08:19:21] RF_power 8 : 0.02441406
[08:19:21] source : 3C309_1
               F1 : 1.4
               F2 : 32.0
               S22235 : 1.0
               S1400 : 7.5
               angsize : 1.5
               location : J2000 @ (14:59:07.58, 71:40:19.87)
[08:19:21] Peak: Subscan 1 of 4
[08:19:22] In state Ready, waiting for state Running
[08:19:22]     Setting State: Activating
[08:19:43]     Setting State: Committed
[08:19:46]     Setting State: Running
[08:19:46] Detected state Running
[08:19:46] *** Notice: This subscan will be numbered as scan #1 in your data reduction package.
[08:19:46] In state Running, waiting for state Ready
[08:20:15]     Setting State: Stopping
[08:20:21]     Setting State: Ready
[08:20:21] Detected state Ready
[08:20:21] Ygor Telescope: WaitForStopping
[08:20:21] Peak: Subscan 2 of 4
[08:20:21] In state Ready, waiting for state Running
[08:20:21]     Setting State: Activating
[08:20:29]     Setting State: Committed
[08:20:31]     Setting State: Running
[08:20:31] Detected state Running
[08:20:31] *** Notice: This subscan will be numbered as scan #2 in your data reduction package.
[08:20:31] In state Running, waiting for state Ready
[08:21:01]     Setting State: Stopping
[08:21:07]     Setting State: Ready
[08:21:07] Detected state Ready
[08:21:07] Ygor Telescope: WaitForStopping
[08:21:08] . *** Updating antenna's pointing to az2=0.0055 and el=0.0000 arcmins

[08:21:08] Peak: Subscan 3 of 4
[08:21:08] In state Ready, waiting for state Running
[08:21:08]     Setting State: Activating
[08:21:27]     Setting State: Committed
[08:21:29]     Setting State: Running
[08:21:29] Detected state Running
[08:21:29] *** Notice: This subscan will be numbered as scan #3 in your data reduction package.
[08:21:29] In state Running, waiting for state Ready
[08:21:59]     Setting State: Stopping
[08:22:04]     Setting State: Ready
[08:22:04] Detected state Ready
[08:22:04] Ygor Telescope: WaitForStopping
[08:22:04] Peak: Subscan 4 of 4
[08:22:04] In state Ready, waiting for state Running
[08:22:04]     Setting State: Activating
[08:22:12]     Setting State: Committed
[08:22:14]     Setting State: Running
[08:22:14] Detected state Running
[08:22:14] *** Notice: This subscan will be numbered as scan #4 in your data reduction package.
[08:22:14] In state Running, waiting for state Ready
[08:22:44]     Setting State: Stopping
[08:22:48]     Setting State: Ready
[08:22:48] Detected state Ready
[08:22:48] Ygor Telescope: WaitForStopping
[08:22:49] *** Updating antenna's pointing to az2=0.0055 and el=0.2981 arcmins

[08:22:49] source : 3C309_1
               F1 : 1.4
               F2 : 32.0
               S22235 : 1.0
               S1400 : 7.5
               angsize : 1.5
               location : J2000 @ (14:59:07.58, 71:40:19.87)
[08:22:49] Focus: Subscan 1 of 1
[08:22:50] In state Ready, waiting for state Running
[08:22:50]     Setting State: Activating
[08:23:15]     Setting State: Committed
[08:23:17]     Setting State: Running
[08:23:17] Detected state Running
[08:23:17] *** Notice: This subscan will be numbered as scan #5 in your data reduction package.
[08:23:17] In state Running, waiting for state Ready
[08:24:17]     Setting State: Stopping
[08:24:19]     Setting State: Ready
[08:24:19] Detected state Ready
[08:24:19] Ygor Telescope: WaitForStopping
[08:24:19] *** Updating antenna's focus to -26.82 mm

[08:24:20] Configuring telescope.
[08:24:20]     Setting State: Activating
[08:24:21]     Setting State: Ready
[08:24:21]     Setting State: Activating
[08:24:22]     Setting State: Ready
[08:24:22] Default values are
[08:24:22] if3freq  =  [0, 0, 0]
[08:24:22] notchfilter  =  In
[08:24:22] polswitch  =  thru
[08:24:22] The bad devices are: 
[08:24:22] OpticalDriver5
[08:24:22] The bad devices are: 
[08:24:22] OpticalDriver5

[08:24:22] Checking telescope
[08:24:22] Configuration Complete
[08:24:22] source : 3C309_1
               F1 : 1.4
               F2 : 32.0
               S22235 : 1.0
               S1400 : 7.5
               angsize : 1.5
               location : J2000 @ (14:59:07.58, 71:40:19.87)
[08:24:22] Slewing to source.
[08:24:23] In state Ready, waiting for state Activating
[08:24:23]     Setting State: Activating
[08:24:23] Detected state Activating
[08:24:23] In state Activating, waiting for state Ready
[08:24:53]     Setting State: Ready
[08:24:53] Detected state Ready
[08:24:53] Balancing IF system.
[08:24:53] Balancing IFRack
[08:24:53]     Setting State: Activating
[08:24:53]     Setting State: Ready
[08:24:55] the sampler values are:
[08:24:55] RF_power 1 : 2.885742
[08:24:55] RF_power 2 : 0.004882812
[08:24:55] RF_power 3 : 2.827148
[08:24:55] RF_power 4 : 0.01464844
[08:24:55] RF_power 5 : 0.03417969
[08:24:55] RF_power 6 : 2.77832
[08:24:55] RF_power 7 : 2.954102
[08:24:55] RF_power 8 : 0.02441406
[08:24:55] Balancing VEGAS
[08:24:55]     Setting State: Activating
[08:24:55]     Setting State: Ready
[08:24:55]     Setting State: Activating
[08:24:55]     Setting State: Ready
[08:24:57]     Setting State: Activating
[08:24:57]     Setting State: Ready
[08:24:58] Calibration scans (OnOff) :3C309_1 
[08:24:58] source : 3C309_1
               F1 : 1.4
               F2 : 32.0
               S22235 : 1.0
               S1400 : 7.5
               angsize : 1.5
               location : J2000 @ (14:59:07.58, 71:40:19.87)
[08:24:58] OnOff: Subscan 1 of 2
[08:24:58] In state Ready, waiting for state Running
[08:24:58]     Setting State: Activating
[08:25:03]     Setting State: Committed
[08:25:05]     Setting State: Running
[08:25:05] Detected state Running
[08:25:05] *** Notice: This subscan will be numbered as scan #6 in your data reduction package.
[08:25:05] In state Running, waiting for state Ready
[08:27:05]     Setting State: Stopping
[08:27:07]     Setting State: Ready
[08:27:07] Detected state Ready
[08:27:07] Ygor Telescope: WaitForStopping
[08:27:07] OnOff: Subscan 2 of 2
[08:27:07] In state Ready, waiting for state Running
[08:27:07]     Setting State: Activating
[08:27:21]     Setting State: Committed
[08:27:23]     Setting State: Running
[08:27:23] Detected state Running
[08:27:23] *** Notice: This subscan will be numbered as scan #7 in your data reduction package.
[08:27:23] In state Running, waiting for state Ready
[08:29:23]     Setting State: Stopping
[08:29:25]     Setting State: Ready
[08:29:25] Detected state Ready
[08:29:25] Ygor Telescope: WaitForStopping
[08:29:25] INFO: Selecting Catalog
[08:29:25] INFO: Using Catalog for LST 9-13
[08:29:25] INFO: Selecting Catalog
[08:29:25] INFO: Using Catalog for LST 9-13
[08:29:25] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:29:25] INFO: Selecting Catalog
[08:29:25] INFO: Using Catalog for LST 9-13
[08:29:25] INFO: Selecting Catalog
[08:29:25] INFO: Using Catalog for LST 9-13
[08:29:25] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:29:25] INFO: Selecting Catalog
[08:29:25] INFO: Using Catalog for LST 9-13
[08:29:25] INFO: Selecting Catalog
[08:29:25] INFO: Using Catalog for LST 9-13
[08:29:25] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:29:25] INFO: Selecting Catalog
[08:29:25] INFO: Using Catalog for LST 9-13
[08:29:25] INFO: Selecting Catalog
[08:29:25] INFO: Using Catalog for LST 9-13
[08:29:25] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:29:25] INFO: Selecting Catalog
[08:29:25] INFO: Using Catalog for LST 9-13
[08:29:25] INFO: Selecting Catalog
[08:29:25] INFO: Using Catalog for LST 9-13
[08:29:25] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:29:25] INFO: Selecting Catalog
[08:29:25] INFO: Using Catalog for LST 9-13
[08:29:25] INFO: Selecting Catalog
[08:29:25] INFO: Using Catalog for LST 9-13
[08:29:25] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:29:25] INFO: Selecting Catalog
[08:29:25] INFO: Using Catalog for LST 9-13
[08:29:25] INFO: Selecting Catalog
[08:29:25] INFO: Using Catalog for LST 9-13
[08:29:25] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:29:25] INFO: Selecting Catalog
[08:29:25] INFO: Using Catalog for LST 9-13
[08:29:25] INFO: Selecting Catalog
[08:29:25] INFO: Using Catalog for LST 9-13
[08:29:25] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:29:25] INFO: Selecting Catalog
[08:29:25] INFO: Using Catalog for LST 9-13
[08:29:25] INFO: Selecting Catalog
[08:29:25] INFO: Using Catalog for LST 9-13
[08:29:25] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:29:25] INFO: Selecting Catalog
[08:29:25] INFO: Using Catalog for LST 9-13
[08:29:25] INFO: Selecting Catalog
[08:29:25] INFO: Using Catalog for LST 9-13
[08:29:25] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:29:25] INFO: Selecting Catalog
[08:29:25] INFO: Using Catalog for LST 9-13
[08:29:25] INFO: Selecting Catalog
[08:29:25] INFO: Using Catalog for LST 9-13
[08:29:25] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:29:25] INFO: Selecting Catalog
[08:29:25] INFO: Using Catalog for LST 9-13
[08:29:25] INFO: Selecting Catalog
[08:29:25] INFO: Using Catalog for LST 9-13
[08:29:25] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:29:25] INFO: Selecting Catalog
[08:29:25] INFO: Using Catalog for LST 9-13
[08:29:25] INFO: Selecting Catalog
[08:29:25] INFO: Using Catalog for LST 9-13
[08:29:25] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:29:25] INFO: Selecting Catalog
[08:29:25] INFO: Using Catalog for LST 9-13
[08:29:25] INFO: Selecting Catalog
[08:29:25] INFO: Using Catalog for LST 9-13
[08:29:25] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:29:26] INFO: Selecting Catalog
[08:29:26] INFO: Using Catalog for LST 9-13
[08:29:26] INFO: Selecting Catalog
[08:29:26] INFO: Using Catalog for LST 9-13
[08:29:26] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:29:26] INFO: Selecting Catalog
[08:29:26] INFO: Using Catalog for LST 9-13
[08:29:26] INFO: Selecting Catalog
[08:29:26] INFO: Using Catalog for LST 9-13
[08:29:26] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:29:26] INFO: Selecting Catalog
[08:29:26] INFO: Using Catalog for LST 9-13
[08:29:26] INFO: Selecting Catalog
[08:29:26] INFO: Using Catalog for LST 9-13
[08:29:26] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:29:26] INFO: Selecting Catalog
[08:29:26] INFO: Using Catalog for LST 9-13
[08:29:26] INFO: Selecting Catalog
[08:29:26] INFO: Using Catalog for LST 9-13
[08:29:26] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:29:26] INFO: Selecting Catalog
[08:29:26] INFO: Using Catalog for LST 9-13
[08:29:26] INFO: Selecting Catalog
[08:29:26] INFO: Using Catalog for LST 9-13
[08:29:26] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:29:26] INFO: Selecting Catalog
[08:29:26] INFO: Using Catalog for LST 9-13
[08:29:26] INFO: Selecting Catalog
[08:29:26] INFO: Using Catalog for LST 9-13
[08:29:26] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:29:26] INFO: Selecting Catalog
[08:29:26] INFO: Using Catalog for LST 9-13
[08:29:26] INFO: Selecting Catalog
[08:29:26] INFO: Using Catalog for LST 9-13
[08:29:26] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:29:26] INFO: Selecting Catalog
[08:29:26] INFO: Using Catalog for LST 9-13
[08:29:26] INFO: Selecting Catalog
[08:29:26] INFO: Using Catalog for LST 9-13
[08:29:26] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:29:26] INFO: Selecting Catalog
[08:29:26] INFO: Using Catalog for LST 9-13
[08:29:26] INFO: Selecting Catalog
[08:29:26] INFO: Using Catalog for LST 9-13
[08:29:26] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:29:26] INFO: Selecting Catalog
[08:29:26] INFO: Using Catalog for LST 9-13
[08:29:26] INFO: Selecting Catalog
[08:29:26] INFO: Using Catalog for LST 9-13
[08:29:26] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:29:26] INFO: Selecting Catalog
[08:29:26] INFO: Using Catalog for LST 9-13
[08:29:26] INFO: Selecting Catalog
[08:29:26] INFO: Using Catalog for LST 9-13
[08:29:26] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:29:26] INFO: Selecting Catalog
[08:29:26] INFO: Using Catalog for LST 9-13
[08:29:26] INFO: Selecting Catalog
[08:29:26] INFO: Using Catalog for LST 9-13
[08:29:26] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:29:26] INFO: Selecting Catalog
[08:29:26] INFO: Using Catalog for LST 9-13
[08:29:26] INFO: Selecting Catalog
[08:29:26] INFO: Using Catalog for LST 9-13
[08:29:26] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:29:26] INFO: Selecting Catalog
[08:29:26] INFO: Using Catalog for LST 9-13
[08:29:26] INFO: Selecting Catalog
[08:29:26] INFO: Using Catalog for LST 9-13
[08:29:26] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:29:26] INFO: Selecting Catalog
[08:29:26] INFO: Using Catalog for LST 9-13
[08:29:26] INFO: Selecting Catalog
[08:29:26] INFO: Using Catalog for LST 9-13
[08:29:26] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:29:26] INFO: Selecting Catalog
[08:29:26] INFO: Using Catalog for LST 9-13
[08:29:26] INFO: Selecting Catalog
[08:29:26] INFO: Using Catalog for LST 9-13
[08:29:26] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:29:27] INFO: Selecting Catalog
[08:29:27] INFO: Using Catalog for LST 9-13
[08:29:27] INFO: Selecting Catalog
[08:29:27] INFO: Using Catalog for LST 9-13
[08:29:27] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:29:27] INFO: Selecting Catalog
[08:29:27] INFO: Using Catalog for LST 9-13
[08:29:27] INFO: Selecting Catalog
[08:29:27] INFO: Using Catalog for LST 9-13
[08:29:27] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:29:27] INFO: Selecting Catalog
[08:29:27] INFO: Using Catalog for LST 9-13
[08:29:27] INFO: Selecting Catalog
[08:29:27] INFO: Using Catalog for LST 9-13
[08:29:27] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:29:27] INFO: Selecting Catalog
[08:29:27] INFO: Using Catalog for LST 9-13
[08:29:27] INFO: Selecting Catalog
[08:29:27] INFO: Using Catalog for LST 9-13
[08:29:27] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:29:27] INFO: Selecting Catalog
[08:29:27] INFO: Using Catalog for LST 9-13
[08:29:27] INFO: Selecting Catalog
[08:29:27] INFO: Using Catalog for LST 9-13
[08:29:27] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:29:27] INFO: Selecting Catalog
[08:29:27] INFO: Using Catalog for LST 9-13
[08:29:27] INFO: Selecting Catalog
[08:29:27] INFO: Using Catalog for LST 9-13
[08:29:27] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:29:27] INFO: Selecting Catalog
[08:29:27] INFO: Using Catalog for LST 9-13
[08:29:27] INFO: Selecting Catalog
[08:29:27] INFO: Using Catalog for LST 9-13
[08:29:27] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:29:27] INFO: Selecting Catalog
[08:29:27] INFO: Using Catalog for LST 9-13
[08:29:27] INFO: Selecting Catalog
[08:29:27] INFO: Using Catalog for LST 9-13
[08:29:27] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:29:27] INFO: Selecting Catalog
[08:29:27] INFO: Using Catalog for LST 9-13
[08:29:27] INFO: Selecting Catalog
[08:29:27] INFO: Using Catalog for LST 9-13
[08:29:27] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:29:27] INFO: Selecting Catalog
[08:29:27] INFO: Using Catalog for LST 9-13
[08:29:27] INFO: Selecting Catalog
[08:29:27] INFO: Using Catalog for LST 9-13
[08:29:27] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:29:27] INFO: Selecting Catalog
[08:29:27] INFO: Using Catalog for LST 9-13
[08:29:27] INFO: Selecting Catalog
[08:29:27] INFO: Using Catalog for LST 9-13
[08:29:27] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:29:27] INFO: Selecting Catalog
[08:29:27] INFO: Using Catalog for LST 9-13
[08:29:27] INFO: Selecting Catalog
[08:29:27] INFO: Using Catalog for LST 9-13
[08:29:27] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:29:27] INFO: Selecting Catalog
[08:29:27] INFO: Using Catalog for LST 9-13
[08:29:27] INFO: Selecting Catalog
[08:29:27] INFO: Using Catalog for LST 9-13
[08:29:27] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:29:27] INFO: Selecting Catalog
[08:29:27] INFO: Using Catalog for LST 9-13
[08:29:27] INFO: Selecting Catalog
[08:29:27] INFO: Using Catalog for LST 9-13
[08:29:27] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:29:27] INFO: Selecting Catalog
[08:29:27] INFO: Using Catalog for LST 9-13
[08:29:27] INFO: Selecting Catalog
[08:29:27] INFO: Using Catalog for LST 9-13
[08:29:27] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:29:27] INFO: Selecting Catalog
[08:29:27] INFO: Using Catalog for LST 9-13
[08:29:27] INFO: Selecting Catalog
[08:29:27] INFO: Using Catalog for LST 9-13
[08:29:27] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:29:27] INFO: Selecting Catalog
[08:29:27] INFO: Using Catalog for LST 9-13
[08:29:27] INFO: Selecting Catalog
[08:29:27] INFO: Using Catalog for LST 9-13
[08:29:27] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:29:28] INFO: Selecting Catalog
[08:29:28] INFO: Using Catalog for LST 9-13
[08:29:28] INFO: Selecting Catalog
[08:29:28] INFO: Using Catalog for LST 9-13
[08:29:28] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:29:28] INFO: Selecting Catalog
[08:29:28] INFO: Using Catalog for LST 9-13
[08:29:28] INFO: Selecting Catalog
[08:29:28] INFO: Using Catalog for LST 9-13
[08:29:28] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
runSuccessful: True
[08:29:28] ******** End Scheduling Block
[08:29:28] ******** observer = OPERATOR, SB name = 15B287_operator, project ID = AGBT15B_287

how much log? 19815 id: 179187self.history: <gbt.turtle.database.History.History instance at 0x4956b00>self.history.connection: <gbt.turtle.database.TurtleConnection.TurtleConnection instance at 0x4956878>how much converted log? 20023 
#######################################################
 
 
#######################################################
 SCRIPT NUMBER 2, project:AGBT15B_287_40 
 179188 128 OPERATOR 10 Amber Bonsall 2016-01-10 08:29:30 obs_completed 
#######################################################
# test script to update catalog as you go...

########## CHANGE THESE ONLY #############
OnOffOnTime = 10 #minutes (change this to 12 to be in line with DSS scheduling)
obs_per_source = 3 #total observing time per source = OnOffOnTime * obs_per_source
h = Horizon(10.0) #minimum of 10 degrees elevation
h_up = Horizon(85.0) #maximum of 85 degrees due to keyhole
myOff = Offset("J2000",1.0,0.0,cosv=True)  # Off position relative to source
doFirstPointing = True #Setting to False will skip the first pointing
doFirstCal = True  #Setting to False will skip the first 3C calibrator OnOff scan
peak_every = 12 #peak/cal every 12 OnOffOn (every 2.5 hours)
peak_near_source = False #Do another peak when changing to new source
#####################################

######### NOTES ###############
# This script runs in blocks of On-Off-On position switching with
# the two outer 'on' scans sharing one 'off'
# Total on-source time = 20 minutes
# Length of one 'On' or 'Off' = 3 minutes 20 seconds
# Length of one On-Off-On = 10 minutes
# 3 On-Off-On blocks are needed per source (30 minutes total per source)

###### Timing
# It takes 34m to completely observe 1 source+overhead (9 track scans)

execfile("/home/astro-util/projects/15B287_operator/15B287_config.py")
execfile("/home/astro-util/projects/15B287_operator/15B287_utils.py")
Catalog(fluxcal)
Catalog(lband_pointing)

scanTime = OnOffOnTime * 20.0 #seconds
tdelta = DateTime.TimeDelta(minutes=OnOffOnTime)
obs_count = 0
doCal = doFirstCal
doPointing = doFirstPointing
project_obs = 0
old_catalog_name = 'dummy'
fullcat = '/home/astro-util/projects/15B287_operator/15B287_operator.cat'

Configure(config_1)

while project_obs < 100:
    mycat,altcal = select_my_catalog()
    if mycat == old_catalog_name:
        print 'SAME CATALOG HAS BEEN SELECTED: Using FULL catalog'
        mycat = fullcat
        altcal = '3C309_1'
    old_catalog_name = mycat
    c = Catalog(mycat)
    sources = c.keys()
    for source in sources:
        doBalance = True
        newPeak = True
        calibrator = c[source]["calibrator"]
        n_obs = int(float(c[source]["n_obs"]))
        obs_left = obs_per_source-n_obs
        obs_ok = obs_left > 0
        t_now = Now()
        if t_now != None and obs_ok:
            source_rise = h.GetRise(source)
            source_set  = h.GetSet(source)
            keyhole_rise = h_up.GetRise(source)
            keyhole_set = h_up.GetSet(source)
            if source_rise != None or keyhole_set != None:
                if source_set != None and keyhole_rise != None:
                    t_ok = ((t_now + tdelta) < source_set)
                    t_ok = t_ok and (t_now >= source_rise)
                    t_ok = t_ok and ((t_now + tdelta) < keyhole_rise)
                else:
                    t_ok = True
            else:
                t_ok = False
        else:
            t_ok = False

        source_ok = t_ok and obs_ok

        if source_ok:
            if doPointing == True:
                #check the calibrator is above the horizon
                keyhole_cal_rise = h_up.GetRise(calibrator)
                keyhole_cal_set = h_up.GetSet(calibrator)
                cal_rise = h.GetRise(calibrator)
                if cal_rise>t_now or keyhole_cal_set == None:
                    myCal = altcal #low circumpolar alternative
                    print 'Calibrator %s is too low: Using %s' %(calibrator,altcal)
                else:
                    if keyhole_cal_rise != None:
                        if (t_now+tdelta) >= keyhole_cal_rise:
                            print 'Calibrator %s is in keyhole: Using %s' %(calibrator,altcal)
                            myCal = altcal
                        else:
                            myCal = calibrator
                    else:
                        myCal = calibrator

                if obs_count == 0:
                    AutoPeakFocus(myCal)
                    #Break("Check Peak and Focus")
                else:
                    AutoPeak(myCal)
                Configure(config_1)
                doBalance = True
                doPointing = False

            if doCal:
                Slew(myCal)
                Balance()
                print 'Calibration scans (OnOff) :%s ' %(myCal)
                OnOff(myCal,myOff,120.0)
                doCal = False
                doBalance = True

            for i in range(obs_left):
                t_now = Now()   #check time ok again
                t_ok = False
                if t_now != None and keyhole_set != None:
                    if source_rise != None:
                        if source_set != None:
                            t_ok = ((t_now + tdelta) < source_set)
                            t_ok = t_ok and (t_now >= source_rise)
                            if keyhole_rise != None:
                                t_ok = t_ok and ((t_now+tdelta) < keyhole_rise)
                        else:
                            t_ok = True
                    else:
                        t_ok = False
                else:
                    t_ok = False

                if t_ok:
                    if peak_near_source and newPeak:
                        Slew(source)
                        AutoPeak()
                        Configure(config_1)
                        newPeak = False
                        doBalance = True
                    if doBalance:
                        Slew(source)
                        Balance()
                        doBalance = False

                    Comment("Starting on-source scan")
                    Track(source,None,scanTime)
                    Comment("Starting off-source scan")
                    Track(source,None,scanTime,fixedOffset=myOff)
                    Comment("Starting on-source scan")
                    Track(source,None,scanTime)
                    obs_count = obs_count + 1
                    obs_tot = obs_per_source+1-obs_left+i
                    print '%s: OBS COMPLETE = %s/%s' %(source,obs_tot,obs_per_source)
                    update_my_catalogs(source,obs_tot)

                    if obs_count % peak_every == 0:  #Cal/pointing interval
                        doCal = True
                        doPointing = True
        if source_ok and mycat == fullcat:
            break
    project_obs = project_obs+1

#######################################################
 LOG SESSION NUMBER 2 
[08:29:30] ******** Begin Scheduling Block
[08:29:30] ******** observer = OPERATOR, SB name = 15B287_operator, project ID = AGBT15B_287, date = 10 Jan 2016

[08:29:30] Configuring telescope.
[08:29:30]     Setting State: Activating
[08:29:33]     Setting State: Ready
[08:29:34]     Setting State: Activating
[08:29:35]     Setting State: Ready
[08:29:35] Default values are
[08:29:35] if3freq  =  [0, 0, 0]
[08:29:35] notchfilter  =  In
[08:29:35] polswitch  =  thru
[08:29:35] The bad devices are: 
[08:29:35] OpticalDriver5
[08:29:35] The bad devices are: 
[08:29:35] OpticalDriver5
[08:29:35] Waiting for the ConverterRack to finish activating
[08:29:35] . . .
[08:29:35] Checking telescope
[08:29:35] Configuration Complete
[08:29:35] INFO: Selecting Catalog
[08:29:35] INFO: Using Catalog for LST 9-13
[08:29:35] INFO: Selecting Catalog
[08:29:35] INFO: Using Catalog for LST 9-13
[08:29:35] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:29:35] Calibrator 3C48 is too low: Using 3C309_1
[08:29:36] Configuring telescope.
[08:29:36]     Setting State: Activating
[08:29:38]     Setting State: Ready
[08:29:39]     Setting State: Activating
[08:29:40]     Setting State: Ready
[08:29:41] Default values are
[08:29:41] if3freq  =  [0]
[08:29:41] notchfilter  =  In
[08:29:41] polswitch  =  thru
[08:29:41] The bad devices are: 
[08:29:41] OpticalDriver5
[08:29:41] Waiting for the LO1 to finish activating
[08:29:41] . .
[08:29:41] Checking telescope
[08:29:41] Configuration Complete
[08:29:41] source : 3C309_1
               F1 : 1.4
               F2 : 32.0
               S22235 : 1.0
               S1400 : 7.5
               angsize : 1.5
               location : J2000 @ (14:59:07.58, 71:40:19.87)
[08:29:41] Slewing to source.
[08:29:41] In state Ready, waiting for state Activating
[08:29:41]     Setting State: Activating
[08:29:41] Detected state Activating
[08:29:41] In state Activating, waiting for state Ready
[08:29:55]     Setting State: Ready
[08:29:55] Detected state Ready
[08:29:55] Balancing IF system.
[08:29:55] Balancing IFRack
[08:29:55]     Setting State: Activating
[08:29:55]     Setting State: Ready
[08:29:57] the sampler values are:
[08:29:57] RF_power 1 : 0.9716797
[08:29:57] RF_power 2 : 0
[08:29:57] RF_power 3 : 1.025391
[08:29:57] RF_power 4 : 0.01464844
[08:29:57] RF_power 5 : 0.03417969
[08:29:57] RF_power 6 : 2.836914
[08:29:57] RF_power 7 : 0.4638672
[08:29:57] RF_power 8 : 0.02441406
[08:29:57] source : 3C309_1
               F1 : 1.4
               F2 : 32.0
               S22235 : 1.0
               S1400 : 7.5
               angsize : 1.5
               location : J2000 @ (14:59:07.58, 71:40:19.87)
[08:29:57] Peak: Subscan 1 of 4
[08:29:57] In state Ready, waiting for state Running
[08:29:58]     Setting State: Activating
[08:30:19]     Setting State: Committed
[08:30:21]     Setting State: Running
[08:30:21] Detected state Running
[08:30:21] *** Notice: This subscan will be numbered as scan #8 in your data reduction package.
[08:30:21] In state Running, waiting for state Ready
[08:30:51]     Setting State: Stopping
[08:30:57]     Setting State: Ready
[08:30:57] Detected state Ready
[08:30:57] Ygor Telescope: WaitForStopping
[08:30:57] Peak: Subscan 2 of 4
[08:30:57] In state Ready, waiting for state Running
[08:30:57]     Setting State: Activating
[08:31:06]     Setting State: Committed
[08:31:08]     Setting State: Running
[08:31:08] Detected state Running
[08:31:08] *** Notice: This subscan will be numbered as scan #9 in your data reduction package.
[08:31:08] In state Running, waiting for state Ready
[08:31:38]     Setting State: Stopping
[08:31:44]     Setting State: Ready
[08:31:44] Detected state Ready
[08:31:44] Ygor Telescope: WaitForStopping
[08:31:44] *** Updating antenna's pointing to az2=0.0144 and el=0.2981 arcmins

[08:31:44] Peak: Subscan 3 of 4
[08:31:45] In state Ready, waiting for state Running
[08:31:45]     Setting State: Activating
[08:32:04]     Setting State: Committed
[08:32:06]     Setting State: Running
[08:32:06] Detected state Running
[08:32:06] *** Notice: This subscan will be numbered as scan #10 in your data reduction package.
[08:32:06] In state Running, waiting for state Ready
[08:32:36]     Setting State: Stopping
[08:32:41]     Setting State: Ready
[08:32:41] Detected state Ready
[08:32:41] Ygor Telescope: WaitForStopping
[08:32:41] Peak: Subscan 4 of 4
[08:32:41] In state Ready, waiting for state Running
[08:32:41]     Setting State: Activating
[08:32:49]     Setting State: Committed
[08:32:51]     Setting State: Running
[08:32:51] Detected state Running
[08:32:51] *** Notice: This subscan will be numbered as scan #11 in your data reduction package.
[08:32:51] In state Running, waiting for state Ready
[08:33:21]     Setting State: Stopping
[08:33:25]     Setting State: Ready
[08:33:25] Detected state Ready
[08:33:25] Ygor Telescope: WaitForStopping
[08:33:26] *** Updating antenna's pointing to az2=0.0144 and el=0.2949 arcmins

[08:33:26] source : 3C309_1
               F1 : 1.4
               F2 : 32.0
               S22235 : 1.0
               S1400 : 7.5
               angsize : 1.5
               location : J2000 @ (14:59:07.58, 71:40:19.87)
[08:33:27] Focus: Subscan 1 of 1
[08:33:27] In state Ready, waiting for state Running
[08:33:27]     Setting State: Activating
[08:33:53]     Setting State: Committed
[08:33:55]     Setting State: Running
[08:33:55] Detected state Running
[08:33:55] *** Notice: This subscan will be numbered as scan #12 in your data reduction package.
[08:33:55] In state Running, waiting for state Ready
[08:34:55]     Setting State: Stopping
[08:34:57]     Setting State: Ready
[08:34:57] Detected state Ready
[08:34:57] Ygor Telescope: WaitForStopping
[08:34:57] *** Updating antenna's focus to -26.81 mm

[08:34:58] Configuring telescope.
[08:34:58]     Setting State: Activating
[08:35:00]     Setting State: Ready
[08:35:02]     Setting State: Activating
[08:35:03]     Setting State: Ready
[08:35:03] Default values are
[08:35:03] if3freq  =  [0, 0, 0]
[08:35:03] notchfilter  =  In
[08:35:03] polswitch  =  thru
[08:35:03] The bad devices are: 
[08:35:03] OpticalDriver5
[08:35:03] The bad devices are: 
[08:35:03] OpticalDriver5
[08:35:03] Waiting for the ConverterRack to finish activating
[08:35:03] . .
[08:35:03] Checking telescope
[08:35:03] Configuration Complete
[08:35:03] source : 3C309_1
               F1 : 1.4
               F2 : 32.0
               S22235 : 1.0
               S1400 : 7.5
               angsize : 1.5
               location : J2000 @ (14:59:07.58, 71:40:19.87)
[08:35:03] Slewing to source.
[08:35:03] In state Ready, waiting for state Activating
[08:35:03]     Setting State: Activating
[08:35:03] Detected state Activating
[08:35:03] In state Activating, waiting for state Ready
[08:35:31]     Setting State: Ready
[08:35:31] Detected state Ready
[08:35:31] Balancing IF system.
[08:35:31] Balancing IFRack
[08:35:31]     Setting State: Activating
[08:35:31]     Setting State: Ready
[08:35:33] the sampler values are:
[08:35:33] RF_power 1 : 2.802734
[08:35:33] RF_power 2 : 0.009765625
[08:35:33] RF_power 3 : 2.797852
[08:35:33] RF_power 4 : 0.01464844
[08:35:33] RF_power 5 : 0.03417969
[08:35:33] RF_power 6 : 2.792969
[08:35:33] RF_power 7 : 2.915039
[08:35:33] RF_power 8 : 0.02441406
[08:35:33] Balancing VEGAS
[08:35:33]     Setting State: Activating
[08:35:33]     Setting State: Ready
[08:35:34]     Setting State: Activating
[08:35:34]     Setting State: Ready
[08:35:35] Calibration scans (OnOff) :3C309_1 
[08:35:35] source : 3C309_1
               F1 : 1.4
               F2 : 32.0
               S22235 : 1.0
               S1400 : 7.5
               angsize : 1.5
               location : J2000 @ (14:59:07.58, 71:40:19.87)
[08:35:35] OnOff: Subscan 1 of 2
[08:35:35] In state Ready, waiting for state Running
[08:35:35]     Setting State: Activating
[08:35:40]     Setting State: Committed
[08:35:42]     Setting State: Running
[08:35:42] Detected state Running
[08:35:42] *** Notice: This subscan will be numbered as scan #13 in your data reduction package.
[08:35:42] In state Running, waiting for state Ready
[08:37:42]     Setting State: Stopping
[08:37:44]     Setting State: Ready
[08:37:44] Detected state Ready
[08:37:44] Ygor Telescope: WaitForStopping
[08:37:44] OnOff: Subscan 2 of 2
[08:37:44] In state Ready, waiting for state Running
[08:37:44]     Setting State: Activating
[08:37:58]     Setting State: Committed
[08:38:00]     Setting State: Running
[08:38:00] Detected state Running
[08:38:00] *** Notice: This subscan will be numbered as scan #14 in your data reduction package.
[08:38:00] In state Running, waiting for state Ready
[08:40:00]     Setting State: Stopping
[08:40:02]     Setting State: Ready
[08:40:02] Detected state Ready
[08:40:02] Ygor Telescope: WaitForStopping
[08:40:02] INFO: Selecting Catalog
[08:40:02] INFO: Using Catalog for LST 9-13
[08:40:02] INFO: Selecting Catalog
[08:40:02] INFO: Using Catalog for LST 9-13
[08:40:02] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:40:02] INFO: Selecting Catalog
[08:40:02] INFO: Using Catalog for LST 9-13
[08:40:02] INFO: Selecting Catalog
[08:40:02] INFO: Using Catalog for LST 9-13
[08:40:02] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:40:02] INFO: Selecting Catalog
[08:40:02] INFO: Using Catalog for LST 9-13
[08:40:02] INFO: Selecting Catalog
[08:40:02] INFO: Using Catalog for LST 9-13
[08:40:02] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:40:02] INFO: Selecting Catalog
[08:40:02] INFO: Using Catalog for LST 9-13
[08:40:02] INFO: Selecting Catalog
[08:40:02] INFO: Using Catalog for LST 9-13
[08:40:02] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:40:02] INFO: Selecting Catalog
[08:40:02] INFO: Using Catalog for LST 9-13
[08:40:02] INFO: Selecting Catalog
[08:40:02] INFO: Using Catalog for LST 9-13
[08:40:02] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:40:02] INFO: Selecting Catalog
[08:40:02] INFO: Using Catalog for LST 9-13
[08:40:02] INFO: Selecting Catalog
[08:40:02] INFO: Using Catalog for LST 9-13
[08:40:02] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:40:02] INFO: Selecting Catalog
[08:40:02] INFO: Using Catalog for LST 9-13
[08:40:02] INFO: Selecting Catalog
[08:40:02] INFO: Using Catalog for LST 9-13
[08:40:02] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:40:02] INFO: Selecting Catalog
[08:40:02] INFO: Using Catalog for LST 9-13
[08:40:02] INFO: Selecting Catalog
[08:40:02] INFO: Using Catalog for LST 9-13
[08:40:02] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:40:02] INFO: Selecting Catalog
[08:40:02] INFO: Using Catalog for LST 9-13
[08:40:02] INFO: Selecting Catalog
[08:40:02] INFO: Using Catalog for LST 9-13
[08:40:02] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:40:02] INFO: Selecting Catalog
[08:40:02] INFO: Using Catalog for LST 9-13
[08:40:02] INFO: Selecting Catalog
[08:40:02] INFO: Using Catalog for LST 9-13
[08:40:02] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:40:02] INFO: Selecting Catalog
[08:40:02] INFO: Using Catalog for LST 9-13
[08:40:02] INFO: Selecting Catalog
[08:40:02] INFO: Using Catalog for LST 9-13
[08:40:02] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:40:02] INFO: Selecting Catalog
[08:40:02] INFO: Using Catalog for LST 9-13
[08:40:02] INFO: Selecting Catalog
[08:40:02] INFO: Using Catalog for LST 9-13
[08:40:02] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:40:02] INFO: Selecting Catalog
[08:40:02] INFO: Using Catalog for LST 9-13
[08:40:02] INFO: Selecting Catalog
[08:40:02] INFO: Using Catalog for LST 9-13
[08:40:02] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:40:02] INFO: Selecting Catalog
[08:40:02] INFO: Using Catalog for LST 9-13
[08:40:02] INFO: Selecting Catalog
[08:40:02] INFO: Using Catalog for LST 9-13
[08:40:02] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:40:02] INFO: Selecting Catalog
[08:40:02] INFO: Using Catalog for LST 9-13
[08:40:02] INFO: Selecting Catalog
[08:40:02] INFO: Using Catalog for LST 9-13
[08:40:02] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:40:02] INFO: Selecting Catalog
[08:40:02] INFO: Using Catalog for LST 9-13
[08:40:03] INFO: Selecting Catalog
[08:40:03] INFO: Using Catalog for LST 9-13
[08:40:03] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:40:03] INFO: Selecting Catalog
[08:40:03] INFO: Using Catalog for LST 9-13
[08:40:03] INFO: Selecting Catalog
[08:40:03] INFO: Using Catalog for LST 9-13
[08:40:03] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:40:03] INFO: Selecting Catalog
[08:40:03] INFO: Using Catalog for LST 9-13
[08:40:03] INFO: Selecting Catalog
[08:40:03] INFO: Using Catalog for LST 9-13
[08:40:03] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:40:03] INFO: Selecting Catalog
[08:40:03] INFO: Using Catalog for LST 9-13
[08:40:03] INFO: Selecting Catalog
[08:40:03] INFO: Using Catalog for LST 9-13
[08:40:03] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:40:03] INFO: Selecting Catalog
[08:40:03] INFO: Using Catalog for LST 9-13
[08:40:03] INFO: Selecting Catalog
[08:40:03] INFO: Using Catalog for LST 9-13
[08:40:03] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:40:03] INFO: Selecting Catalog
[08:40:03] INFO: Using Catalog for LST 9-13
[08:40:03] INFO: Selecting Catalog
[08:40:03] INFO: Using Catalog for LST 9-13
[08:40:03] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:40:03] INFO: Selecting Catalog
[08:40:03] INFO: Using Catalog for LST 9-13
[08:40:03] INFO: Selecting Catalog
[08:40:03] INFO: Using Catalog for LST 9-13
[08:40:03] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:40:03] INFO: Selecting Catalog
[08:40:03] INFO: Using Catalog for LST 9-13
[08:40:03] INFO: Selecting Catalog
[08:40:03] INFO: Using Catalog for LST 9-13
[08:40:03] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:40:03] INFO: Selecting Catalog
[08:40:03] INFO: Using Catalog for LST 9-13
[08:40:03] INFO: Selecting Catalog
[08:40:03] INFO: Using Catalog for LST 9-13
[08:40:03] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:40:03] INFO: Selecting Catalog
[08:40:03] INFO: Using Catalog for LST 9-13
[08:40:03] INFO: Selecting Catalog
[08:40:03] INFO: Using Catalog for LST 9-13
[08:40:03] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:40:03] INFO: Selecting Catalog
[08:40:03] INFO: Using Catalog for LST 9-13
[08:40:03] INFO: Selecting Catalog
[08:40:03] INFO: Using Catalog for LST 9-13
[08:40:03] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:40:03] INFO: Selecting Catalog
[08:40:03] INFO: Using Catalog for LST 9-13
[08:40:03] INFO: Selecting Catalog
[08:40:03] INFO: Using Catalog for LST 9-13
[08:40:03] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:40:03] INFO: Selecting Catalog
[08:40:03] INFO: Using Catalog for LST 9-13
[08:40:03] INFO: Selecting Catalog
[08:40:03] INFO: Using Catalog for LST 9-13
[08:40:03] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:40:03] INFO: Selecting Catalog
[08:40:03] INFO: Using Catalog for LST 9-13
[08:40:03] INFO: Selecting Catalog
[08:40:03] INFO: Using Catalog for LST 9-13
[08:40:03] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:40:03] INFO: Selecting Catalog
[08:40:03] INFO: Using Catalog for LST 9-13
[08:40:03] INFO: Selecting Catalog
[08:40:03] INFO: Using Catalog for LST 9-13
[08:40:03] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:40:03] INFO: Selecting Catalog
[08:40:03] INFO: Using Catalog for LST 9-13
[08:40:03] INFO: Selecting Catalog
[08:40:03] INFO: Using Catalog for LST 9-13
[08:40:03] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:40:04] INFO: Selecting Catalog
[08:40:04] INFO: Using Catalog for LST 9-13
[08:40:04] INFO: Selecting Catalog
[08:40:04] INFO: Using Catalog for LST 9-13
[08:40:04] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:40:04] INFO: Selecting Catalog
[08:40:04] INFO: Using Catalog for LST 9-13
[08:40:04] INFO: Selecting Catalog
[08:40:04] INFO: Using Catalog for LST 9-13
[08:40:04] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:40:04] INFO: Selecting Catalog
[08:40:04] INFO: Using Catalog for LST 9-13
[08:40:04] INFO: Selecting Catalog
[08:40:04] INFO: Using Catalog for LST 9-13
[08:40:04] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:40:04] INFO: Selecting Catalog
[08:40:04] INFO: Using Catalog for LST 9-13
[08:40:04] INFO: Selecting Catalog
[08:40:04] INFO: Using Catalog for LST 9-13
[08:40:04] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:40:04] INFO: Selecting Catalog
[08:40:04] INFO: Using Catalog for LST 9-13
[08:40:04] INFO: Selecting Catalog
[08:40:04] INFO: Using Catalog for LST 9-13
[08:40:04] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:40:04] INFO: Selecting Catalog
[08:40:04] INFO: Using Catalog for LST 9-13
[08:40:04] INFO: Selecting Catalog
[08:40:04] INFO: Using Catalog for LST 9-13
[08:40:04] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:40:04] INFO: Selecting Catalog
[08:40:04] INFO: Using Catalog for LST 9-13
[08:40:04] INFO: Selecting Catalog
[08:40:04] INFO: Using Catalog for LST 9-13
[08:40:04] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:40:04] INFO: Selecting Catalog
[08:40:04] INFO: Using Catalog for LST 9-13
[08:40:04] INFO: Selecting Catalog
[08:40:04] INFO: Using Catalog for LST 9-13
[08:40:04] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:40:04] INFO: Selecting Catalog
[08:40:04] INFO: Using Catalog for LST 9-13
[08:40:04] INFO: Selecting Catalog
[08:40:04] INFO: Using Catalog for LST 9-13
[08:40:04] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:40:04] INFO: Selecting Catalog
[08:40:04] INFO: Using Catalog for LST 9-13
[08:40:04] INFO: Selecting Catalog
[08:40:04] INFO: Using Catalog for LST 9-13
[08:40:04] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:40:04] INFO: Selecting Catalog
[08:40:04] INFO: Using Catalog for LST 9-13
[08:40:04] INFO: Selecting Catalog
[08:40:04] INFO: Using Catalog for LST 9-13
[08:40:04] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:40:04] INFO: Selecting Catalog
[08:40:04] INFO: Using Catalog for LST 9-13
[08:40:04] INFO: Selecting Catalog
[08:40:04] INFO: Using Catalog for LST 9-13
[08:40:04] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:40:04] INFO: Selecting Catalog
[08:40:04] INFO: Using Catalog for LST 9-13
[08:40:04] INFO: Selecting Catalog
[08:40:04] INFO: Using Catalog for LST 9-13
[08:40:04] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:40:04] INFO: Selecting Catalog
[08:40:04] INFO: Using Catalog for LST 9-13
[08:40:04] INFO: Selecting Catalog
[08:40:04] INFO: Using Catalog for LST 9-13
[08:40:04] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:40:04] INFO: Selecting Catalog
[08:40:04] INFO: Using Catalog for LST 9-13
[08:40:04] INFO: Selecting Catalog
[08:40:04] INFO: Using Catalog for LST 9-13
[08:40:04] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:40:04] INFO: Selecting Catalog
[08:40:04] INFO: Using Catalog for LST 9-13
[08:40:04] INFO: Selecting Catalog
[08:40:04] INFO: Using Catalog for LST 9-13
[08:40:04] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:40:04] INFO: Selecting Catalog
[08:40:04] INFO: Using Catalog for LST 9-13
[08:40:04] INFO: Selecting Catalog
[08:40:04] INFO: Using Catalog for LST 9-13
[08:40:04] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:40:05] INFO: Selecting Catalog
[08:40:05] INFO: Using Catalog for LST 9-13
[08:40:05] INFO: Selecting Catalog
[08:40:05] INFO: Using Catalog for LST 9-13
[08:40:05] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
runSuccessful: True
[08:40:05] ******** End Scheduling Block
[08:40:05] ******** observer = OPERATOR, SB name = 15B287_operator, project ID = AGBT15B_287

how much log? 19779 id: 179188self.history: <gbt.turtle.database.History.History instance at 0x4956b00>self.history.connection: <gbt.turtle.database.TurtleConnection.TurtleConnection instance at 0x4956878>how much converted log? 19987 
#######################################################
 
 
#######################################################
 SCRIPT NUMBER 3, project:AGBT15B_287_40 
 179189 128 OPERATOR 10 Amber Bonsall 2016-01-10 08:41:10 obs_completed 
#######################################################
# test script to update catalog as you go...

########## CHANGE THESE ONLY #############
OnOffOnTime = 10 #minutes (change this to 12 to be in line with DSS scheduling)
obs_per_source = 3 #total observing time per source = OnOffOnTime * obs_per_source
h = Horizon(10.0) #minimum of 10 degrees elevation
h_up = Horizon(85.0) #maximum of 85 degrees due to keyhole
myOff = Offset("J2000",1.0,0.0,cosv=True)  # Off position relative to source
doFirstPointing = True #Setting to False will skip the first pointing
doFirstCal = True  #Setting to False will skip the first 3C calibrator OnOff scan
peak_every = 12 #peak/cal every 12 OnOffOn (every 2.5 hours)
peak_near_source = False #Do another peak when changing to new source
#####################################

######### NOTES ###############
# This script runs in blocks of On-Off-On position switching with
# the two outer 'on' scans sharing one 'off'
# Total on-source time = 20 minutes
# Length of one 'On' or 'Off' = 3 minutes 20 seconds
# Length of one On-Off-On = 10 minutes
# 3 On-Off-On blocks are needed per source (30 minutes total per source)

###### Timing
# It takes 34m to completely observe 1 source+overhead (9 track scans)

execfile("/home/astro-util/projects/15B287_operator/15B287_config.py")
execfile("/home/astro-util/projects/15B287_operator/15B287_utils.py")
Catalog(fluxcal)
Catalog(lband_pointing)

scanTime = OnOffOnTime * 20.0 #seconds
tdelta = DateTime.TimeDelta(minutes=OnOffOnTime)
obs_count = 0
doCal = doFirstCal
doPointing = doFirstPointing
project_obs = 0
old_catalog_name = 'dummy'
fullcat = '/home/astro-util/projects/15B287_operator/15B287_operator.cat'

Configure(config_1)

while project_obs < 100:
    mycat,altcal = select_my_catalog()
    if mycat == old_catalog_name:
        print 'SAME CATALOG HAS BEEN SELECTED: Using FULL catalog'
        mycat = fullcat
        altcal = '3C309_1'
    old_catalog_name = mycat
    c = Catalog(mycat)
    sources = c.keys()
    for source in sources:
        doBalance = True
        newPeak = True
        calibrator = c[source]["calibrator"]
        n_obs = int(float(c[source]["n_obs"]))
        obs_left = obs_per_source-n_obs
        obs_ok = obs_left > 0
        t_now = Now()
        if t_now != None and obs_ok:
            source_rise = h.GetRise(source)
            source_set  = h.GetSet(source)
            keyhole_rise = h_up.GetRise(source)
            keyhole_set = h_up.GetSet(source)
            if source_rise != None or keyhole_set != None:
                if source_set != None and keyhole_rise != None:
                    t_ok = ((t_now + tdelta) < source_set)
                    t_ok = t_ok and (t_now >= source_rise)
                    t_ok = t_ok and ((t_now + tdelta) < keyhole_rise)
                else:
                    t_ok = True
            else:
                t_ok = False
        else:
            t_ok = False

        source_ok = t_ok and obs_ok

        if source_ok:
            if doPointing == True:
                #check the calibrator is above the horizon
                keyhole_cal_rise = h_up.GetRise(calibrator)
                keyhole_cal_set = h_up.GetSet(calibrator)
                cal_rise = h.GetRise(calibrator)
                if cal_rise>t_now or keyhole_cal_set == None:
                    myCal = altcal #low circumpolar alternative
                    print 'Calibrator %s is too low: Using %s' %(calibrator,altcal)
                else:
                    if keyhole_cal_rise != None:
                        if (t_now+tdelta) >= keyhole_cal_rise:
                            print 'Calibrator %s is in keyhole: Using %s' %(calibrator,altcal)
                            myCal = altcal
                        else:
                            myCal = calibrator
                    else:
                        myCal = calibrator

                if obs_count == 0:
                    AutoPeakFocus(myCal)
                    #Break("Check Peak and Focus")
                else:
                    AutoPeak(myCal)
                Configure(config_1)
                doBalance = True
                doPointing = False

            if doCal:
                Slew(myCal)
                Balance()
                print 'Calibration scans (OnOff) :%s ' %(myCal)
                OnOff(myCal,myOff,120.0)
                doCal = False
                doBalance = True

            for i in range(obs_left):
                t_now = Now()   #check time ok again
                t_ok = False
                if t_now != None and keyhole_set != None:
                    if source_rise != None:
                        if source_set != None:
                            t_ok = ((t_now + tdelta) < source_set)
                            t_ok = t_ok and (t_now >= source_rise)
                            if keyhole_rise != None:
                                t_ok = t_ok and ((t_now+tdelta) < keyhole_rise)
                        else:
                            t_ok = True
                    else:
                        t_ok = False
                else:
                    t_ok = False

                if t_ok:
                    if peak_near_source and newPeak:
                        Slew(source)
                        AutoPeak()
                        Configure(config_1)
                        newPeak = False
                        doBalance = True
                    if doBalance:
                        Slew(source)
                        Balance()
                        doBalance = False

                    Comment("Starting on-source scan")
                    Track(source,None,scanTime)
                    Comment("Starting off-source scan")
                    Track(source,None,scanTime,fixedOffset=myOff)
                    Comment("Starting on-source scan")
                    Track(source,None,scanTime)
                    obs_count = obs_count + 1
                    obs_tot = obs_per_source+1-obs_left+i
                    print '%s: OBS COMPLETE = %s/%s' %(source,obs_tot,obs_per_source)
                    update_my_catalogs(source,obs_tot)

                    if obs_count % peak_every == 0:  #Cal/pointing interval
                        doCal = True
                        doPointing = True
        if source_ok and mycat == fullcat:
            break
    project_obs = project_obs+1

#######################################################
 LOG SESSION NUMBER 3 
[08:41:10] ******** Begin Scheduling Block
[08:41:10] ******** observer = OPERATOR, SB name = 15B287_operator, project ID = AGBT15B_287, date = 10 Jan 2016

[08:41:11] Configuring telescope.
[08:41:11]     Setting State: Activating
[08:41:12]     Setting State: Ready
[08:41:12]     Setting State: Activating
[08:41:13]     Setting State: Ready
[08:41:13] Default values are
[08:41:13] if3freq  =  [0, 0, 0]
[08:41:13] notchfilter  =  In
[08:41:13] polswitch  =  thru
[08:41:13] The bad devices are: 
[08:41:13] OpticalDriver5
[08:41:13] The bad devices are: 
[08:41:13] OpticalDriver5

[08:41:13] Checking telescope
[08:41:13] Configuration Complete
[08:41:13] INFO: Selecting Catalog
[08:41:13] INFO: Using Catalog for LST 9-13
[08:41:13] INFO: Selecting Catalog
[08:41:13] INFO: Using Catalog for LST 9-13
[08:41:13] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:41:13] Calibrator 3C48 is too low: Using 3C309_1
[08:41:14] Configuring telescope.
[08:41:14]     Setting State: Activating
[08:41:16]     Setting State: Ready
[08:41:17]     Setting State: Activating
[08:41:18]     Setting State: Ready
[08:41:18] Default values are
[08:41:18] if3freq  =  [0]
[08:41:18] notchfilter  =  In
[08:41:18] polswitch  =  thru
[08:41:18] The bad devices are: 
[08:41:18] OpticalDriver5
[08:41:18] Waiting for the Rcvr1_2 to finish activating
[08:41:18] . .
[08:41:18] Checking telescope
[08:41:18] Configuration Complete
[08:41:19] source : 3C309_1
               F1 : 1.4
               F2 : 32.0
               S22235 : 1.0
               S1400 : 7.5
               angsize : 1.5
               location : J2000 @ (14:59:07.58, 71:40:19.87)
[08:41:19] Slewing to source.
[08:41:19] In state Ready, waiting for state Activating
[08:41:19]     Setting State: Activating
[08:41:19] Detected state Activating
[08:41:19] In state Activating, waiting for state Ready
[08:41:33]     Setting State: Ready
[08:41:33] Detected state Ready
[08:41:33] Balancing IF system.
[08:41:33] Balancing IFRack
[08:41:33]     Setting State: Activating
[08:41:33]     Setting State: Ready
[08:41:35] the sampler values are:
[08:41:35] RF_power 1 : 1.010742
[08:41:35] RF_power 2 : 0.004882812
[08:41:35] RF_power 3 : 1.09375
[08:41:35] RF_power 4 : 0.01464844
[08:41:35] RF_power 5 : 0.03417969
[08:41:35] RF_power 6 : 2.817383
[08:41:35] RF_power 7 : 0.4394531
[08:41:35] RF_power 8 : 0.02441406
[08:41:35] source : 3C309_1
               F1 : 1.4
               F2 : 32.0
               S22235 : 1.0
               S1400 : 7.5
               angsize : 1.5
               location : J2000 @ (14:59:07.58, 71:40:19.87)
[08:41:35] Peak: Subscan 1 of 4
[08:41:35] In state Ready, waiting for state Running
[08:41:35]     Setting State: Activating
[08:41:57]     Setting State: Committed
[08:42:00]     Setting State: Running
[08:42:00] Detected state Running
[08:42:00] *** Notice: This subscan will be numbered as scan #15 in your data reduction package.
[08:42:00] In state Running, waiting for state Ready
[08:42:29]     Setting State: Stopping
[08:42:35]     Setting State: Ready
[08:42:35] Detected state Ready
[08:42:35] Ygor Telescope: WaitForStopping
[08:42:35] Peak: Subscan 2 of 4
[08:42:35] In state Ready, waiting for state Running
[08:42:35]     Setting State: Activating
[08:42:44]     Setting State: Committed
[08:42:46]     Setting State: Running
[08:42:46] Detected state Running
[08:42:46] *** Notice: This subscan will be numbered as scan #16 in your data reduction package.
[08:42:46] In state Running, waiting for state Ready
[08:43:16]     Setting State: Stopping
[08:43:22]     Setting State: Ready
[08:43:22] Detected state Ready
[08:43:22] Ygor Telescope: WaitForStopping
[08:43:23] . *** Updating antenna's pointing to az2=0.0392 and el=0.2949 arcmins

[08:43:23] Peak: Subscan 3 of 4
[08:43:23] In state Ready, waiting for state Running
[08:43:23]     Setting State: Activating
[08:43:43]     Setting State: Committed
[08:43:45]     Setting State: Running
[08:43:45] Detected state Running
[08:43:45] *** Notice: This subscan will be numbered as scan #17 in your data reduction package.
[08:43:45] In state Running, waiting for state Ready
[08:44:15]     Setting State: Stopping
[08:44:20]     Setting State: Ready
[08:44:20] Detected state Ready
[08:44:20] Ygor Telescope: WaitForStopping
[08:44:20] Peak: Subscan 4 of 4
[08:44:20] In state Ready, waiting for state Running
[08:44:20]     Setting State: Activating
[08:44:28]     Setting State: Committed
[08:44:30]     Setting State: Running
[08:44:30] Detected state Running
[08:44:30] *** Notice: This subscan will be numbered as scan #18 in your data reduction package.
[08:44:30] In state Running, waiting for state Ready
[08:45:00]     Setting State: Stopping
[08:45:04]     Setting State: Ready
[08:45:04] Detected state Ready
[08:45:04] Ygor Telescope: WaitForStopping
[08:45:05] *** Updating antenna's pointing to az2=0.0392 and el=0.2756 arcmins

[08:45:05] source : 3C309_1
               F1 : 1.4
               F2 : 32.0
               S22235 : 1.0
               S1400 : 7.5
               angsize : 1.5
               location : J2000 @ (14:59:07.58, 71:40:19.87)
[08:45:05] Focus: Subscan 1 of 1
[08:45:06] In state Ready, waiting for state Running
[08:45:06]     Setting State: Activating
[08:45:32]     Setting State: Committed
[08:45:34]     Setting State: Running
[08:45:34] Detected state Running
[08:45:34] *** Notice: This subscan will be numbered as scan #19 in your data reduction package.
[08:45:34] In state Running, waiting for state Ready
[08:46:34]     Setting State: Stopping
[08:46:36]     Setting State: Ready
[08:46:36] Detected state Ready
[08:46:36] Ygor Telescope: WaitForStopping
[08:46:36] *** Updating antenna's focus to -25.99 mm

[08:46:37] Configuring telescope.
[08:46:37]     Setting State: Activating
[08:46:39]     Setting State: Ready
[08:46:41]     Setting State: Activating
[08:46:42]     Setting State: Ready
[08:46:42] Default values are
[08:46:42] if3freq  =  [0, 0, 0]
[08:46:42] notchfilter  =  In
[08:46:42] polswitch  =  thru
[08:46:42] The bad devices are: 
[08:46:42] OpticalDriver5
[08:46:42] The bad devices are: 
[08:46:42] OpticalDriver5
[08:46:42] Waiting for the ConverterRack to finish activating
[08:46:42] . .
[08:46:42] Checking telescope
[08:46:42] Configuration Complete
[08:46:42] source : 3C309_1
               F1 : 1.4
               F2 : 32.0
               S22235 : 1.0
               S1400 : 7.5
               angsize : 1.5
               location : J2000 @ (14:59:07.58, 71:40:19.87)
[08:46:42] Slewing to source.
[08:46:42] In state Ready, waiting for state Activating
[08:46:42]     Setting State: Activating
[08:46:42] Detected state Activating
[08:46:42] In state Activating, waiting for state Ready
[08:47:09]     Setting State: Ready
[08:47:09] Detected state Ready
[08:47:09] Balancing IF system.
[08:47:09] Balancing IFRack
[08:47:10]     Setting State: Activating
[08:47:10]     Setting State: Ready
[08:47:11] the sampler values are:
[08:47:11] RF_power 1 : 2.96875
[08:47:11] RF_power 2 : 0.004882812
[08:47:11] RF_power 3 : 2.973633
[08:47:11] RF_power 4 : 0.01464844
[08:47:11] RF_power 5 : 0.03417969
[08:47:11] RF_power 6 : 2.963867
[08:47:11] RF_power 7 : 3.041992
[08:47:11] RF_power 8 : 0.02441406
[08:47:11] Balancing VEGAS
[08:47:12]     Setting State: Activating
[08:47:12]     Setting State: Ready
[08:47:13]     Setting State: Activating
[08:47:13]     Setting State: Ready
[08:47:13] Calibration scans (OnOff) :3C309_1 
[08:47:13] source : 3C309_1
               F1 : 1.4
               F2 : 32.0
               S22235 : 1.0
               S1400 : 7.5
               angsize : 1.5
               location : J2000 @ (14:59:07.58, 71:40:19.87)
[08:47:13] OnOff: Subscan 1 of 2
[08:47:14] In state Ready, waiting for state Running
[08:47:14]     Setting State: Activating
[08:47:19]     Setting State: Committed
[08:47:21]     Setting State: Running
[08:47:21] Detected state Running
[08:47:21] *** Notice: This subscan will be numbered as scan #20 in your data reduction package.
[08:47:21] In state Running, waiting for state Ready
[08:49:21]     Setting State: Stopping
[08:49:23]     Setting State: Ready
[08:49:23] Detected state Ready
[08:49:23] Ygor Telescope: WaitForStopping
[08:49:23] OnOff: Subscan 2 of 2
[08:49:23] In state Ready, waiting for state Running
[08:49:23]     Setting State: Activating
[08:49:37]     Setting State: Committed
[08:49:39]     Setting State: Running
[08:49:39] Detected state Running
[08:49:39] *** Notice: This subscan will be numbered as scan #21 in your data reduction package.
[08:49:39] In state Running, waiting for state Ready
[08:51:39]     Setting State: Stopping
[08:51:41]     Setting State: Ready
[08:51:41] Detected state Ready
[08:51:41] Ygor Telescope: WaitForStopping
[08:51:41] INFO: Selecting Catalog
[08:51:41] INFO: Using Catalog for LST 9-13
[08:51:41] INFO: Selecting Catalog
[08:51:41] INFO: Using Catalog for LST 9-13
[08:51:41] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:51:41] INFO: Selecting Catalog
[08:51:41] INFO: Using Catalog for LST 9-13
[08:51:41] INFO: Selecting Catalog
[08:51:41] INFO: Using Catalog for LST 9-13
[08:51:41] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:51:41] INFO: Selecting Catalog
[08:51:41] INFO: Using Catalog for LST 9-13
[08:51:41] INFO: Selecting Catalog
[08:51:41] INFO: Using Catalog for LST 9-13
[08:51:41] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:51:41] INFO: Selecting Catalog
[08:51:41] INFO: Using Catalog for LST 9-13
[08:51:41] INFO: Selecting Catalog
[08:51:41] INFO: Using Catalog for LST 9-13
[08:51:41] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:51:41] INFO: Selecting Catalog
[08:51:41] INFO: Using Catalog for LST 9-13
[08:51:41] INFO: Selecting Catalog
[08:51:41] INFO: Using Catalog for LST 9-13
[08:51:41] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:51:41] INFO: Selecting Catalog
[08:51:41] INFO: Using Catalog for LST 9-13
[08:51:41] INFO: Selecting Catalog
[08:51:41] INFO: Using Catalog for LST 9-13
[08:51:41] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:51:41] INFO: Selecting Catalog
[08:51:41] INFO: Using Catalog for LST 9-13
[08:51:41] INFO: Selecting Catalog
[08:51:41] INFO: Using Catalog for LST 9-13
[08:51:41] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:51:41] INFO: Selecting Catalog
[08:51:41] INFO: Using Catalog for LST 9-13
[08:51:41] INFO: Selecting Catalog
[08:51:41] INFO: Using Catalog for LST 9-13
[08:51:41] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:51:41] INFO: Selecting Catalog
[08:51:41] INFO: Using Catalog for LST 9-13
[08:51:41] INFO: Selecting Catalog
[08:51:41] INFO: Using Catalog for LST 9-13
[08:51:41] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:51:41] INFO: Selecting Catalog
[08:51:41] INFO: Using Catalog for LST 9-13
[08:51:41] INFO: Selecting Catalog
[08:51:41] INFO: Using Catalog for LST 9-13
[08:51:41] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:51:41] INFO: Selecting Catalog
[08:51:41] INFO: Using Catalog for LST 9-13
[08:51:41] INFO: Selecting Catalog
[08:51:41] INFO: Using Catalog for LST 9-13
[08:51:41] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:51:41] INFO: Selecting Catalog
[08:51:41] INFO: Using Catalog for LST 9-13
[08:51:41] INFO: Selecting Catalog
[08:51:41] INFO: Using Catalog for LST 9-13
[08:51:41] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:51:41] INFO: Selecting Catalog
[08:51:41] INFO: Using Catalog for LST 9-13
[08:51:41] INFO: Selecting Catalog
[08:51:41] INFO: Using Catalog for LST 9-13
[08:51:41] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:51:41] INFO: Selecting Catalog
[08:51:41] INFO: Using Catalog for LST 9-13
[08:51:41] INFO: Selecting Catalog
[08:51:41] INFO: Using Catalog for LST 9-13
[08:51:41] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:51:41] INFO: Selecting Catalog
[08:51:41] INFO: Using Catalog for LST 9-13
[08:51:41] INFO: Selecting Catalog
[08:51:41] INFO: Using Catalog for LST 9-13
[08:51:41] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:51:42] INFO: Selecting Catalog
[08:51:42] INFO: Using Catalog for LST 9-13
[08:51:42] INFO: Selecting Catalog
[08:51:42] INFO: Using Catalog for LST 9-13
[08:51:42] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:51:42] INFO: Selecting Catalog
[08:51:42] INFO: Using Catalog for LST 9-13
[08:51:42] INFO: Selecting Catalog
[08:51:42] INFO: Using Catalog for LST 9-13
[08:51:42] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:51:42] INFO: Selecting Catalog
[08:51:42] INFO: Using Catalog for LST 9-13
[08:51:42] INFO: Selecting Catalog
[08:51:42] INFO: Using Catalog for LST 9-13
[08:51:42] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:51:42] INFO: Selecting Catalog
[08:51:42] INFO: Using Catalog for LST 9-13
[08:51:42] INFO: Selecting Catalog
[08:51:42] INFO: Using Catalog for LST 9-13
[08:51:42] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:51:42] INFO: Selecting Catalog
[08:51:42] INFO: Using Catalog for LST 9-13
[08:51:42] INFO: Selecting Catalog
[08:51:42] INFO: Using Catalog for LST 9-13
[08:51:42] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:51:42] INFO: Selecting Catalog
[08:51:42] INFO: Using Catalog for LST 9-13
[08:51:42] INFO: Selecting Catalog
[08:51:42] INFO: Using Catalog for LST 9-13
[08:51:42] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:51:42] INFO: Selecting Catalog
[08:51:42] INFO: Using Catalog for LST 9-13
[08:51:42] INFO: Selecting Catalog
[08:51:42] INFO: Using Catalog for LST 9-13
[08:51:42] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:51:42] INFO: Selecting Catalog
[08:51:42] INFO: Using Catalog for LST 9-13
[08:51:42] INFO: Selecting Catalog
[08:51:42] INFO: Using Catalog for LST 9-13
[08:51:42] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:51:42] INFO: Selecting Catalog
[08:51:42] INFO: Using Catalog for LST 9-13
[08:51:42] INFO: Selecting Catalog
[08:51:42] INFO: Using Catalog for LST 9-13
[08:51:42] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:51:42] INFO: Selecting Catalog
[08:51:42] INFO: Using Catalog for LST 9-13
[08:51:42] INFO: Selecting Catalog
[08:51:42] INFO: Using Catalog for LST 9-13
[08:51:42] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:51:42] INFO: Selecting Catalog
[08:51:42] INFO: Using Catalog for LST 9-13
[08:51:42] INFO: Selecting Catalog
[08:51:42] INFO: Using Catalog for LST 9-13
[08:51:42] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:51:42] INFO: Selecting Catalog
[08:51:42] INFO: Using Catalog for LST 9-13
[08:51:42] INFO: Selecting Catalog
[08:51:42] INFO: Using Catalog for LST 9-13
[08:51:42] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:51:42] INFO: Selecting Catalog
[08:51:42] INFO: Using Catalog for LST 9-13
[08:51:42] INFO: Selecting Catalog
[08:51:42] INFO: Using Catalog for LST 9-13
[08:51:42] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:51:42] INFO: Selecting Catalog
[08:51:42] INFO: Using Catalog for LST 9-13
[08:51:42] INFO: Selecting Catalog
[08:51:42] INFO: Using Catalog for LST 9-13
[08:51:42] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:51:42] INFO: Selecting Catalog
[08:51:42] INFO: Using Catalog for LST 9-13
[08:51:42] INFO: Selecting Catalog
[08:51:42] INFO: Using Catalog for LST 9-13
[08:51:42] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:51:42] INFO: Selecting Catalog
[08:51:42] INFO: Using Catalog for LST 9-13
[08:51:42] INFO: Selecting Catalog
[08:51:42] INFO: Using Catalog for LST 9-13
[08:51:42] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:51:43] INFO: Selecting Catalog
[08:51:43] INFO: Using Catalog for LST 9-13
[08:51:43] INFO: Selecting Catalog
[08:51:43] INFO: Using Catalog for LST 9-13
[08:51:43] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:51:43] INFO: Selecting Catalog
[08:51:43] INFO: Using Catalog for LST 9-13
[08:51:43] INFO: Selecting Catalog
[08:51:43] INFO: Using Catalog for LST 9-13
[08:51:43] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:51:43] INFO: Selecting Catalog
[08:51:43] INFO: Using Catalog for LST 9-13
[08:51:43] INFO: Selecting Catalog
[08:51:43] INFO: Using Catalog for LST 9-13
[08:51:43] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:51:43] INFO: Selecting Catalog
[08:51:43] INFO: Using Catalog for LST 9-13
[08:51:43] INFO: Selecting Catalog
[08:51:43] INFO: Using Catalog for LST 9-13
[08:51:43] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:51:43] INFO: Selecting Catalog
[08:51:43] INFO: Using Catalog for LST 9-13
[08:51:43] INFO: Selecting Catalog
[08:51:43] INFO: Using Catalog for LST 9-13
[08:51:43] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:51:43] INFO: Selecting Catalog
[08:51:43] INFO: Using Catalog for LST 9-13
[08:51:43] INFO: Selecting Catalog
[08:51:43] INFO: Using Catalog for LST 9-13
[08:51:43] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:51:43] INFO: Selecting Catalog
[08:51:43] INFO: Using Catalog for LST 9-13
[08:51:43] INFO: Selecting Catalog
[08:51:43] INFO: Using Catalog for LST 9-13
[08:51:43] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:51:43] INFO: Selecting Catalog
[08:51:43] INFO: Using Catalog for LST 9-13
[08:51:43] INFO: Selecting Catalog
[08:51:43] INFO: Using Catalog for LST 9-13
[08:51:43] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:51:43] INFO: Selecting Catalog
[08:51:43] INFO: Using Catalog for LST 9-13
[08:51:43] INFO: Selecting Catalog
[08:51:43] INFO: Using Catalog for LST 9-13
[08:51:43] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:51:43] INFO: Selecting Catalog
[08:51:43] INFO: Using Catalog for LST 9-13
[08:51:43] INFO: Selecting Catalog
[08:51:43] INFO: Using Catalog for LST 9-13
[08:51:43] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:51:43] INFO: Selecting Catalog
[08:51:43] INFO: Using Catalog for LST 9-13
[08:51:43] INFO: Selecting Catalog
[08:51:43] INFO: Using Catalog for LST 9-13
[08:51:43] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:51:43] INFO: Selecting Catalog
[08:51:43] INFO: Using Catalog for LST 9-13
[08:51:43] INFO: Selecting Catalog
[08:51:43] INFO: Using Catalog for LST 9-13
[08:51:43] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:51:43] INFO: Selecting Catalog
[08:51:43] INFO: Using Catalog for LST 9-13
[08:51:43] INFO: Selecting Catalog
[08:51:43] INFO: Using Catalog for LST 9-13
[08:51:43] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:51:43] INFO: Selecting Catalog
[08:51:43] INFO: Using Catalog for LST 9-13
[08:51:43] INFO: Selecting Catalog
[08:51:43] INFO: Using Catalog for LST 9-13
[08:51:43] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:51:43] INFO: Selecting Catalog
[08:51:43] INFO: Using Catalog for LST 9-13
[08:51:43] INFO: Selecting Catalog
[08:51:43] INFO: Using Catalog for LST 9-13
[08:51:43] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:51:43] INFO: Selecting Catalog
[08:51:43] INFO: Using Catalog for LST 9-13
[08:51:43] INFO: Selecting Catalog
[08:51:43] INFO: Using Catalog for LST 9-13
[08:51:43] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:51:44] INFO: Selecting Catalog
[08:51:44] INFO: Using Catalog for LST 9-13
[08:51:44] INFO: Selecting Catalog
[08:51:44] INFO: Using Catalog for LST 9-13
[08:51:44] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:51:44] INFO: Selecting Catalog
[08:51:44] INFO: Using Catalog for LST 9-13
[08:51:44] INFO: Selecting Catalog
[08:51:44] INFO: Using Catalog for LST 9-13
[08:51:44] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
runSuccessful: True
[08:51:44] ******** End Scheduling Block
[08:51:44] ******** observer = OPERATOR, SB name = 15B287_operator, project ID = AGBT15B_287

how much log? 19716 id: 179189self.history: <gbt.turtle.database.History.History instance at 0x4956b00>self.history.connection: <gbt.turtle.database.TurtleConnection.TurtleConnection instance at 0x4956878>how much converted log? 19924 
#######################################################
 
 
#######################################################
 SCRIPT NUMBER 4, project:AGBT15B_287_40 
 179190 128 OPERATOR 10 Amber Bonsall 2016-01-10 08:51:46 obs_completed 
#######################################################
# test script to update catalog as you go...

########## CHANGE THESE ONLY #############
OnOffOnTime = 10 #minutes (change this to 12 to be in line with DSS scheduling)
obs_per_source = 3 #total observing time per source = OnOffOnTime * obs_per_source
h = Horizon(10.0) #minimum of 10 degrees elevation
h_up = Horizon(85.0) #maximum of 85 degrees due to keyhole
myOff = Offset("J2000",1.0,0.0,cosv=True)  # Off position relative to source
doFirstPointing = True #Setting to False will skip the first pointing
doFirstCal = True  #Setting to False will skip the first 3C calibrator OnOff scan
peak_every = 12 #peak/cal every 12 OnOffOn (every 2.5 hours)
peak_near_source = False #Do another peak when changing to new source
#####################################

######### NOTES ###############
# This script runs in blocks of On-Off-On position switching with
# the two outer 'on' scans sharing one 'off'
# Total on-source time = 20 minutes
# Length of one 'On' or 'Off' = 3 minutes 20 seconds
# Length of one On-Off-On = 10 minutes
# 3 On-Off-On blocks are needed per source (30 minutes total per source)

###### Timing
# It takes 34m to completely observe 1 source+overhead (9 track scans)

execfile("/home/astro-util/projects/15B287_operator/15B287_config.py")
execfile("/home/astro-util/projects/15B287_operator/15B287_utils.py")
Catalog(fluxcal)
Catalog(lband_pointing)

scanTime = OnOffOnTime * 20.0 #seconds
tdelta = DateTime.TimeDelta(minutes=OnOffOnTime)
obs_count = 0
doCal = doFirstCal
doPointing = doFirstPointing
project_obs = 0
old_catalog_name = 'dummy'
fullcat = '/home/astro-util/projects/15B287_operator/15B287_operator.cat'

Configure(config_1)

while project_obs < 100:
    mycat,altcal = select_my_catalog()
    if mycat == old_catalog_name:
        print 'SAME CATALOG HAS BEEN SELECTED: Using FULL catalog'
        mycat = fullcat
        altcal = '3C309_1'
    old_catalog_name = mycat
    c = Catalog(mycat)
    sources = c.keys()
    for source in sources:
        doBalance = True
        newPeak = True
        calibrator = c[source]["calibrator"]
        n_obs = int(float(c[source]["n_obs"]))
        obs_left = obs_per_source-n_obs
        obs_ok = obs_left > 0
        t_now = Now()
        if t_now != None and obs_ok:
            source_rise = h.GetRise(source)
            source_set  = h.GetSet(source)
            keyhole_rise = h_up.GetRise(source)
            keyhole_set = h_up.GetSet(source)
            if source_rise != None or keyhole_set != None:
                if source_set != None and keyhole_rise != None:
                    t_ok = ((t_now + tdelta) < source_set)
                    t_ok = t_ok and (t_now >= source_rise)
                    t_ok = t_ok and ((t_now + tdelta) < keyhole_rise)
                else:
                    t_ok = True
            else:
                t_ok = False
        else:
            t_ok = False

        source_ok = t_ok and obs_ok

        if source_ok:
            if doPointing == True:
                #check the calibrator is above the horizon
                keyhole_cal_rise = h_up.GetRise(calibrator)
                keyhole_cal_set = h_up.GetSet(calibrator)
                cal_rise = h.GetRise(calibrator)
                if cal_rise>t_now or keyhole_cal_set == None:
                    myCal = altcal #low circumpolar alternative
                    print 'Calibrator %s is too low: Using %s' %(calibrator,altcal)
                else:
                    if keyhole_cal_rise != None:
                        if (t_now+tdelta) >= keyhole_cal_rise:
                            print 'Calibrator %s is in keyhole: Using %s' %(calibrator,altcal)
                            myCal = altcal
                        else:
                            myCal = calibrator
                    else:
                        myCal = calibrator

                if obs_count == 0:
                    AutoPeakFocus(myCal)
                    #Break("Check Peak and Focus")
                else:
                    AutoPeak(myCal)
                Configure(config_1)
                doBalance = True
                doPointing = False

            if doCal:
                Slew(myCal)
                Balance()
                print 'Calibration scans (OnOff) :%s ' %(myCal)
                OnOff(myCal,myOff,120.0)
                doCal = False
                doBalance = True

            for i in range(obs_left):
                t_now = Now()   #check time ok again
                t_ok = False
                if t_now != None and keyhole_set != None:
                    if source_rise != None:
                        if source_set != None:
                            t_ok = ((t_now + tdelta) < source_set)
                            t_ok = t_ok and (t_now >= source_rise)
                            if keyhole_rise != None:
                                t_ok = t_ok and ((t_now+tdelta) < keyhole_rise)
                        else:
                            t_ok = True
                    else:
                        t_ok = False
                else:
                    t_ok = False

                if t_ok:
                    if peak_near_source and newPeak:
                        Slew(source)
                        AutoPeak()
                        Configure(config_1)
                        newPeak = False
                        doBalance = True
                    if doBalance:
                        Slew(source)
                        Balance()
                        doBalance = False

                    Comment("Starting on-source scan")
                    Track(source,None,scanTime)
                    Comment("Starting off-source scan")
                    Track(source,None,scanTime,fixedOffset=myOff)
                    Comment("Starting on-source scan")
                    Track(source,None,scanTime)
                    obs_count = obs_count + 1
                    obs_tot = obs_per_source+1-obs_left+i
                    print '%s: OBS COMPLETE = %s/%s' %(source,obs_tot,obs_per_source)
                    update_my_catalogs(source,obs_tot)

                    if obs_count % peak_every == 0:  #Cal/pointing interval
                        doCal = True
                        doPointing = True
        if source_ok and mycat == fullcat:
            break
    project_obs = project_obs+1

#######################################################
 LOG SESSION NUMBER 4 
[08:51:46] ******** Begin Scheduling Block
[08:51:46] ******** observer = OPERATOR, SB name = 15B287_operator, project ID = AGBT15B_287, date = 10 Jan 2016

[08:51:46] Configuring telescope.
[08:51:46]     Setting State: Activating
[08:51:48]     Setting State: Ready
[08:51:49]     Setting State: Activating
[08:51:50]     Setting State: Ready
[08:51:50] Default values are
[08:51:50] if3freq  =  [0, 0, 0]
[08:51:50] notchfilter  =  In
[08:51:50] polswitch  =  thru
[08:51:50] The bad devices are: 
[08:51:50] OpticalDriver5
[08:51:50] The bad devices are: 
[08:51:50] OpticalDriver5
[08:51:50] Waiting for the Rcvr1_2 to finish activating
[08:51:50] . .
[08:51:50] Checking telescope
[08:51:50] Configuration Complete
[08:51:50] INFO: Selecting Catalog
[08:51:50] INFO: Using Catalog for LST 9-13
[08:51:50] INFO: Selecting Catalog
[08:51:50] INFO: Using Catalog for LST 9-13
[08:51:50] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[08:51:51] Calibrator 3C48 is too low: Using 3C309_1
[08:51:51] Configuring telescope.
[08:51:52]     Setting State: Activating
[08:51:53]     Setting State: Ready
[08:51:53]     Setting State: Activating
[08:51:54]     Setting State: Ready
[08:51:54] Default values are
[08:51:54] if3freq  =  [0]
[08:51:54] notchfilter  =  In
[08:51:54] polswitch  =  thru
[08:51:54] The bad devices are: 
[08:51:54] OpticalDriver5

[08:51:54] Checking telescope
[08:51:54] Configuration Complete
[08:51:54] source : 3C309_1
               F1 : 1.4
               F2 : 32.0
               S22235 : 1.0
               S1400 : 7.5
               angsize : 1.5
               location : J2000 @ (14:59:07.58, 71:40:19.87)
[08:51:54] Slewing to source.
[08:51:54] In state Ready, waiting for state Activating
     Setting State: Activating
[08:51:54] Detected state Activating
[08:51:54] In state Activating, waiting for state Ready
[08:52:08]     Setting State: Ready
[08:52:08] Detected state Ready
[08:52:08] Balancing IF system.
[08:52:08] Balancing IFRack
[08:52:08]     Setting State: Activating
[08:52:08]     Setting State: Ready
[08:52:10] the sampler values are:
[08:52:10] RF_power 1 : 0.9814453
[08:52:10] RF_power 2 : 0
[08:52:10] RF_power 3 : 1.05957
[08:52:10] RF_power 4 : 0.01464844
[08:52:10] RF_power 5 : 0.0390625
[08:52:10] RF_power 6 : 2.983398
[08:52:10] RF_power 7 : 0.4736328
[08:52:10] RF_power 8 : 0.02929688
[08:52:10] source : 3C309_1
               F1 : 1.4
               F2 : 32.0
               S22235 : 1.0
               S1400 : 7.5
               angsize : 1.5
               location : J2000 @ (14:59:07.58, 71:40:19.87)
[08:52:10] Peak: Subscan 1 of 4
[08:52:11] In state Ready, waiting for state Running
[08:52:11]     Setting State: Activating
[08:52:33]     Setting State: Committed
[08:52:35]     Setting State: Running
[08:52:35] Detected state Running
[08:52:35] *** Notice: This subscan will be numbered as scan #22 in your data reduction package.
[08:52:35] In state Running, waiting for state Ready
[08:53:05]     Setting State: Stopping
[08:53:11]     Setting State: Ready
[08:53:11] Detected state Ready
[08:53:11] Ygor Telescope: WaitForStopping
[08:53:11] Peak: Subscan 2 of 4
[08:53:11] In state Ready, waiting for state Running
[08:53:11]     Setting State: Activating
[08:53:19]     Setting State: Committed
[08:53:21]     Setting State: Running
[08:53:21] Detected state Running
[08:53:21] *** Notice: This subscan will be numbered as scan #23 in your data reduction package.
[08:53:21] In state Running, waiting for state Ready
[08:53:51]     Setting State: Stopping
[08:53:57]     Setting State: Ready
[08:53:57] Detected state Ready
[08:53:57] Ygor Telescope: WaitForStopping
[08:53:58] . *** Updating antenna's pointing to az2=0.0249 and el=0.2756 arcmins

[08:53:58] Peak: Subscan 3 of 4
[08:53:59] In state Ready, waiting for state Running
[08:53:59]     Setting State: Activating
[08:54:18]     Setting State: Committed
[08:54:20]     Setting State: Running
[08:54:20] Detected state Running
[08:54:20] *** Notice: This subscan will be numbered as scan #24 in your data reduction package.
[08:54:20] In state Running, waiting for state Ready
[08:54:50]     Setting State: Stopping
[08:54:55]     Setting State: Ready
[08:54:55] Detected state Ready
[08:54:55] Ygor Telescope: WaitForStopping
[08:54:55] Peak: Subscan 4 of 4
[08:54:55] In state Ready, waiting for state Running
[08:54:55]     Setting State: Activating
[08:55:03]     Setting State: Committed
[08:55:05]     Setting State: Running
[08:55:05] Detected state Running
[08:55:05] *** Notice: This subscan will be numbered as scan #25 in your data reduction package.
[08:55:05] In state Running, waiting for state Ready
[08:55:35]     Setting State: Stopping
[08:55:39]     Setting State: Ready
[08:55:39] Detected state Ready
[08:55:39] Ygor Telescope: WaitForStopping
[08:55:40] *** Updating antenna's pointing to az2=0.0249 and el=0.2363 arcmins

[08:55:40] source : 3C309_1
               F1 : 1.4
               F2 : 32.0
               S22235 : 1.0
               S1400 : 7.5
               angsize : 1.5
               location : J2000 @ (14:59:07.58, 71:40:19.87)
[08:55:40] Focus: Subscan 1 of 1
[08:55:41] In state Ready, waiting for state Running
[08:55:41]     Setting State: Activating
[08:56:07]     Setting State: Committed
[08:56:09]     Setting State: Running
[08:56:09] Detected state Running
[08:56:09] *** Notice: This subscan will be numbered as scan #26 in your data reduction package.
[08:56:09] In state Running, waiting for state Ready
[08:57:09]     Setting State: Stopping
[08:57:11]     Setting State: Ready
[08:57:11] Detected state Ready
[08:57:11] Ygor Telescope: WaitForStopping
[08:57:12] *** Updating antenna's focus to -25.50 mm

[08:57:12] Configuring telescope.
[08:57:13]     Setting State: Activating
[08:57:14]     Setting State: Ready
[08:57:14]     Setting State: Activating
[08:57:15]     Setting State: Ready
[08:57:15] Default values are
[08:57:15] if3freq  =  [0, 0, 0]
[08:57:15] notchfilter  =  In
[08:57:15] polswitch  =  thru
[08:57:15] The bad devices are: 
[08:57:15] OpticalDriver5
[08:57:15] The bad devices are: 
[08:57:15] OpticalDriver5

[08:57:15] Checking telescope
[08:57:15] Configuration Complete
[08:57:15] source : 3C309_1
               F1 : 1.4
               F2 : 32.0
               S22235 : 1.0
               S1400 : 7.5
               angsize : 1.5
               location : J2000 @ (14:59:07.58, 71:40:19.87)
[08:57:15] Slewing to source.
[08:57:15] In state Ready, waiting for state Activating
[08:57:15]     Setting State: Activating
[08:57:15] Detected state Activating
[08:57:15] In state Activating, waiting for state Ready
[08:57:42]     Setting State: Ready
[08:57:42] Detected state Ready
[08:57:42] Balancing IF system.
[08:57:43] Balancing IFRack
[08:57:43]     Setting State: Activating
[08:57:43]     Setting State: Ready
[08:57:45] the sampler values are:
[08:57:45] RF_power 1 : 3.037109
[08:57:45] RF_power 2 : 0.004882812
[08:57:45] RF_power 3 : 2.866211
[08:57:45] RF_power 4 : 0.01464844
[08:57:45] RF_power 5 : 0.03417969
[08:57:45] RF_power 6 : 2.827148
[08:57:45] RF_power 7 : 2.983398
[08:57:45] RF_power 8 : 0.02441406
[08:57:45] Balancing VEGAS
[08:57:45]     Setting State: Activating
[08:57:45]     Setting State: Ready
[08:57:46]     Setting State: Activating
[08:57:46]     Setting State: Ready
[08:57:47] Calibration scans (OnOff) :3C309_1 
[08:57:47] source : 3C309_1
               F1 : 1.4
               F2 : 32.0
               S22235 : 1.0
               S1400 : 7.5
               angsize : 1.5
               location : J2000 @ (14:59:07.58, 71:40:19.87)
[08:57:47] OnOff: Subscan 1 of 2
[08:57:47] In state Ready, waiting for state Running
[08:57:47]     Setting State: Activating
[08:57:52]     Setting State: Committed
[08:57:54]     Setting State: Running
[08:57:54] Detected state Running
[08:57:54] *** Notice: This subscan will be numbered as scan #27 in your data reduction package.
[08:57:54] In state Running, waiting for state Ready
[08:59:54]     Setting State: Stopping
[08:59:56]     Setting State: Ready
[08:59:56] Detected state Ready
[08:59:56] Ygor Telescope: WaitForStopping
[08:59:56] OnOff: Subscan 2 of 2
[08:59:56] In state Ready, waiting for state Running
[08:59:56]     Setting State: Activating
[09:00:10]     Setting State: Committed
[09:00:12]     Setting State: Running
[09:00:12] Detected state Running
[09:00:12] *** Notice: This subscan will be numbered as scan #28 in your data reduction package.
[09:00:12] In state Running, waiting for state Ready
[09:02:12]     Setting State: Stopping
[09:02:14]     Setting State: Ready
[09:02:14] Detected state Ready
[09:02:14] Ygor Telescope: WaitForStopping
[09:02:14] INFO: Selecting Catalog
[09:02:14] INFO: Using Catalog for LST 9-13
[09:02:14] INFO: Selecting Catalog
[09:02:14] INFO: Using Catalog for LST 9-13
[09:02:14] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:02:14] INFO: Selecting Catalog
[09:02:14] INFO: Using Catalog for LST 9-13
[09:02:14] INFO: Selecting Catalog
[09:02:14] INFO: Using Catalog for LST 9-13
[09:02:14] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:02:14] INFO: Selecting Catalog
[09:02:14] INFO: Using Catalog for LST 9-13
[09:02:14] INFO: Selecting Catalog
[09:02:14] INFO: Using Catalog for LST 9-13
[09:02:14] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:02:14] INFO: Selecting Catalog
[09:02:14] INFO: Using Catalog for LST 9-13
[09:02:14] INFO: Selecting Catalog
[09:02:14] INFO: Using Catalog for LST 9-13
[09:02:14] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:02:14] INFO: Selecting Catalog
[09:02:14] INFO: Using Catalog for LST 9-13
[09:02:14] INFO: Selecting Catalog
[09:02:14] INFO: Using Catalog for LST 9-13
[09:02:14] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:02:14] INFO: Selecting Catalog
[09:02:14] INFO: Using Catalog for LST 9-13
[09:02:14] INFO: Selecting Catalog
[09:02:14] INFO: Using Catalog for LST 9-13
[09:02:14] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:02:14] INFO: Selecting Catalog
[09:02:14] INFO: Using Catalog for LST 9-13
[09:02:14] INFO: Selecting Catalog
[09:02:14] INFO: Using Catalog for LST 9-13
[09:02:14] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:02:14] INFO: Selecting Catalog
[09:02:14] INFO: Using Catalog for LST 9-13
[09:02:14] INFO: Selecting Catalog
[09:02:14] INFO: Using Catalog for LST 9-13
[09:02:14] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:02:14] INFO: Selecting Catalog
[09:02:14] INFO: Using Catalog for LST 9-13
[09:02:14] INFO: Selecting Catalog
[09:02:14] INFO: Using Catalog for LST 9-13
[09:02:14] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:02:14] INFO: Selecting Catalog
[09:02:14] INFO: Using Catalog for LST 9-13
[09:02:14] INFO: Selecting Catalog
[09:02:14] INFO: Using Catalog for LST 9-13
[09:02:14] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:02:14] INFO: Selecting Catalog
[09:02:14] INFO: Using Catalog for LST 9-13
[09:02:14] INFO: Selecting Catalog
[09:02:14] INFO: Using Catalog for LST 9-13
[09:02:14] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:02:14] INFO: Selecting Catalog
[09:02:14] INFO: Using Catalog for LST 9-13
[09:02:14] INFO: Selecting Catalog
[09:02:14] INFO: Using Catalog for LST 9-13
[09:02:14] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:02:14] INFO: Selecting Catalog
[09:02:14] INFO: Using Catalog for LST 9-13
[09:02:14] INFO: Selecting Catalog
[09:02:14] INFO: Using Catalog for LST 9-13
[09:02:14] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:02:14] INFO: Selecting Catalog
[09:02:14] INFO: Using Catalog for LST 9-13
[09:02:14] INFO: Selecting Catalog
[09:02:14] INFO: Using Catalog for LST 9-13
[09:02:14] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:02:14] INFO: Selecting Catalog
[09:02:14] INFO: Using Catalog for LST 9-13
[09:02:14] INFO: Selecting Catalog
[09:02:14] INFO: Using Catalog for LST 9-13
[09:02:14] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:02:15] INFO: Selecting Catalog
[09:02:15] INFO: Using Catalog for LST 9-13
[09:02:15] INFO: Selecting Catalog
[09:02:15] INFO: Using Catalog for LST 9-13
[09:02:15] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:02:15] INFO: Selecting Catalog
[09:02:15] INFO: Using Catalog for LST 9-13
[09:02:15] INFO: Selecting Catalog
[09:02:15] INFO: Using Catalog for LST 9-13
[09:02:15] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:02:15] INFO: Selecting Catalog
[09:02:15] INFO: Using Catalog for LST 9-13
[09:02:15] INFO: Selecting Catalog
[09:02:15] INFO: Using Catalog for LST 9-13
[09:02:15] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:02:15] INFO: Selecting Catalog
[09:02:15] INFO: Using Catalog for LST 9-13
[09:02:15] INFO: Selecting Catalog
[09:02:15] INFO: Using Catalog for LST 9-13
[09:02:15] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:02:15] INFO: Selecting Catalog
[09:02:15] INFO: Using Catalog for LST 9-13
[09:02:15] INFO: Selecting Catalog
[09:02:15] INFO: Using Catalog for LST 9-13
[09:02:15] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:02:15] INFO: Selecting Catalog
[09:02:15] INFO: Using Catalog for LST 9-13
[09:02:15] INFO: Selecting Catalog
[09:02:15] INFO: Using Catalog for LST 9-13
[09:02:15] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:02:15] INFO: Selecting Catalog
[09:02:15] INFO: Using Catalog for LST 9-13
[09:02:15] INFO: Selecting Catalog
[09:02:15] INFO: Using Catalog for LST 9-13
[09:02:15] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:02:15] INFO: Selecting Catalog
[09:02:15] INFO: Using Catalog for LST 9-13
[09:02:15] INFO: Selecting Catalog
[09:02:15] INFO: Using Catalog for LST 9-13
[09:02:15] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:02:15] INFO: Selecting Catalog
[09:02:15] INFO: Using Catalog for LST 9-13
[09:02:15] INFO: Selecting Catalog
[09:02:15] INFO: Using Catalog for LST 9-13
[09:02:15] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:02:15] INFO: Selecting Catalog
[09:02:15] INFO: Using Catalog for LST 9-13
[09:02:15] INFO: Selecting Catalog
[09:02:15] INFO: Using Catalog for LST 9-13
[09:02:15] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:02:15] INFO: Selecting Catalog
[09:02:15] INFO: Using Catalog for LST 9-13
[09:02:15] INFO: Selecting Catalog
[09:02:15] INFO: Using Catalog for LST 9-13
[09:02:15] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:02:15] INFO: Selecting Catalog
[09:02:15] INFO: Using Catalog for LST 9-13
[09:02:15] INFO: Selecting Catalog
[09:02:15] INFO: Using Catalog for LST 9-13
[09:02:15] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:02:15] INFO: Selecting Catalog
[09:02:15] INFO: Using Catalog for LST 9-13
[09:02:15] INFO: Selecting Catalog
[09:02:15] INFO: Using Catalog for LST 9-13
[09:02:15] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:02:15] INFO: Selecting Catalog
[09:02:15] INFO: Using Catalog for LST 9-13
[09:02:15] INFO: Selecting Catalog
[09:02:15] INFO: Using Catalog for LST 9-13
[09:02:15] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:02:15] INFO: Selecting Catalog
[09:02:15] INFO: Using Catalog for LST 9-13
[09:02:15] INFO: Selecting Catalog
[09:02:15] INFO: Using Catalog for LST 9-13
[09:02:15] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:02:15] INFO: Selecting Catalog
[09:02:15] INFO: Using Catalog for LST 9-13
[09:02:15] INFO: Selecting Catalog
[09:02:15] INFO: Using Catalog for LST 9-13
[09:02:15] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:02:16] INFO: Selecting Catalog
[09:02:16] INFO: Using Catalog for LST 9-13
[09:02:16] INFO: Selecting Catalog
[09:02:16] INFO: Using Catalog for LST 9-13
[09:02:16] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:02:16] INFO: Selecting Catalog
[09:02:16] INFO: Using Catalog for LST 9-13
[09:02:16] INFO: Selecting Catalog
[09:02:16] INFO: Using Catalog for LST 9-13
[09:02:16] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:02:16] INFO: Selecting Catalog
[09:02:16] INFO: Using Catalog for LST 9-13
[09:02:16] INFO: Selecting Catalog
[09:02:16] INFO: Using Catalog for LST 9-13
[09:02:16] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:02:16] INFO: Selecting Catalog
[09:02:16] INFO: Using Catalog for LST 9-13
[09:02:16] INFO: Selecting Catalog
[09:02:16] INFO: Using Catalog for LST 9-13
[09:02:16] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:02:16] INFO: Selecting Catalog
[09:02:16] INFO: Using Catalog for LST 9-13
[09:02:16] INFO: Selecting Catalog
[09:02:16] INFO: Using Catalog for LST 9-13
[09:02:16] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:02:16] INFO: Selecting Catalog
[09:02:16] INFO: Using Catalog for LST 9-13
[09:02:16] INFO: Selecting Catalog
[09:02:16] INFO: Using Catalog for LST 9-13
[09:02:16] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:02:16] INFO: Selecting Catalog
[09:02:16] INFO: Using Catalog for LST 9-13
[09:02:16] INFO: Selecting Catalog
[09:02:16] INFO: Using Catalog for LST 9-13
[09:02:16] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:02:16] INFO: Selecting Catalog
[09:02:16] INFO: Using Catalog for LST 9-13
[09:02:16] INFO: Selecting Catalog
[09:02:16] INFO: Using Catalog for LST 9-13
[09:02:16] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:02:16] INFO: Selecting Catalog
[09:02:16] INFO: Using Catalog for LST 9-13
[09:02:16] INFO: Selecting Catalog
[09:02:16] INFO: Using Catalog for LST 9-13
[09:02:16] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:02:16] INFO: Selecting Catalog
[09:02:16] INFO: Using Catalog for LST 9-13
[09:02:16] INFO: Selecting Catalog
[09:02:16] INFO: Using Catalog for LST 9-13
[09:02:16] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:02:16] INFO: Selecting Catalog
[09:02:16] INFO: Using Catalog for LST 9-13
[09:02:16] INFO: Selecting Catalog
[09:02:16] INFO: Using Catalog for LST 9-13
[09:02:16] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:02:16] INFO: Selecting Catalog
[09:02:16] INFO: Using Catalog for LST 9-13
[09:02:16] INFO: Selecting Catalog
[09:02:16] INFO: Using Catalog for LST 9-13
[09:02:16] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:02:16] INFO: Selecting Catalog
[09:02:16] INFO: Using Catalog for LST 9-13
[09:02:16] INFO: Selecting Catalog
[09:02:16] INFO: Using Catalog for LST 9-13
[09:02:16] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:02:16] INFO: Selecting Catalog
[09:02:16] INFO: Using Catalog for LST 9-13
[09:02:16] INFO: Selecting Catalog
[09:02:16] INFO: Using Catalog for LST 9-13
[09:02:16] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:02:16] INFO: Selecting Catalog
[09:02:16] INFO: Using Catalog for LST 9-13
[09:02:16] INFO: Selecting Catalog
[09:02:16] INFO: Using Catalog for LST 9-13
[09:02:16] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:02:17] INFO: Selecting Catalog
[09:02:17] INFO: Using Catalog for LST 9-13
[09:02:17] INFO: Selecting Catalog
[09:02:17] INFO: Using Catalog for LST 9-13
[09:02:17] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:02:17] INFO: Selecting Catalog
[09:02:17] INFO: Using Catalog for LST 9-13
[09:02:17] INFO: Selecting Catalog
[09:02:17] INFO: Using Catalog for LST 9-13
[09:02:17] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:02:17] INFO: Selecting Catalog
[09:02:17] INFO: Using Catalog for LST 9-13
[09:02:17] INFO: Selecting Catalog
[09:02:17] INFO: Using Catalog for LST 9-13
[09:02:17] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
runSuccessful: True
[09:02:17] ******** End Scheduling Block
[09:02:17] ******** observer = OPERATOR, SB name = 15B287_operator, project ID = AGBT15B_287

how much log? 19621 id: 179190self.history: <gbt.turtle.database.History.History instance at 0x4956b00>self.history.connection: <gbt.turtle.database.TurtleConnection.TurtleConnection instance at 0x4956878>how much converted log? 19829 
#######################################################
 
 
#######################################################
 SCRIPT NUMBER 5, project:AGBT15B_287_40 
 179191 128 OPERATOR 10 Amber Bonsall 2016-01-10 09:02:19 obs_completed 
#######################################################
# test script to update catalog as you go...

########## CHANGE THESE ONLY #############
OnOffOnTime = 10 #minutes (change this to 12 to be in line with DSS scheduling)
obs_per_source = 3 #total observing time per source = OnOffOnTime * obs_per_source
h = Horizon(10.0) #minimum of 10 degrees elevation
h_up = Horizon(85.0) #maximum of 85 degrees due to keyhole
myOff = Offset("J2000",1.0,0.0,cosv=True)  # Off position relative to source
doFirstPointing = True #Setting to False will skip the first pointing
doFirstCal = True  #Setting to False will skip the first 3C calibrator OnOff scan
peak_every = 12 #peak/cal every 12 OnOffOn (every 2.5 hours)
peak_near_source = False #Do another peak when changing to new source
#####################################

######### NOTES ###############
# This script runs in blocks of On-Off-On position switching with
# the two outer 'on' scans sharing one 'off'
# Total on-source time = 20 minutes
# Length of one 'On' or 'Off' = 3 minutes 20 seconds
# Length of one On-Off-On = 10 minutes
# 3 On-Off-On blocks are needed per source (30 minutes total per source)

###### Timing
# It takes 34m to completely observe 1 source+overhead (9 track scans)

execfile("/home/astro-util/projects/15B287_operator/15B287_config.py")
execfile("/home/astro-util/projects/15B287_operator/15B287_utils.py")
Catalog(fluxcal)
Catalog(lband_pointing)

scanTime = OnOffOnTime * 20.0 #seconds
tdelta = DateTime.TimeDelta(minutes=OnOffOnTime)
obs_count = 0
doCal = doFirstCal
doPointing = doFirstPointing
project_obs = 0
old_catalog_name = 'dummy'
fullcat = '/home/astro-util/projects/15B287_operator/15B287_operator.cat'

Configure(config_1)

while project_obs < 100:
    mycat,altcal = select_my_catalog()
    if mycat == old_catalog_name:
        print 'SAME CATALOG HAS BEEN SELECTED: Using FULL catalog'
        mycat = fullcat
        altcal = '3C309_1'
    old_catalog_name = mycat
    c = Catalog(mycat)
    sources = c.keys()
    for source in sources:
        doBalance = True
        newPeak = True
        calibrator = c[source]["calibrator"]
        n_obs = int(float(c[source]["n_obs"]))
        obs_left = obs_per_source-n_obs
        obs_ok = obs_left > 0
        t_now = Now()
        if t_now != None and obs_ok:
            source_rise = h.GetRise(source)
            source_set  = h.GetSet(source)
            keyhole_rise = h_up.GetRise(source)
            keyhole_set = h_up.GetSet(source)
            if source_rise != None or keyhole_set != None:
                if source_set != None and keyhole_rise != None:
                    t_ok = ((t_now + tdelta) < source_set)
                    t_ok = t_ok and (t_now >= source_rise)
                    t_ok = t_ok and ((t_now + tdelta) < keyhole_rise)
                else:
                    t_ok = True
            else:
                t_ok = False
        else:
            t_ok = False

        source_ok = t_ok and obs_ok

        if source_ok:
            if doPointing == True:
                #check the calibrator is above the horizon
                keyhole_cal_rise = h_up.GetRise(calibrator)
                keyhole_cal_set = h_up.GetSet(calibrator)
                cal_rise = h.GetRise(calibrator)
                if cal_rise>t_now or keyhole_cal_set == None:
                    myCal = altcal #low circumpolar alternative
                    print 'Calibrator %s is too low: Using %s' %(calibrator,altcal)
                else:
                    if keyhole_cal_rise != None:
                        if (t_now+tdelta) >= keyhole_cal_rise:
                            print 'Calibrator %s is in keyhole: Using %s' %(calibrator,altcal)
                            myCal = altcal
                        else:
                            myCal = calibrator
                    else:
                        myCal = calibrator

                if obs_count == 0:
                    AutoPeakFocus(myCal)
                    #Break("Check Peak and Focus")
                else:
                    AutoPeak(myCal)
                Configure(config_1)
                doBalance = True
                doPointing = False

            if doCal:
                Slew(myCal)
                Balance()
                print 'Calibration scans (OnOff) :%s ' %(myCal)
                OnOff(myCal,myOff,120.0)
                doCal = False
                doBalance = True

            for i in range(obs_left):
                t_now = Now()   #check time ok again
                t_ok = False
                if t_now != None and keyhole_set != None:
                    if source_rise != None:
                        if source_set != None:
                            t_ok = ((t_now + tdelta) < source_set)
                            t_ok = t_ok and (t_now >= source_rise)
                            if keyhole_rise != None:
                                t_ok = t_ok and ((t_now+tdelta) < keyhole_rise)
                        else:
                            t_ok = True
                    else:
                        t_ok = False
                else:
                    t_ok = False

                if t_ok:
                    if peak_near_source and newPeak:
                        Slew(source)
                        AutoPeak()
                        Configure(config_1)
                        newPeak = False
                        doBalance = True
                    if doBalance:
                        Slew(source)
                        Balance()
                        doBalance = False

                    Comment("Starting on-source scan")
                    Track(source,None,scanTime)
                    Comment("Starting off-source scan")
                    Track(source,None,scanTime,fixedOffset=myOff)
                    Comment("Starting on-source scan")
                    Track(source,None,scanTime)
                    obs_count = obs_count + 1
                    obs_tot = obs_per_source+1-obs_left+i
                    print '%s: OBS COMPLETE = %s/%s' %(source,obs_tot,obs_per_source)
                    update_my_catalogs(source,obs_tot)

                    if obs_count % peak_every == 0:  #Cal/pointing interval
                        doCal = True
                        doPointing = True
        if source_ok and mycat == fullcat:
            break
    project_obs = project_obs+1

#######################################################
 LOG SESSION NUMBER 5 
[09:02:19] ******** Begin Scheduling Block
[09:02:19] ******** observer = OPERATOR, SB name = 15B287_operator, project ID = AGBT15B_287, date = 10 Jan 2016

[09:02:19] Configuring telescope.
[09:02:19]     Setting State: Activating
[09:02:21]     Setting State: Ready
[09:02:22]     Setting State: Activating
[09:02:23]     Setting State: Ready
[09:02:23] Default values are
[09:02:23] if3freq  =  [0, 0, 0]
[09:02:23] notchfilter  =  In
[09:02:23] polswitch  =  thru
[09:02:23] The bad devices are: 
[09:02:23] OpticalDriver5
[09:02:23] The bad devices are: 
[09:02:23] OpticalDriver5
[09:02:23] Waiting for the Rcvr1_2 to finish activating
[09:02:23] . .
[09:02:23] Checking telescope
[09:02:23] Configuration Complete
[09:02:24] INFO: Selecting Catalog
[09:02:24] INFO: Using Catalog for LST 9-13
[09:02:24] INFO: Selecting Catalog
[09:02:24] INFO: Using Catalog for LST 9-13
[09:02:24] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:02:24] Calibrator 3C48 is too low: Using 3C309_1
[09:02:24] Configuring telescope.
[09:02:25]     Setting State: Activating
[09:02:26]     Setting State: Ready
[09:02:26]     Setting State: Activating
[09:02:27]     Setting State: Ready
[09:02:27] Default values are
[09:02:27] if3freq  =  [0]
[09:02:27] notchfilter  =  In
[09:02:27] polswitch  =  thru
[09:02:27] The bad devices are: 
[09:02:27] OpticalDriver5

[09:02:27] Checking telescope
[09:02:27] Configuration Complete
[09:02:27] source : 3C309_1
               F1 : 1.4
               F2 : 32.0
               S22235 : 1.0
               S1400 : 7.5
               angsize : 1.5
               location : J2000 @ (14:59:07.58, 71:40:19.87)
[09:02:27] Slewing to source.
[09:02:27] In state Ready, waiting for state Activating
[09:02:27]     Setting State: Activating
[09:02:27] Detected state Activating
[09:02:27] In state Activating, waiting for state Ready
[09:02:41]     Setting State: Ready
[09:02:41] Detected state Ready
[09:02:41] Balancing IF system.
[09:02:41] Balancing IFRack
[09:02:41]     Setting State: Activating
[09:02:41]     Setting State: Ready
[09:02:43] the sampler values are:
[09:02:43] RF_power 1 : 1.000977
[09:02:43] RF_power 2 : 0.004882812
[09:02:43] RF_power 3 : 1.088867
[09:02:43] RF_power 4 : 0.01953125
[09:02:43] RF_power 5 : 0.03417969
[09:02:43] RF_power 6 : 2.949219
[09:02:43] RF_power 7 : 0.4833984
[09:02:43] RF_power 8 : 0.02441406
[09:02:43] source : 3C309_1
               F1 : 1.4
               F2 : 32.0
               S22235 : 1.0
               S1400 : 7.5
               angsize : 1.5
               location : J2000 @ (14:59:07.58, 71:40:19.87)
[09:02:43] Peak: Subscan 1 of 4
[09:02:43] In state Ready, waiting for state Running
[09:02:44]     Setting State: Activating
[09:03:06]     Setting State: Committed
[09:03:08]     Setting State: Running
[09:03:08] Detected state Running
[09:03:08] *** Notice: This subscan will be numbered as scan #29 in your data reduction package.
[09:03:08] In state Running, waiting for state Ready
[09:03:38]     Setting State: Stopping
[09:03:44]     Setting State: Ready
[09:03:44] Detected state Ready
[09:03:44] Ygor Telescope: WaitForStopping
[09:03:44] Peak: Subscan 2 of 4
[09:03:44] In state Ready, waiting for state Running
[09:03:44]     Setting State: Activating
[09:03:52]     Setting State: Committed
[09:03:54]     Setting State: Running
[09:03:54] Detected state Running
[09:03:54] *** Notice: This subscan will be numbered as scan #30 in your data reduction package.
[09:03:54] In state Running, waiting for state Ready
[09:04:24]     Setting State: Stopping
[09:04:30]     Setting State: Ready
[09:04:30] Detected state Ready
[09:04:30] Ygor Telescope: WaitForStopping
[09:04:30] *** Updating antenna's pointing to az2=-0.0184 and el=0.2363 arcmins

[09:04:30] Peak: Subscan 3 of 4
[09:04:31] In state Ready, waiting for state Running
[09:04:31]     Setting State: Activating
[09:04:50]     Setting State: Committed
[09:04:52]     Setting State: Running
[09:04:52] Detected state Running
[09:04:52] *** Notice: This subscan will be numbered as scan #31 in your data reduction package.
[09:04:52] In state Running, waiting for state Ready
[09:05:22]     Setting State: Stopping
[09:05:27]     Setting State: Ready
[09:05:27] Detected state Ready
[09:05:27] Ygor Telescope: WaitForStopping
[09:05:27] Peak: Subscan 4 of 4
[09:05:27] In state Ready, waiting for state Running
[09:05:27]     Setting State: Activating
[09:05:35]     Setting State: Committed
[09:05:37]     Setting State: Running
[09:05:37] Detected state Running
[09:05:37] *** Notice: This subscan will be numbered as scan #32 in your data reduction package.
[09:05:37] In state Running, waiting for state Ready
[09:06:07]     Setting State: Stopping
[09:06:11]     Setting State: Ready
[09:06:11] Detected state Ready
[09:06:11] Ygor Telescope: WaitForStopping
[09:06:12] *** Updating antenna's pointing to az2=-0.0184 and el=0.3365 arcmins

[09:06:12] source : 3C309_1
               F1 : 1.4
               F2 : 32.0
               S22235 : 1.0
               S1400 : 7.5
               angsize : 1.5
               location : J2000 @ (14:59:07.58, 71:40:19.87)
[09:06:13] Focus: Subscan 1 of 1
[09:06:13] In state Ready, waiting for state Running
[09:06:13]     Setting State: Activating
[09:06:39]     Setting State: Committed
[09:06:41]     Setting State: Running
[09:06:41] Detected state Running
[09:06:41] *** Notice: This subscan will be numbered as scan #33 in your data reduction package.
[09:06:41] In state Running, waiting for state Ready
[09:07:41]     Setting State: Stopping
[09:07:43]     Setting State: Ready
[09:07:43] Detected state Ready
[09:07:43] Ygor Telescope: WaitForStopping
[09:07:44] *** Updating antenna's focus to -26.48 mm

[09:07:44] Configuring telescope.
[09:07:44]     Setting State: Activating
[09:07:46]     Setting State: Ready
[09:07:48]     Setting State: Activating
[09:07:49]     Setting State: Ready
[09:07:49] Default values are
[09:07:49] if3freq  =  [0, 0, 0]
[09:07:49] notchfilter  =  In
[09:07:49] polswitch  =  thru
[09:07:49] The bad devices are: 
[09:07:49] OpticalDriver5
[09:07:49] The bad devices are: 
[09:07:49] OpticalDriver5
[09:07:49] Waiting for the ConverterRack to finish activating
[09:07:49] . .
[09:07:49] Checking telescope
[09:07:49] Configuration Complete
[09:07:49] source : 3C309_1
               F1 : 1.4
               F2 : 32.0
               S22235 : 1.0
               S1400 : 7.5
               angsize : 1.5
               location : J2000 @ (14:59:07.58, 71:40:19.87)
[09:07:49] Slewing to source.
[09:07:49] In state Ready, waiting for state Activating
[09:07:49]     Setting State: Activating
[09:07:49] Detected state Activating
[09:07:49] In state Activating, waiting for state Ready
[09:08:16]     Setting State: Ready
[09:08:16] Detected state Ready
[09:08:16] Balancing IF system.
[09:08:17] Balancing IFRack
[09:08:17]     Setting State: Activating
[09:08:17]     Setting State: Ready
[09:08:19] the sampler values are:
[09:08:19] RF_power 1 : 3.012695
[09:08:19] RF_power 2 : 0
[09:08:19] RF_power 3 : 3.027344
[09:08:19] RF_power 4 : 0.01464844
[09:08:19] RF_power 5 : 0.03417969
[09:08:19] RF_power 6 : 2.905273
[09:08:19] RF_power 7 : 3.134766
[09:08:19] RF_power 8 : 0.02441406
[09:08:19] Balancing VEGAS
[09:08:19]     Setting State: Activating
[09:08:19]     Setting State: Ready
[09:08:20]     Setting State: Activating
[09:08:20]     Setting State: Ready
[09:08:21] Calibration scans (OnOff) :3C309_1 
[09:08:21] source : 3C309_1
               F1 : 1.4
               F2 : 32.0
               S22235 : 1.0
               S1400 : 7.5
               angsize : 1.5
               location : J2000 @ (14:59:07.58, 71:40:19.87)
[09:08:21] OnOff: Subscan 1 of 2
[09:08:21] In state Ready, waiting for state Running
[09:08:21]     Setting State: Activating
[09:08:26]     Setting State: Committed
[09:08:28]     Setting State: Running
[09:08:28] Detected state Running
[09:08:28] *** Notice: This subscan will be numbered as scan #34 in your data reduction package.
[09:08:28] In state Running, waiting for state Ready
[09:10:28]     Setting State: Stopping
[09:10:30]     Setting State: Ready
[09:10:30] Detected state Ready
[09:10:30] Ygor Telescope: WaitForStopping
[09:10:30] OnOff: Subscan 2 of 2
[09:10:30] In state Ready, waiting for state Running
[09:10:30]     Setting State: Activating
[09:10:44]     Setting State: Committed
[09:10:46]     Setting State: Running
[09:10:46] Detected state Running
[09:10:46] *** Notice: This subscan will be numbered as scan #35 in your data reduction package.
[09:10:46] In state Running, waiting for state Ready
[09:12:46]     Setting State: Stopping
[09:12:48]     Setting State: Ready
[09:12:48] Detected state Ready
[09:12:48] Ygor Telescope: WaitForStopping
[09:12:48] INFO: Selecting Catalog
[09:12:48] INFO: Using Catalog for LST 9-13
[09:12:48] INFO: Selecting Catalog
[09:12:48] INFO: Using Catalog for LST 9-13
[09:12:48] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:12:48] INFO: Selecting Catalog
[09:12:48] INFO: Using Catalog for LST 9-13
[09:12:48] INFO: Selecting Catalog
[09:12:48] INFO: Using Catalog for LST 9-13
[09:12:48] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:12:48] INFO: Selecting Catalog
[09:12:48] INFO: Using Catalog for LST 9-13
[09:12:48] INFO: Selecting Catalog
[09:12:48] INFO: Using Catalog for LST 9-13
[09:12:48] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:12:48] INFO: Selecting Catalog
[09:12:48] INFO: Using Catalog for LST 9-13
[09:12:48] INFO: Selecting Catalog
[09:12:48] INFO: Using Catalog for LST 9-13
[09:12:48] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:12:48] INFO: Selecting Catalog
[09:12:48] INFO: Using Catalog for LST 9-13
[09:12:48] INFO: Selecting Catalog
[09:12:48] INFO: Using Catalog for LST 9-13
[09:12:48] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:12:48] INFO: Selecting Catalog
[09:12:48] INFO: Using Catalog for LST 9-13
[09:12:48] INFO: Selecting Catalog
[09:12:48] INFO: Using Catalog for LST 9-13
[09:12:48] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:12:48] INFO: Selecting Catalog
[09:12:48] INFO: Using Catalog for LST 9-13
[09:12:48] INFO: Selecting Catalog
[09:12:48] INFO: Using Catalog for LST 9-13
[09:12:48] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:12:48] INFO: Selecting Catalog
[09:12:48] INFO: Using Catalog for LST 9-13
[09:12:48] INFO: Selecting Catalog
[09:12:48] INFO: Using Catalog for LST 9-13
[09:12:48] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:12:48] INFO: Selecting Catalog
[09:12:48] INFO: Using Catalog for LST 9-13
[09:12:48] INFO: Selecting Catalog
[09:12:48] INFO: Using Catalog for LST 9-13
[09:12:48] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:12:48] INFO: Selecting Catalog
[09:12:48] INFO: Using Catalog for LST 9-13
[09:12:48] INFO: Selecting Catalog
[09:12:48] INFO: Using Catalog for LST 9-13
[09:12:48] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:12:48] INFO: Selecting Catalog
[09:12:48] INFO: Using Catalog for LST 9-13
[09:12:48] INFO: Selecting Catalog
[09:12:48] INFO: Using Catalog for LST 9-13
[09:12:48] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:12:48] INFO: Selecting Catalog
[09:12:48] INFO: Using Catalog for LST 9-13
[09:12:48] INFO: Selecting Catalog
[09:12:48] INFO: Using Catalog for LST 9-13
[09:12:48] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:12:48] INFO: Selecting Catalog
[09:12:48] INFO: Using Catalog for LST 9-13
[09:12:48] INFO: Selecting Catalog
[09:12:48] INFO: Using Catalog for LST 9-13
[09:12:48] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:12:48] INFO: Selecting Catalog
[09:12:48] INFO: Using Catalog for LST 9-13
[09:12:48] INFO: Selecting Catalog
[09:12:48] INFO: Using Catalog for LST 9-13
[09:12:48] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:12:48] INFO: Selecting Catalog
[09:12:48] INFO: Using Catalog for LST 9-13
[09:12:48] INFO: Selecting Catalog
[09:12:48] INFO: Using Catalog for LST 9-13
[09:12:48] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:12:49] INFO: Selecting Catalog
[09:12:49] INFO: Using Catalog for LST 9-13
[09:12:49] INFO: Selecting Catalog
[09:12:49] INFO: Using Catalog for LST 9-13
[09:12:49] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:12:49] INFO: Selecting Catalog
[09:12:49] INFO: Using Catalog for LST 9-13
[09:12:49] INFO: Selecting Catalog
[09:12:49] INFO: Using Catalog for LST 9-13
[09:12:49] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:12:49] INFO: Selecting Catalog
[09:12:49] INFO: Using Catalog for LST 9-13
[09:12:49] INFO: Selecting Catalog
[09:12:49] INFO: Using Catalog for LST 9-13
[09:12:49] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:12:49] INFO: Selecting Catalog
[09:12:49] INFO: Using Catalog for LST 9-13
[09:12:49] INFO: Selecting Catalog
[09:12:49] INFO: Using Catalog for LST 9-13
[09:12:49] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:12:49] INFO: Selecting Catalog
[09:12:49] INFO: Using Catalog for LST 9-13
[09:12:49] INFO: Selecting Catalog
[09:12:49] INFO: Using Catalog for LST 9-13
[09:12:49] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:12:49] INFO: Selecting Catalog
[09:12:49] INFO: Using Catalog for LST 9-13
[09:12:49] INFO: Selecting Catalog
[09:12:49] INFO: Using Catalog for LST 9-13
[09:12:49] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:12:49] INFO: Selecting Catalog
[09:12:49] INFO: Using Catalog for LST 9-13
[09:12:49] INFO: Selecting Catalog
[09:12:49] INFO: Using Catalog for LST 9-13
[09:12:49] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:12:49] INFO: Selecting Catalog
[09:12:49] INFO: Using Catalog for LST 9-13
[09:12:49] INFO: Selecting Catalog
[09:12:49] INFO: Using Catalog for LST 9-13
[09:12:49] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:12:49] INFO: Selecting Catalog
[09:12:49] INFO: Using Catalog for LST 9-13
[09:12:49] INFO: Selecting Catalog
[09:12:49] INFO: Using Catalog for LST 9-13
[09:12:49] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:12:49] INFO: Selecting Catalog
[09:12:49] INFO: Using Catalog for LST 9-13
[09:12:49] INFO: Selecting Catalog
[09:12:49] INFO: Using Catalog for LST 9-13
[09:12:49] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:12:49] INFO: Selecting Catalog
[09:12:49] INFO: Using Catalog for LST 9-13
[09:12:49] INFO: Selecting Catalog
[09:12:49] INFO: Using Catalog for LST 9-13
[09:12:49] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:12:49] INFO: Selecting Catalog
[09:12:49] INFO: Using Catalog for LST 9-13
[09:12:49] INFO: Selecting Catalog
[09:12:49] INFO: Using Catalog for LST 9-13
[09:12:49] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:12:49] INFO: Selecting Catalog
[09:12:49] INFO: Using Catalog for LST 9-13
[09:12:49] INFO: Selecting Catalog
[09:12:49] INFO: Using Catalog for LST 9-13
[09:12:49] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:12:49] INFO: Selecting Catalog
[09:12:49] INFO: Using Catalog for LST 9-13
[09:12:49] INFO: Selecting Catalog
[09:12:49] INFO: Using Catalog for LST 9-13
[09:12:49] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:12:49] INFO: Selecting Catalog
[09:12:49] INFO: Using Catalog for LST 9-13
[09:12:49] INFO: Selecting Catalog
[09:12:49] INFO: Using Catalog for LST 9-13
[09:12:49] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:12:49] INFO: Selecting Catalog
[09:12:49] INFO: Using Catalog for LST 9-13
[09:12:49] INFO: Selecting Catalog
[09:12:49] INFO: Using Catalog for LST 9-13
[09:12:49] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:12:49] INFO: Selecting Catalog
[09:12:50] INFO: Using Catalog for LST 9-13
[09:12:50] INFO: Selecting Catalog
[09:12:50] INFO: Using Catalog for LST 9-13
[09:12:50] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:12:50] INFO: Selecting Catalog
[09:12:50] INFO: Using Catalog for LST 9-13
[09:12:50] INFO: Selecting Catalog
[09:12:50] INFO: Using Catalog for LST 9-13
[09:12:50] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:12:50] INFO: Selecting Catalog
[09:12:50] INFO: Using Catalog for LST 9-13
[09:12:50] INFO: Selecting Catalog
[09:12:50] INFO: Using Catalog for LST 9-13
[09:12:50] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:12:50] INFO: Selecting Catalog
[09:12:50] INFO: Using Catalog for LST 9-13
[09:12:50] INFO: Selecting Catalog
[09:12:50] INFO: Using Catalog for LST 9-13
[09:12:50] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:12:50] INFO: Selecting Catalog
[09:12:50] INFO: Using Catalog for LST 9-13
[09:12:50] INFO: Selecting Catalog
[09:12:50] INFO: Using Catalog for LST 9-13
[09:12:50] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:12:50] INFO: Selecting Catalog
[09:12:50] INFO: Using Catalog for LST 9-13
[09:12:50] INFO: Selecting Catalog
[09:12:50] INFO: Using Catalog for LST 9-13
[09:12:50] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:12:50] INFO: Selecting Catalog
[09:12:50] INFO: Using Catalog for LST 9-13
[09:12:50] INFO: Selecting Catalog
[09:12:50] INFO: Using Catalog for LST 9-13
[09:12:50] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:12:50] INFO: Selecting Catalog
[09:12:50] INFO: Using Catalog for LST 9-13
[09:12:50] INFO: Selecting Catalog
[09:12:50] INFO: Using Catalog for LST 9-13
[09:12:50] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:12:50] INFO: Selecting Catalog
[09:12:50] INFO: Using Catalog for LST 9-13
[09:12:50] INFO: Selecting Catalog
[09:12:50] INFO: Using Catalog for LST 9-13
[09:12:50] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:12:50] INFO: Selecting Catalog
[09:12:50] INFO: Using Catalog for LST 9-13
[09:12:50] INFO: Selecting Catalog
[09:12:50] INFO: Using Catalog for LST 9-13
[09:12:50] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:12:50] INFO: Selecting Catalog
[09:12:50] INFO: Using Catalog for LST 9-13
[09:12:50] INFO: Selecting Catalog
[09:12:50] INFO: Using Catalog for LST 9-13
[09:12:50] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:12:50] INFO: Selecting Catalog
[09:12:50] INFO: Using Catalog for LST 9-13
[09:12:50] INFO: Selecting Catalog
[09:12:50] INFO: Using Catalog for LST 9-13
[09:12:50] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:12:50] INFO: Selecting Catalog
[09:12:50] INFO: Using Catalog for LST 9-13
[09:12:50] INFO: Selecting Catalog
[09:12:50] INFO: Using Catalog for LST 9-13
[09:12:50] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:12:50] INFO: Selecting Catalog
[09:12:50] INFO: Using Catalog for LST 9-13
[09:12:50] INFO: Selecting Catalog
[09:12:50] INFO: Using Catalog for LST 9-13
[09:12:50] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:12:50] INFO: Selecting Catalog
[09:12:50] INFO: Using Catalog for LST 9-13
[09:12:50] INFO: Selecting Catalog
[09:12:50] INFO: Using Catalog for LST 9-13
[09:12:50] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:12:50] INFO: Selecting Catalog
[09:12:50] INFO: Using Catalog for LST 9-13
[09:12:50] INFO: Selecting Catalog
[09:12:50] INFO: Using Catalog for LST 9-13
[09:12:50] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:12:50] INFO: Selecting Catalog
[09:12:50] INFO: Using Catalog for LST 9-13
[09:12:50] INFO: Selecting Catalog
[09:12:50] INFO: Using Catalog for LST 9-13
[09:12:50] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:12:51] INFO: Selecting Catalog
[09:12:51] INFO: Using Catalog for LST 9-13
[09:12:51] INFO: Selecting Catalog
[09:12:51] INFO: Using Catalog for LST 9-13
[09:12:51] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
runSuccessful: True
[09:12:51] ******** End Scheduling Block
[09:12:51] ******** observer = OPERATOR, SB name = 15B287_operator, project ID = AGBT15B_287

how much log? 19708 id: 179191self.history: <gbt.turtle.database.History.History instance at 0x4956b00>self.history.connection: <gbt.turtle.database.TurtleConnection.TurtleConnection instance at 0x4956878>how much converted log? 19916 
#######################################################
 
 
#######################################################
 SCRIPT NUMBER 6, project:AGBT15B_287_40 
 179192 128 OPERATOR 10 Amber Bonsall 2016-01-10 09:12:53 obs_completed 
#######################################################
# test script to update catalog as you go...

########## CHANGE THESE ONLY #############
OnOffOnTime = 10 #minutes (change this to 12 to be in line with DSS scheduling)
obs_per_source = 3 #total observing time per source = OnOffOnTime * obs_per_source
h = Horizon(10.0) #minimum of 10 degrees elevation
h_up = Horizon(85.0) #maximum of 85 degrees due to keyhole
myOff = Offset("J2000",1.0,0.0,cosv=True)  # Off position relative to source
doFirstPointing = True #Setting to False will skip the first pointing
doFirstCal = True  #Setting to False will skip the first 3C calibrator OnOff scan
peak_every = 12 #peak/cal every 12 OnOffOn (every 2.5 hours)
peak_near_source = False #Do another peak when changing to new source
#####################################

######### NOTES ###############
# This script runs in blocks of On-Off-On position switching with
# the two outer 'on' scans sharing one 'off'
# Total on-source time = 20 minutes
# Length of one 'On' or 'Off' = 3 minutes 20 seconds
# Length of one On-Off-On = 10 minutes
# 3 On-Off-On blocks are needed per source (30 minutes total per source)

###### Timing
# It takes 34m to completely observe 1 source+overhead (9 track scans)

execfile("/home/astro-util/projects/15B287_operator/15B287_config.py")
execfile("/home/astro-util/projects/15B287_operator/15B287_utils.py")
Catalog(fluxcal)
Catalog(lband_pointing)

scanTime = OnOffOnTime * 20.0 #seconds
tdelta = DateTime.TimeDelta(minutes=OnOffOnTime)
obs_count = 0
doCal = doFirstCal
doPointing = doFirstPointing
project_obs = 0
old_catalog_name = 'dummy'
fullcat = '/home/astro-util/projects/15B287_operator/15B287_operator.cat'

Configure(config_1)

while project_obs < 100:
    mycat,altcal = select_my_catalog()
    if mycat == old_catalog_name:
        print 'SAME CATALOG HAS BEEN SELECTED: Using FULL catalog'
        mycat = fullcat
        altcal = '3C309_1'
    old_catalog_name = mycat
    c = Catalog(mycat)
    sources = c.keys()
    for source in sources:
        doBalance = True
        newPeak = True
        calibrator = c[source]["calibrator"]
        n_obs = int(float(c[source]["n_obs"]))
        obs_left = obs_per_source-n_obs
        obs_ok = obs_left > 0
        t_now = Now()
        if t_now != None and obs_ok:
            source_rise = h.GetRise(source)
            source_set  = h.GetSet(source)
            keyhole_rise = h_up.GetRise(source)
            keyhole_set = h_up.GetSet(source)
            if source_rise != None or keyhole_set != None:
                if source_set != None and keyhole_rise != None:
                    t_ok = ((t_now + tdelta) < source_set)
                    t_ok = t_ok and (t_now >= source_rise)
                    t_ok = t_ok and ((t_now + tdelta) < keyhole_rise)
                else:
                    t_ok = True
            else:
                t_ok = False
        else:
            t_ok = False

        source_ok = t_ok and obs_ok

        if source_ok:
            if doPointing == True:
                #check the calibrator is above the horizon
                keyhole_cal_rise = h_up.GetRise(calibrator)
                keyhole_cal_set = h_up.GetSet(calibrator)
                cal_rise = h.GetRise(calibrator)
                if cal_rise>t_now or keyhole_cal_set == None:
                    myCal = altcal #low circumpolar alternative
                    print 'Calibrator %s is too low: Using %s' %(calibrator,altcal)
                else:
                    if keyhole_cal_rise != None:
                        if (t_now+tdelta) >= keyhole_cal_rise:
                            print 'Calibrator %s is in keyhole: Using %s' %(calibrator,altcal)
                            myCal = altcal
                        else:
                            myCal = calibrator
                    else:
                        myCal = calibrator

                if obs_count == 0:
                    AutoPeakFocus(myCal)
                    #Break("Check Peak and Focus")
                else:
                    AutoPeak(myCal)
                Configure(config_1)
                doBalance = True
                doPointing = False

            if doCal:
                Slew(myCal)
                Balance()
                print 'Calibration scans (OnOff) :%s ' %(myCal)
                OnOff(myCal,myOff,120.0)
                doCal = False
                doBalance = True

            for i in range(obs_left):
                t_now = Now()   #check time ok again
                t_ok = False
                if t_now != None and keyhole_set != None:
                    if source_rise != None:
                        if source_set != None:
                            t_ok = ((t_now + tdelta) < source_set)
                            t_ok = t_ok and (t_now >= source_rise)
                            if keyhole_rise != None:
                                t_ok = t_ok and ((t_now+tdelta) < keyhole_rise)
                        else:
                            t_ok = True
                    else:
                        t_ok = False
                else:
                    t_ok = False

                if t_ok:
                    if peak_near_source and newPeak:
                        Slew(source)
                        AutoPeak()
                        Configure(config_1)
                        newPeak = False
                        doBalance = True
                    if doBalance:
                        Slew(source)
                        Balance()
                        doBalance = False

                    Comment("Starting on-source scan")
                    Track(source,None,scanTime)
                    Comment("Starting off-source scan")
                    Track(source,None,scanTime,fixedOffset=myOff)
                    Comment("Starting on-source scan")
                    Track(source,None,scanTime)
                    obs_count = obs_count + 1
                    obs_tot = obs_per_source+1-obs_left+i
                    print '%s: OBS COMPLETE = %s/%s' %(source,obs_tot,obs_per_source)
                    update_my_catalogs(source,obs_tot)

                    if obs_count % peak_every == 0:  #Cal/pointing interval
                        doCal = True
                        doPointing = True
        if source_ok and mycat == fullcat:
            break
    project_obs = project_obs+1

#######################################################
 LOG SESSION NUMBER 6 
[09:12:53] ******** Begin Scheduling Block
[09:12:53] ******** observer = OPERATOR, SB name = 15B287_operator, project ID = AGBT15B_287, date = 10 Jan 2016

[09:12:53] Configuring telescope.
[09:12:53]     Setting State: Activating
[09:12:54]     Setting State: Ready
[09:12:54]     Setting State: Activating
[09:12:55]     Setting State: Ready
[09:12:55] Default values are
[09:12:55] if3freq  =  [0, 0, 0]
[09:12:55] notchfilter  =  In
[09:12:55] polswitch  =  thru
[09:12:55] The bad devices are: 
[09:12:55] OpticalDriver5
[09:12:55] The bad devices are: 
[09:12:55] OpticalDriver5

[09:12:55] Checking telescope
[09:12:55] Configuration Complete
[09:12:55] INFO: Selecting Catalog
[09:12:55] INFO: Using Catalog for LST 9-13
[09:12:55] INFO: Selecting Catalog
[09:12:55] INFO: Using Catalog for LST 9-13
[09:12:55] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:12:56] Calibrator 3C48 is too low: Using 3C309_1
[09:12:56] Configuring telescope.
[09:12:57]     Setting State: Activating
[09:12:58]     Setting State: Ready
[09:12:58]     Setting State: Activating
[09:12:59]     Setting State: Ready
[09:12:59] Default values are
[09:12:59] if3freq  =  [0]
[09:12:59] notchfilter  =  In
[09:12:59] polswitch  =  thru
[09:12:59] The bad devices are: 
[09:12:59] OpticalDriver5

[09:12:59] Checking telescope
[09:12:59] Configuration Complete
[09:12:59] source : 3C309_1
               F1 : 1.4
               F2 : 32.0
               S22235 : 1.0
               S1400 : 7.5
               angsize : 1.5
               location : J2000 @ (14:59:07.58, 71:40:19.87)
[09:12:59] Slewing to source.
[09:12:59] In state Ready, waiting for state Activating
[09:12:59]     Setting State: Activating
[09:12:59] Detected state Activating
[09:12:59] In state Activating, waiting for state Ready
[09:13:13]     Setting State: Ready
[09:13:13] Detected state Ready
[09:13:13] Balancing IF system.
[09:13:13] Balancing IFRack
[09:13:13]     Setting State: Activating
[09:13:13]     Setting State: Ready
[09:13:15] the sampler values are:
[09:13:15] RF_power 1 : 1.05957
[09:13:15] RF_power 2 : 0
[09:13:15] RF_power 3 : 1.171875
[09:13:15] RF_power 4 : 0.01464844
[09:13:15] RF_power 5 : 0.03417969
[09:13:15] RF_power 6 : 2.96875
[09:13:15] RF_power 7 : 0.4638672
[09:13:15] RF_power 8 : 0.02929688
[09:13:15] source : 3C309_1
               F1 : 1.4
               F2 : 32.0
               S22235 : 1.0
               S1400 : 7.5
               angsize : 1.5
               location : J2000 @ (14:59:07.58, 71:40:19.87)
[09:13:15] Peak: Subscan 1 of 4
[09:13:15] In state Ready, waiting for state Running
[09:13:15]     Setting State: Activating
[09:13:38]     Setting State: Committed
[09:13:40]     Setting State: Running
[09:13:40] Detected state Running
[09:13:40] *** Notice: This subscan will be numbered as scan #36 in your data reduction package.
[09:13:40] In state Running, waiting for state Ready
[09:14:10]     Setting State: Stopping
[09:14:16]     Setting State: Ready
[09:14:16] Detected state Ready
[09:14:16] Ygor Telescope: WaitForStopping
[09:14:16] Peak: Subscan 2 of 4
[09:14:16] In state Ready, waiting for state Running
[09:14:16]     Setting State: Activating
[09:14:25]     Setting State: Committed
[09:14:27]     Setting State: Running
[09:14:27] Detected state Running
[09:14:27] *** Notice: This subscan will be numbered as scan #37 in your data reduction package.
[09:14:27] In state Running, waiting for state Ready
[09:14:57]     Setting State: Stopping
[09:15:03]     Setting State: Ready
[09:15:03] Detected state Ready
[09:15:03] Ygor Telescope: WaitForStopping
[09:15:04] *** Updating antenna's pointing to az2=0.0092 and el=0.3365 arcmins

[09:15:04] Peak: Subscan 3 of 4
[09:15:04] In state Ready, waiting for state Running
[09:15:04]     Setting State: Activating
[09:15:24]     Setting State: Committed
[09:15:26]     Setting State: Running
[09:15:26] Detected state Running
[09:15:26] *** Notice: This subscan will be numbered as scan #38 in your data reduction package.
[09:15:26] In state Running, waiting for state Ready
[09:15:56]     Setting State: Stopping
[09:16:01]     Setting State: Ready
[09:16:01] Detected state Ready
[09:16:01] Ygor Telescope: WaitForStopping
[09:16:01] Peak: Subscan 4 of 4
[09:16:01] In state Ready, waiting for state Running
[09:16:01]     Setting State: Activating
[09:16:09]     Setting State: Committed
[09:16:11]     Setting State: Running
[09:16:11] Detected state Running
[09:16:11] *** Notice: This subscan will be numbered as scan #39 in your data reduction package.
[09:16:11] In state Running, waiting for state Ready
[09:16:41]     Setting State: Stopping
[09:16:45]     Setting State: Ready
[09:16:45] Detected state Ready
[09:16:45] Ygor Telescope: WaitForStopping
[09:16:46] *** Updating antenna's pointing to az2=0.0092 and el=0.3367 arcmins

[09:16:46] source : 3C309_1
               F1 : 1.4
               F2 : 32.0
               S22235 : 1.0
               S1400 : 7.5
               angsize : 1.5
               location : J2000 @ (14:59:07.58, 71:40:19.87)
[09:16:46] Focus: Subscan 1 of 1
[09:16:47] In state Ready, waiting for state Running
[09:16:47]     Setting State: Activating
[09:17:13]     Setting State: Committed
[09:17:15]     Setting State: Running
[09:17:15] Detected state Running
[09:17:15] *** Notice: This subscan will be numbered as scan #40 in your data reduction package.
[09:17:15] In state Running, waiting for state Ready
[09:18:15]     Setting State: Stopping
[09:18:17]     Setting State: Ready
[09:18:17] Detected state Ready
[09:18:17] Ygor Telescope: WaitForStopping
[09:18:17] *** Updating antenna's focus to -24.14 mm

[09:18:18] Configuring telescope.
[09:18:18]     Setting State: Activating
[09:18:20]     Setting State: Ready
[09:18:22]     Setting State: Activating
[09:18:23]     Setting State: Ready
[09:18:23] Default values are
[09:18:23] if3freq  =  [0, 0, 0]
[09:18:23] notchfilter  =  In
[09:18:23] polswitch  =  thru
[09:18:23] The bad devices are: 
[09:18:23] OpticalDriver5
[09:18:23] The bad devices are: 
[09:18:23] OpticalDriver5
[09:18:23] Waiting for the ConverterRack to finish activating
[09:18:23] . .
[09:18:23] Checking telescope
[09:18:23] Configuration Complete
[09:18:23] source : 3C309_1
               F1 : 1.4
               F2 : 32.0
               S22235 : 1.0
               S1400 : 7.5
               angsize : 1.5
               location : J2000 @ (14:59:07.58, 71:40:19.87)
[09:18:23] Slewing to source.
[09:18:23] In state Ready, waiting for state Activating
[09:18:23]     Setting State: Activating
[09:18:23] Detected state Activating
[09:18:23] In state Activating, waiting for state Ready
[09:18:50]     Setting State: Ready
[09:18:50] Detected state Ready
[09:18:50] Balancing IF system.
[09:18:50] Balancing IFRack
[09:18:51]     Setting State: Activating
[09:18:51]     Setting State: Ready
[09:18:52] the sampler values are:
[09:18:52] RF_power 1 : 3.193359
[09:18:52] RF_power 2 : 0
[09:18:52] RF_power 3 : 2.734375
[09:18:52] RF_power 4 : 0.01464844
[09:18:52] RF_power 5 : 0.03417969
[09:18:52] RF_power 6 : 3.139648
[09:18:52] RF_power 7 : 3.364258
[09:18:52] RF_power 8 : 0.02929688
[09:18:52] Balancing VEGAS
[09:18:52]     Setting State: Activating
[09:18:52]     Setting State: Ready
[09:18:54]     Setting State: Activating
[09:18:54]     Setting State: Ready
[09:18:54] Calibration scans (OnOff) :3C309_1 
[09:18:54] source : 3C309_1
               F1 : 1.4
               F2 : 32.0
               S22235 : 1.0
               S1400 : 7.5
               angsize : 1.5
               location : J2000 @ (14:59:07.58, 71:40:19.87)
[09:18:54] OnOff: Subscan 1 of 2
[09:18:55] In state Ready, waiting for state Running
[09:18:55]     Setting State: Activating
[09:19:00]     Setting State: Committed
[09:19:02]     Setting State: Running
[09:19:02] Detected state Running
[09:19:02] *** Notice: This subscan will be numbered as scan #41 in your data reduction package.
[09:19:02] In state Running, waiting for state Ready
[09:21:02]     Setting State: Stopping
[09:21:04]     Setting State: Ready
[09:21:04] Detected state Ready
[09:21:04] Ygor Telescope: WaitForStopping
[09:21:04] OnOff: Subscan 2 of 2
[09:21:04] In state Ready, waiting for state Running
[09:21:04]     Setting State: Activating
[09:21:18]     Setting State: Committed
[09:21:20]     Setting State: Running
[09:21:20] Detected state Running
[09:21:20] *** Notice: This subscan will be numbered as scan #42 in your data reduction package.
[09:21:20] In state Running, waiting for state Ready
[09:23:20]     Setting State: Stopping
[09:23:22]     Setting State: Ready
[09:23:22] Detected state Ready
[09:23:22] Ygor Telescope: WaitForStopping
[09:23:22] INFO: Selecting Catalog
[09:23:22] INFO: Using Catalog for LST 9-13
[09:23:22] INFO: Selecting Catalog
[09:23:22] INFO: Using Catalog for LST 9-13
[09:23:22] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:23:22] INFO: Selecting Catalog
[09:23:22] INFO: Using Catalog for LST 9-13
[09:23:22] INFO: Selecting Catalog
[09:23:22] INFO: Using Catalog for LST 9-13
[09:23:22] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:23:22] INFO: Selecting Catalog
[09:23:22] INFO: Using Catalog for LST 9-13
[09:23:22] INFO: Selecting Catalog
[09:23:22] INFO: Using Catalog for LST 9-13
[09:23:22] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:23:22] INFO: Selecting Catalog
[09:23:22] INFO: Using Catalog for LST 9-13
[09:23:22] INFO: Selecting Catalog
[09:23:22] INFO: Using Catalog for LST 9-13
[09:23:22] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:23:22] INFO: Selecting Catalog
[09:23:22] INFO: Using Catalog for LST 9-13
[09:23:22] INFO: Selecting Catalog
[09:23:22] INFO: Using Catalog for LST 9-13
[09:23:22] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:23:22] INFO: Selecting Catalog
[09:23:22] INFO: Using Catalog for LST 9-13
[09:23:22] INFO: Selecting Catalog
[09:23:22] INFO: Using Catalog for LST 9-13
[09:23:22] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:23:22] INFO: Selecting Catalog
[09:23:22] INFO: Using Catalog for LST 9-13
[09:23:22] INFO: Selecting Catalog
[09:23:22] INFO: Using Catalog for LST 9-13
[09:23:22] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:23:22] INFO: Selecting Catalog
[09:23:22] INFO: Using Catalog for LST 9-13
[09:23:22] INFO: Selecting Catalog
[09:23:22] INFO: Using Catalog for LST 9-13
[09:23:22] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:23:22] INFO: Selecting Catalog
[09:23:22] INFO: Using Catalog for LST 9-13
[09:23:22] INFO: Selecting Catalog
[09:23:22] INFO: Using Catalog for LST 9-13
[09:23:22] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:23:22] INFO: Selecting Catalog
[09:23:22] INFO: Using Catalog for LST 9-13
[09:23:22] INFO: Selecting Catalog
[09:23:22] INFO: Using Catalog for LST 9-13
[09:23:22] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:23:22] INFO: Selecting Catalog
[09:23:22] INFO: Using Catalog for LST 9-13
[09:23:22] INFO: Selecting Catalog
[09:23:22] INFO: Using Catalog for LST 9-13
[09:23:22] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:23:22] INFO: Selecting Catalog
[09:23:22] INFO: Using Catalog for LST 9-13
[09:23:22] INFO: Selecting Catalog
[09:23:22] INFO: Using Catalog for LST 9-13
[09:23:22] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:23:22] INFO: Selecting Catalog
[09:23:22] INFO: Using Catalog for LST 9-13
[09:23:22] INFO: Selecting Catalog
[09:23:22] INFO: Using Catalog for LST 9-13
[09:23:22] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:23:22] INFO: Selecting Catalog
[09:23:22] INFO: Using Catalog for LST 9-13
[09:23:22] INFO: Selecting Catalog
[09:23:22] INFO: Using Catalog for LST 9-13
[09:23:22] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:23:22] INFO: Selecting Catalog
[09:23:22] INFO: Using Catalog for LST 9-13
[09:23:22] INFO: Selecting Catalog
[09:23:22] INFO: Using Catalog for LST 9-13
[09:23:22] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:23:23] INFO: Selecting Catalog
[09:23:23] INFO: Using Catalog for LST 9-13
[09:23:23] INFO: Selecting Catalog
[09:23:23] INFO: Using Catalog for LST 9-13
[09:23:23] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:23:23] INFO: Selecting Catalog
[09:23:23] INFO: Using Catalog for LST 9-13
[09:23:23] INFO: Selecting Catalog
[09:23:23] INFO: Using Catalog for LST 9-13
[09:23:23] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:23:23] INFO: Selecting Catalog
[09:23:23] INFO: Using Catalog for LST 9-13
[09:23:23] INFO: Selecting Catalog
[09:23:23] INFO: Using Catalog for LST 9-13
[09:23:23] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:23:23] INFO: Selecting Catalog
[09:23:23] INFO: Using Catalog for LST 9-13
[09:23:23] INFO: Selecting Catalog
[09:23:23] INFO: Using Catalog for LST 9-13
[09:23:23] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:23:23] INFO: Selecting Catalog
[09:23:23] INFO: Using Catalog for LST 9-13
[09:23:23] INFO: Selecting Catalog
[09:23:23] INFO: Using Catalog for LST 9-13
[09:23:23] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:23:23] INFO: Selecting Catalog
[09:23:23] INFO: Using Catalog for LST 9-13
[09:23:23] INFO: Selecting Catalog
[09:23:23] INFO: Using Catalog for LST 9-13
[09:23:23] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:23:23] INFO: Selecting Catalog
[09:23:23] INFO: Using Catalog for LST 9-13
[09:23:23] INFO: Selecting Catalog
[09:23:23] INFO: Using Catalog for LST 9-13
[09:23:23] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:23:23] INFO: Selecting Catalog
[09:23:23] INFO: Using Catalog for LST 9-13
[09:23:23] INFO: Selecting Catalog
[09:23:23] INFO: Using Catalog for LST 9-13
[09:23:23] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:23:23] INFO: Selecting Catalog
[09:23:23] INFO: Using Catalog for LST 9-13
[09:23:23] INFO: Selecting Catalog
[09:23:23] INFO: Using Catalog for LST 9-13
[09:23:23] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:23:23] INFO: Selecting Catalog
[09:23:23] INFO: Using Catalog for LST 9-13
[09:23:23] INFO: Selecting Catalog
[09:23:23] INFO: Using Catalog for LST 9-13
[09:23:23] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:23:23] INFO: Selecting Catalog
[09:23:23] INFO: Using Catalog for LST 9-13
[09:23:23] INFO: Selecting Catalog
[09:23:23] INFO: Using Catalog for LST 9-13
[09:23:23] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:23:23] INFO: Selecting Catalog
[09:23:23] INFO: Using Catalog for LST 9-13
[09:23:23] INFO: Selecting Catalog
[09:23:23] INFO: Using Catalog for LST 9-13
[09:23:23] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:23:23] INFO: Selecting Catalog
[09:23:23] INFO: Using Catalog for LST 9-13
[09:23:23] INFO: Selecting Catalog
[09:23:23] INFO: Using Catalog for LST 9-13
[09:23:23] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:23:23] INFO: Selecting Catalog
[09:23:23] INFO: Using Catalog for LST 9-13
[09:23:23] INFO: Selecting Catalog
[09:23:23] INFO: Using Catalog for LST 9-13
[09:23:23] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:23:23] INFO: Selecting Catalog
[09:23:23] INFO: Using Catalog for LST 9-13
[09:23:23] INFO: Selecting Catalog
[09:23:23] INFO: Using Catalog for LST 9-13
[09:23:23] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:23:23] INFO: Selecting Catalog
[09:23:23] INFO: Using Catalog for LST 9-13
[09:23:23] INFO: Selecting Catalog
[09:23:23] INFO: Using Catalog for LST 9-13
[09:23:23] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:23:23] INFO: Selecting Catalog
[09:23:23] INFO: Using Catalog for LST 9-13
[09:23:23] INFO: Selecting Catalog
[09:23:23] INFO: Using Catalog for LST 9-13
[09:23:23] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:23:24] INFO: Selecting Catalog
[09:23:24] INFO: Using Catalog for LST 9-13
[09:23:24] INFO: Selecting Catalog
[09:23:24] INFO: Using Catalog for LST 9-13
[09:23:24] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:23:24] INFO: Selecting Catalog
[09:23:24] INFO: Using Catalog for LST 9-13
[09:23:24] INFO: Selecting Catalog
[09:23:24] INFO: Using Catalog for LST 9-13
[09:23:24] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:23:24] INFO: Selecting Catalog
[09:23:24] INFO: Using Catalog for LST 9-13
[09:23:24] INFO: Selecting Catalog
[09:23:24] INFO: Using Catalog for LST 9-13
[09:23:24] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:23:24] INFO: Selecting Catalog
[09:23:24] INFO: Using Catalog for LST 9-13
[09:23:24] INFO: Selecting Catalog
[09:23:24] INFO: Using Catalog for LST 9-13
[09:23:24] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:23:24] INFO: Selecting Catalog
[09:23:24] INFO: Using Catalog for LST 9-13
[09:23:24] INFO: Selecting Catalog
[09:23:24] INFO: Using Catalog for LST 9-13
[09:23:24] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:23:24] INFO: Selecting Catalog
[09:23:24] INFO: Using Catalog for LST 9-13
[09:23:24] INFO: Selecting Catalog
[09:23:24] INFO: Using Catalog for LST 9-13
[09:23:24] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:23:24] INFO: Selecting Catalog
[09:23:24] INFO: Using Catalog for LST 9-13
[09:23:24] INFO: Selecting Catalog
[09:23:24] INFO: Using Catalog for LST 9-13
[09:23:24] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:23:24] INFO: Selecting Catalog
[09:23:24] INFO: Using Catalog for LST 9-13
[09:23:24] INFO: Selecting Catalog
[09:23:24] INFO: Using Catalog for LST 9-13
[09:23:24] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:23:24] INFO: Selecting Catalog
[09:23:24] INFO: Using Catalog for LST 9-13
[09:23:24] INFO: Selecting Catalog
[09:23:24] INFO: Using Catalog for LST 9-13
[09:23:24] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:23:24] INFO: Selecting Catalog
[09:23:24] INFO: Using Catalog for LST 9-13
[09:23:24] INFO: Selecting Catalog
[09:23:24] INFO: Using Catalog for LST 9-13
[09:23:24] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:23:24] INFO: Selecting Catalog
[09:23:24] INFO: Using Catalog for LST 9-13
[09:23:24] INFO: Selecting Catalog
[09:23:24] INFO: Using Catalog for LST 9-13
[09:23:24] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:23:24] INFO: Selecting Catalog
[09:23:24] INFO: Using Catalog for LST 9-13
[09:23:24] INFO: Selecting Catalog
[09:23:24] INFO: Using Catalog for LST 9-13
[09:23:24] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:23:24] INFO: Selecting Catalog
[09:23:24] INFO: Using Catalog for LST 9-13
[09:23:24] INFO: Selecting Catalog
[09:23:24] INFO: Using Catalog for LST 9-13
[09:23:24] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:23:24] INFO: Selecting Catalog
[09:23:24] INFO: Using Catalog for LST 9-13
[09:23:24] INFO: Selecting Catalog
[09:23:24] INFO: Using Catalog for LST 9-13
[09:23:24] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:23:24] INFO: Selecting Catalog
[09:23:24] INFO: Using Catalog for LST 9-13
[09:23:24] INFO: Selecting Catalog
[09:23:24] INFO: Using Catalog for LST 9-13
[09:23:24] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:23:24] INFO: Selecting Catalog
[09:23:24] INFO: Using Catalog for LST 9-13
[09:23:24] INFO: Selecting Catalog
[09:23:24] INFO: Using Catalog for LST 9-13
[09:23:24] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:23:25] INFO: Selecting Catalog
[09:23:25] INFO: Using Catalog for LST 9-13
[09:23:25] INFO: Selecting Catalog
[09:23:25] INFO: Using Catalog for LST 9-13
[09:23:25] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
runSuccessful: True
[09:23:25] ******** End Scheduling Block
[09:23:25] ******** observer = OPERATOR, SB name = 15B287_operator, project ID = AGBT15B_287

how much log? 19624 id: 179192self.history: <gbt.turtle.database.History.History instance at 0x4956b00>self.history.connection: <gbt.turtle.database.TurtleConnection.TurtleConnection instance at 0x4956878>how much converted log? 19832 
#######################################################
 
 
#######################################################
 SCRIPT NUMBER 7, project:AGBT15B_287_40 
 179193 128 OPERATOR 10 Amber Bonsall 2016-01-10 09:23:27 obs_completed 
#######################################################
# test script to update catalog as you go...

########## CHANGE THESE ONLY #############
OnOffOnTime = 10 #minutes (change this to 12 to be in line with DSS scheduling)
obs_per_source = 3 #total observing time per source = OnOffOnTime * obs_per_source
h = Horizon(10.0) #minimum of 10 degrees elevation
h_up = Horizon(85.0) #maximum of 85 degrees due to keyhole
myOff = Offset("J2000",1.0,0.0,cosv=True)  # Off position relative to source
doFirstPointing = True #Setting to False will skip the first pointing
doFirstCal = True  #Setting to False will skip the first 3C calibrator OnOff scan
peak_every = 12 #peak/cal every 12 OnOffOn (every 2.5 hours)
peak_near_source = False #Do another peak when changing to new source
#####################################

######### NOTES ###############
# This script runs in blocks of On-Off-On position switching with
# the two outer 'on' scans sharing one 'off'
# Total on-source time = 20 minutes
# Length of one 'On' or 'Off' = 3 minutes 20 seconds
# Length of one On-Off-On = 10 minutes
# 3 On-Off-On blocks are needed per source (30 minutes total per source)

###### Timing
# It takes 34m to completely observe 1 source+overhead (9 track scans)

execfile("/home/astro-util/projects/15B287_operator/15B287_config.py")
execfile("/home/astro-util/projects/15B287_operator/15B287_utils.py")
Catalog(fluxcal)
Catalog(lband_pointing)

scanTime = OnOffOnTime * 20.0 #seconds
tdelta = DateTime.TimeDelta(minutes=OnOffOnTime)
obs_count = 0
doCal = doFirstCal
doPointing = doFirstPointing
project_obs = 0
old_catalog_name = 'dummy'
fullcat = '/home/astro-util/projects/15B287_operator/15B287_operator.cat'

Configure(config_1)

while project_obs < 100:
    mycat,altcal = select_my_catalog()
    if mycat == old_catalog_name:
        print 'SAME CATALOG HAS BEEN SELECTED: Using FULL catalog'
        mycat = fullcat
        altcal = '3C309_1'
    old_catalog_name = mycat
    c = Catalog(mycat)
    sources = c.keys()
    for source in sources:
        doBalance = True
        newPeak = True
        calibrator = c[source]["calibrator"]
        n_obs = int(float(c[source]["n_obs"]))
        obs_left = obs_per_source-n_obs
        obs_ok = obs_left > 0
        t_now = Now()
        if t_now != None and obs_ok:
            source_rise = h.GetRise(source)
            source_set  = h.GetSet(source)
            keyhole_rise = h_up.GetRise(source)
            keyhole_set = h_up.GetSet(source)
            if source_rise != None or keyhole_set != None:
                if source_set != None and keyhole_rise != None:
                    t_ok = ((t_now + tdelta) < source_set)
                    t_ok = t_ok and (t_now >= source_rise)
                    t_ok = t_ok and ((t_now + tdelta) < keyhole_rise)
                else:
                    t_ok = True
            else:
                t_ok = False
        else:
            t_ok = False

        source_ok = t_ok and obs_ok

        if source_ok:
            if doPointing == True:
                #check the calibrator is above the horizon
                keyhole_cal_rise = h_up.GetRise(calibrator)
                keyhole_cal_set = h_up.GetSet(calibrator)
                cal_rise = h.GetRise(calibrator)
                if cal_rise>t_now or keyhole_cal_set == None:
                    myCal = altcal #low circumpolar alternative
                    print 'Calibrator %s is too low: Using %s' %(calibrator,altcal)
                else:
                    if keyhole_cal_rise != None:
                        if (t_now+tdelta) >= keyhole_cal_rise:
                            print 'Calibrator %s is in keyhole: Using %s' %(calibrator,altcal)
                            myCal = altcal
                        else:
                            myCal = calibrator
                    else:
                        myCal = calibrator

                if obs_count == 0:
                    AutoPeakFocus(myCal)
                    #Break("Check Peak and Focus")
                else:
                    AutoPeak(myCal)
                Configure(config_1)
                doBalance = True
                doPointing = False

            if doCal:
                Slew(myCal)
                Balance()
                print 'Calibration scans (OnOff) :%s ' %(myCal)
                OnOff(myCal,myOff,120.0)
                doCal = False
                doBalance = True

            for i in range(obs_left):
                t_now = Now()   #check time ok again
                t_ok = False
                if t_now != None and keyhole_set != None:
                    if source_rise != None:
                        if source_set != None:
                            t_ok = ((t_now + tdelta) < source_set)
                            t_ok = t_ok and (t_now >= source_rise)
                            if keyhole_rise != None:
                                t_ok = t_ok and ((t_now+tdelta) < keyhole_rise)
                        else:
                            t_ok = True
                    else:
                        t_ok = False
                else:
                    t_ok = False

                if t_ok:
                    if peak_near_source and newPeak:
                        Slew(source)
                        AutoPeak()
                        Configure(config_1)
                        newPeak = False
                        doBalance = True
                    if doBalance:
                        Slew(source)
                        Balance()
                        doBalance = False

                    Comment("Starting on-source scan")
                    Track(source,None,scanTime)
                    Comment("Starting off-source scan")
                    Track(source,None,scanTime,fixedOffset=myOff)
                    Comment("Starting on-source scan")
                    Track(source,None,scanTime)
                    obs_count = obs_count + 1
                    obs_tot = obs_per_source+1-obs_left+i
                    print '%s: OBS COMPLETE = %s/%s' %(source,obs_tot,obs_per_source)
                    update_my_catalogs(source,obs_tot)

                    if obs_count % peak_every == 0:  #Cal/pointing interval
                        doCal = True
                        doPointing = True
        if source_ok and mycat == fullcat:
            break
    project_obs = project_obs+1

#######################################################
 LOG SESSION NUMBER 7 
[09:23:27] ******** Begin Scheduling Block
[09:23:27] ******** observer = OPERATOR, SB name = 15B287_operator, project ID = AGBT15B_287, date = 10 Jan 2016

[09:23:27] Configuring telescope.
[09:23:27]     Setting State: Activating
[09:23:28]     Setting State: Ready
[09:23:28]     Setting State: Activating
[09:23:29]     Setting State: Ready
[09:23:29] Default values are
[09:23:29] if3freq  =  [0, 0, 0]
[09:23:29] notchfilter  =  In
[09:23:29] polswitch  =  thru
[09:23:29] The bad devices are: 
[09:23:29] OpticalDriver5
[09:23:29] The bad devices are: 
[09:23:29] OpticalDriver5

[09:23:29] Checking telescope
[09:23:29] Configuration Complete
[09:23:29] INFO: Selecting Catalog
[09:23:29] INFO: Using Catalog for LST 9-13
[09:23:29] INFO: Selecting Catalog
[09:23:29] INFO: Using Catalog for LST 9-13
[09:23:29] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:23:29] Calibrator 3C48 is too low: Using 3C309_1
[09:23:30] Configuring telescope.
[09:23:30]     Setting State: Activating
[09:23:32]     Setting State: Ready
[09:23:32]     Setting State: Activating
[09:23:33]     Setting State: Ready
[09:23:33] Default values are
[09:23:33] if3freq  =  [0]
[09:23:33] notchfilter  =  In
[09:23:33] polswitch  =  thru
[09:23:33] The bad devices are: 
[09:23:33] OpticalDriver5

[09:23:33] Checking telescope
[09:23:33] Configuration Complete
[09:23:33] source : 3C309_1
               F1 : 1.4
               F2 : 32.0
               S22235 : 1.0
               S1400 : 7.5
               angsize : 1.5
               location : J2000 @ (14:59:07.58, 71:40:19.87)
[09:23:33] Slewing to source.
[09:23:33] In state Ready, waiting for state Activating
[09:23:33]     Setting State: Activating
[09:23:33] Detected state Activating
[09:23:33] In state Activating, waiting for state Ready
[09:23:46]     Setting State: Ready
[09:23:46] Detected state Ready
[09:23:46] Balancing IF system.
[09:23:46] Balancing IFRack
[09:23:47]     Setting State: Activating
[09:23:47]     Setting State: Ready
[09:23:49] the sampler values are:
[09:23:49] RF_power 1 : 1.030273
[09:23:49] RF_power 2 : 0.004882812
[09:23:49] RF_power 3 : 0.8740234
[09:23:49] RF_power 4 : 0.01464844
[09:23:49] RF_power 5 : 0.03417969
[09:23:49] RF_power 6 : 2.998047
[09:23:49] RF_power 7 : 0.4736328
[09:23:49] RF_power 8 : 0.02441406
[09:23:49] source : 3C309_1
               F1 : 1.4
               F2 : 32.0
               S22235 : 1.0
               S1400 : 7.5
               angsize : 1.5
               location : J2000 @ (14:59:07.58, 71:40:19.87)
[09:23:49] Peak: Subscan 1 of 4
[09:23:49] In state Ready, waiting for state Running
[09:23:49]     Setting State: Activating
[09:24:12]     Setting State: Committed
[09:24:14]     Setting State: Running
[09:24:14] Detected state Running
[09:24:14] *** Notice: This subscan will be numbered as scan #43 in your data reduction package.
[09:24:14] In state Running, waiting for state Ready
[09:24:44]     Setting State: Stopping
[09:24:50]     Setting State: Ready
[09:24:50] Detected state Ready
[09:24:50] Ygor Telescope: WaitForStopping
[09:24:50] Peak: Subscan 2 of 4
[09:24:50] In state Ready, waiting for state Running
[09:24:50]     Setting State: Activating
[09:24:59]     Setting State: Committed
[09:25:01]     Setting State: Running
[09:25:01] Detected state Running
[09:25:01] *** Notice: This subscan will be numbered as scan #44 in your data reduction package.
[09:25:01] In state Running, waiting for state Ready
[09:25:31]     Setting State: Stopping
[09:25:37]     Setting State: Ready
[09:25:37] Detected state Ready
[09:25:37] Ygor Telescope: WaitForStopping
[09:25:38] . *** Updating antenna's pointing to az2=-0.0178 and el=0.3367 arcmins

[09:25:38] Peak: Subscan 3 of 4
[09:25:39] In state Ready, waiting for state Running
[09:25:39]     Setting State: Activating
[09:25:58]     Setting State: Committed
[09:26:00]     Setting State: Running
[09:26:00] Detected state Running
[09:26:00] *** Notice: This subscan will be numbered as scan #45 in your data reduction package.
[09:26:00] In state Running, waiting for state Ready
[09:26:30]     Setting State: Stopping
[09:26:35]     Setting State: Ready
[09:26:35] Detected state Ready
[09:26:35] Ygor Telescope: WaitForStopping
[09:26:35] Peak: Subscan 4 of 4
[09:26:35] In state Ready, waiting for state Running
[09:26:35]     Setting State: Activating
[09:26:43]     Setting State: Committed
[09:26:45]     Setting State: Running
[09:26:45] Detected state Running
[09:26:45] *** Notice: This subscan will be numbered as scan #46 in your data reduction package.
[09:26:45] In state Running, waiting for state Ready
[09:27:15]     Setting State: Stopping
[09:27:19]     Setting State: Ready
[09:27:19] Detected state Ready
[09:27:19] Ygor Telescope: WaitForStopping
[09:27:20] *** Updating antenna's pointing to az2=-0.0178 and el=0.3222 arcmins

[09:27:20] source : 3C309_1
               F1 : 1.4
               F2 : 32.0
               S22235 : 1.0
               S1400 : 7.5
               angsize : 1.5
               location : J2000 @ (14:59:07.58, 71:40:19.87)
[09:27:20] Focus: Subscan 1 of 1
[09:27:21] In state Ready, waiting for state Running
[09:27:21]     Setting State: Activating
[09:27:47]     Setting State: Committed
[09:27:49]     Setting State: Running
[09:27:49] Detected state Running
[09:27:49] *** Notice: This subscan will be numbered as scan #47 in your data reduction package.
[09:27:49] In state Running, waiting for state Ready
[09:28:49]     Setting State: Stopping
[09:28:51]     Setting State: Ready
[09:28:51] Detected state Ready
[09:28:51] Ygor Telescope: WaitForStopping
[09:28:51] *** Updating antenna's focus to -31.36 mm

[09:28:52] Configuring telescope.
[09:28:52]     Setting State: Activating
[09:28:54]     Setting State: Ready
[09:28:55]     Setting State: Activating
[09:28:56]     Setting State: Ready
[09:28:56] Default values are
[09:28:56] if3freq  =  [0, 0, 0]
[09:28:56] notchfilter  =  In
[09:28:56] polswitch  =  thru
[09:28:56] The bad devices are: 
[09:28:56] OpticalDriver5
[09:28:56] The bad devices are: 
[09:28:56] OpticalDriver5
[09:28:56] Waiting for the ConverterRack to finish activating
[09:28:56] . .
[09:28:56] Checking telescope
[09:28:56] Configuration Complete
[09:28:57] source : 3C309_1
               F1 : 1.4
               F2 : 32.0
               S22235 : 1.0
               S1400 : 7.5
               angsize : 1.5
               location : J2000 @ (14:59:07.58, 71:40:19.87)
[09:28:57] Slewing to source.
[09:28:57] In state Ready, waiting for state Activating
[09:28:57]     Setting State: Activating
[09:28:57] Detected state Activating
[09:28:57] In state Activating, waiting for state Ready
[09:29:25]     Setting State: Ready
[09:29:25] Detected state Ready
[09:29:25] Balancing IF system.
[09:29:25] Balancing IFRack
[09:29:25]     Setting State: Activating
[09:29:25]     Setting State: Ready
[09:29:27] the sampler values are:
[09:29:27] RF_power 1 : 3.100586
[09:29:27] RF_power 2 : 0
[09:29:27] RF_power 3 : 3.154297
[09:29:27] RF_power 4 : 0.01464844
[09:29:27] RF_power 5 : 0.03417969
[09:29:27] RF_power 6 : 3.022461
[09:29:27] RF_power 7 : 3.251953
[09:29:27] RF_power 8 : 0.02441406
[09:29:27] Balancing VEGAS
[09:29:27]     Setting State: Activating
[09:29:27]     Setting State: Ready
[09:29:28]     Setting State: Activating
[09:29:28]     Setting State: Ready
[09:29:29] Calibration scans (OnOff) :3C309_1 
[09:29:29] source : 3C309_1
               F1 : 1.4
               F2 : 32.0
               S22235 : 1.0
               S1400 : 7.5
               angsize : 1.5
               location : J2000 @ (14:59:07.58, 71:40:19.87)
[09:29:29] OnOff: Subscan 1 of 2
[09:29:30] In state Ready, waiting for state Running
[09:29:30]     Setting State: Activating
[09:29:35]     Setting State: Committed
[09:29:37]     Setting State: Running
[09:29:37] Detected state Running
[09:29:37] *** Notice: This subscan will be numbered as scan #48 in your data reduction package.
[09:29:37] In state Running, waiting for state Ready
[09:31:37]     Setting State: Stopping
[09:31:39]     Setting State: Ready
[09:31:39] Detected state Ready
[09:31:39] Ygor Telescope: WaitForStopping
[09:31:39] OnOff: Subscan 2 of 2
[09:31:39] In state Ready, waiting for state Running
[09:31:39]     Setting State: Activating
[09:31:52]     Setting State: Committed
[09:31:54]     Setting State: Running
[09:31:54] Detected state Running
[09:31:54] *** Notice: This subscan will be numbered as scan #49 in your data reduction package.
[09:31:54] In state Running, waiting for state Ready
[09:33:54]     Setting State: Stopping
[09:33:56]     Setting State: Ready
[09:33:56] Detected state Ready
[09:33:56] Ygor Telescope: WaitForStopping
[09:33:56] INFO: Selecting Catalog
[09:33:56] INFO: Using Catalog for LST 9-13
[09:33:56] INFO: Selecting Catalog
[09:33:56] INFO: Using Catalog for LST 9-13
[09:33:56] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:33:56] INFO: Selecting Catalog
[09:33:56] INFO: Using Catalog for LST 9-13
[09:33:56] INFO: Selecting Catalog
[09:33:56] INFO: Using Catalog for LST 9-13
[09:33:56] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:33:56] INFO: Selecting Catalog
[09:33:56] INFO: Using Catalog for LST 9-13
[09:33:56] INFO: Selecting Catalog
[09:33:56] INFO: Using Catalog for LST 9-13
[09:33:56] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:33:56] INFO: Selecting Catalog
[09:33:56] INFO: Using Catalog for LST 9-13
[09:33:56] INFO: Selecting Catalog
[09:33:56] INFO: Using Catalog for LST 9-13
[09:33:56] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:33:56] INFO: Selecting Catalog
[09:33:56] INFO: Using Catalog for LST 9-13
[09:33:56] INFO: Selecting Catalog
[09:33:56] INFO: Using Catalog for LST 9-13
[09:33:56] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:33:56] INFO: Selecting Catalog
[09:33:56] INFO: Using Catalog for LST 9-13
[09:33:56] INFO: Selecting Catalog
[09:33:56] INFO: Using Catalog for LST 9-13
[09:33:56] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:33:56] INFO: Selecting Catalog
[09:33:56] INFO: Using Catalog for LST 9-13
[09:33:56] INFO: Selecting Catalog
[09:33:56] INFO: Using Catalog for LST 9-13
[09:33:56] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:33:56] INFO: Selecting Catalog
[09:33:56] INFO: Using Catalog for LST 9-13
[09:33:56] INFO: Selecting Catalog
[09:33:56] INFO: Using Catalog for LST 9-13
[09:33:56] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:33:56] INFO: Selecting Catalog
[09:33:56] INFO: Using Catalog for LST 9-13
[09:33:56] INFO: Selecting Catalog
[09:33:56] INFO: Using Catalog for LST 9-13
[09:33:56] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:33:56] INFO: Selecting Catalog
[09:33:56] INFO: Using Catalog for LST 9-13
[09:33:56] INFO: Selecting Catalog
[09:33:56] INFO: Using Catalog for LST 9-13
[09:33:56] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:33:56] INFO: Selecting Catalog
[09:33:56] INFO: Using Catalog for LST 9-13
[09:33:56] INFO: Selecting Catalog
[09:33:56] INFO: Using Catalog for LST 9-13
[09:33:56] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:33:56] INFO: Selecting Catalog
[09:33:56] INFO: Using Catalog for LST 9-13
[09:33:56] INFO: Selecting Catalog
[09:33:56] INFO: Using Catalog for LST 9-13
[09:33:56] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:33:56] INFO: Selecting Catalog
[09:33:56] INFO: Using Catalog for LST 9-13
[09:33:56] INFO: Selecting Catalog
[09:33:56] INFO: Using Catalog for LST 9-13
[09:33:56] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:33:56] INFO: Selecting Catalog
[09:33:56] INFO: Using Catalog for LST 9-13
[09:33:56] INFO: Selecting Catalog
[09:33:56] INFO: Using Catalog for LST 9-13
[09:33:56] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:33:56] INFO: Selecting Catalog
[09:33:56] INFO: Using Catalog for LST 9-13
[09:33:56] INFO: Selecting Catalog
[09:33:56] INFO: Using Catalog for LST 9-13
[09:33:56] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:33:57] INFO: Selecting Catalog
[09:33:57] INFO: Using Catalog for LST 9-13
[09:33:57] INFO: Selecting Catalog
[09:33:57] INFO: Using Catalog for LST 9-13
[09:33:57] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:33:57] INFO: Selecting Catalog
[09:33:57] INFO: Using Catalog for LST 9-13
[09:33:57] INFO: Selecting Catalog
[09:33:57] INFO: Using Catalog for LST 9-13
[09:33:57] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:33:57] INFO: Selecting Catalog
[09:33:57] INFO: Using Catalog for LST 9-13
[09:33:57] INFO: Selecting Catalog
[09:33:57] INFO: Using Catalog for LST 9-13
[09:33:57] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:33:57] INFO: Selecting Catalog
[09:33:57] INFO: Using Catalog for LST 9-13
[09:33:57] INFO: Selecting Catalog
[09:33:57] INFO: Using Catalog for LST 9-13
[09:33:57] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:33:57] INFO: Selecting Catalog
[09:33:57] INFO: Using Catalog for LST 9-13
[09:33:57] INFO: Selecting Catalog
[09:33:57] INFO: Using Catalog for LST 9-13
[09:33:57] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:33:57] INFO: Selecting Catalog
[09:33:57] INFO: Using Catalog for LST 9-13
[09:33:57] INFO: Selecting Catalog
[09:33:57] INFO: Using Catalog for LST 9-13
[09:33:57] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:33:57] INFO: Selecting Catalog
[09:33:57] INFO: Using Catalog for LST 9-13
[09:33:57] INFO: Selecting Catalog
[09:33:57] INFO: Using Catalog for LST 9-13
[09:33:57] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:33:57] INFO: Selecting Catalog
[09:33:57] INFO: Using Catalog for LST 9-13
[09:33:57] INFO: Selecting Catalog
[09:33:57] INFO: Using Catalog for LST 9-13
[09:33:57] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:33:57] INFO: Selecting Catalog
[09:33:57] INFO: Using Catalog for LST 9-13
[09:33:57] INFO: Selecting Catalog
[09:33:57] INFO: Using Catalog for LST 9-13
[09:33:57] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:33:57] INFO: Selecting Catalog
[09:33:57] INFO: Using Catalog for LST 9-13
[09:33:57] INFO: Selecting Catalog
[09:33:57] INFO: Using Catalog for LST 9-13
[09:33:57] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:33:57] INFO: Selecting Catalog
[09:33:57] INFO: Using Catalog for LST 9-13
[09:33:57] INFO: Selecting Catalog
[09:33:57] INFO: Using Catalog for LST 9-13
[09:33:57] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:33:57] INFO: Selecting Catalog
[09:33:57] INFO: Using Catalog for LST 9-13
[09:33:57] INFO: Selecting Catalog
[09:33:57] INFO: Using Catalog for LST 9-13
[09:33:57] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:33:57] INFO: Selecting Catalog
[09:33:57] INFO: Using Catalog for LST 9-13
[09:33:57] INFO: Selecting Catalog
[09:33:57] INFO: Using Catalog for LST 9-13
[09:33:57] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:33:57] INFO: Selecting Catalog
[09:33:57] INFO: Using Catalog for LST 9-13
[09:33:57] INFO: Selecting Catalog
[09:33:57] INFO: Using Catalog for LST 9-13
[09:33:57] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:33:57] INFO: Selecting Catalog
[09:33:57] INFO: Using Catalog for LST 9-13
[09:33:57] INFO: Selecting Catalog
[09:33:57] INFO: Using Catalog for LST 9-13
[09:33:57] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:33:57] INFO: Selecting Catalog
[09:33:57] INFO: Using Catalog for LST 9-13
[09:33:57] INFO: Selecting Catalog
[09:33:57] INFO: Using Catalog for LST 9-13
[09:33:57] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:33:58] INFO: Selecting Catalog
[09:33:58] INFO: Using Catalog for LST 9-13
[09:33:58] INFO: Selecting Catalog
[09:33:58] INFO: Using Catalog for LST 9-13
[09:33:58] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:33:58] INFO: Selecting Catalog
[09:33:58] INFO: Using Catalog for LST 9-13
[09:33:58] INFO: Selecting Catalog
[09:33:58] INFO: Using Catalog for LST 9-13
[09:33:58] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:33:58] INFO: Selecting Catalog
[09:33:58] INFO: Using Catalog for LST 9-13
[09:33:58] INFO: Selecting Catalog
[09:33:58] INFO: Using Catalog for LST 9-13
[09:33:58] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:33:58] INFO: Selecting Catalog
[09:33:58] INFO: Using Catalog for LST 9-13
[09:33:58] INFO: Selecting Catalog
[09:33:58] INFO: Using Catalog for LST 9-13
[09:33:58] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:33:58] INFO: Selecting Catalog
[09:33:58] INFO: Using Catalog for LST 9-13
[09:33:58] INFO: Selecting Catalog
[09:33:58] INFO: Using Catalog for LST 9-13
[09:33:58] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:33:58] INFO: Selecting Catalog
[09:33:58] INFO: Using Catalog for LST 9-13
[09:33:58] INFO: Selecting Catalog
[09:33:58] INFO: Using Catalog for LST 9-13
[09:33:58] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:33:58] INFO: Selecting Catalog
[09:33:58] INFO: Using Catalog for LST 9-13
[09:33:58] INFO: Selecting Catalog
[09:33:58] INFO: Using Catalog for LST 9-13
[09:33:58] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:33:58] INFO: Selecting Catalog
[09:33:58] INFO: Using Catalog for LST 9-13
[09:33:58] INFO: Selecting Catalog
[09:33:58] INFO: Using Catalog for LST 9-13
[09:33:58] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:33:58] INFO: Selecting Catalog
[09:33:58] INFO: Using Catalog for LST 9-13
[09:33:58] INFO: Selecting Catalog
[09:33:58] INFO: Using Catalog for LST 9-13
[09:33:58] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:33:58] INFO: Selecting Catalog
[09:33:58] INFO: Using Catalog for LST 9-13
[09:33:58] INFO: Selecting Catalog
[09:33:58] INFO: Using Catalog for LST 9-13
[09:33:58] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:33:58] INFO: Selecting Catalog
[09:33:58] INFO: Using Catalog for LST 9-13
[09:33:58] INFO: Selecting Catalog
[09:33:58] INFO: Using Catalog for LST 9-13
[09:33:58] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:33:58] INFO: Selecting Catalog
[09:33:58] INFO: Using Catalog for LST 9-13
[09:33:58] INFO: Selecting Catalog
[09:33:58] INFO: Using Catalog for LST 9-13
[09:33:58] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:33:58] INFO: Selecting Catalog
[09:33:58] INFO: Using Catalog for LST 9-13
[09:33:58] INFO: Selecting Catalog
[09:33:58] INFO: Using Catalog for LST 9-13
[09:33:58] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:33:58] INFO: Selecting Catalog
[09:33:58] INFO: Using Catalog for LST 9-13
[09:33:58] INFO: Selecting Catalog
[09:33:58] INFO: Using Catalog for LST 9-13
[09:33:58] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:33:58] INFO: Selecting Catalog
[09:33:58] INFO: Using Catalog for LST 9-13
[09:33:58] INFO: Selecting Catalog
[09:33:58] INFO: Using Catalog for LST 9-13
[09:33:58] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:33:58] INFO: Selecting Catalog
[09:33:58] INFO: Using Catalog for LST 9-13
[09:33:58] INFO: Selecting Catalog
[09:33:58] INFO: Using Catalog for LST 9-13
[09:33:58] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:33:59] INFO: Selecting Catalog
[09:33:59] INFO: Using Catalog for LST 9-13
[09:33:59] INFO: Selecting Catalog
[09:33:59] INFO: Using Catalog for LST 9-13
[09:33:59] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:33:59] INFO: Selecting Catalog
[09:33:59] INFO: Using Catalog for LST 9-13
[09:33:59] INFO: Selecting Catalog
[09:33:59] INFO: Using Catalog for LST 9-13
[09:33:59] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
runSuccessful: True
[09:33:59] ******** End Scheduling Block
[09:33:59] ******** observer = OPERATOR, SB name = 15B287_operator, project ID = AGBT15B_287

how much log? 19641 id: 179193self.history: <gbt.turtle.database.History.History instance at 0x4956b00>self.history.connection: <gbt.turtle.database.TurtleConnection.TurtleConnection instance at 0x4956878>how much converted log? 19849 
#######################################################
 
 
#######################################################
 SCRIPT NUMBER 8, project:AGBT15B_287_40 
 179194 128 OPERATOR 10 Amber Bonsall 2016-01-10 09:34:15 obs_completed 
#######################################################
# test script to update catalog as you go...

########## CHANGE THESE ONLY #############
OnOffOnTime = 10 #minutes (change this to 12 to be in line with DSS scheduling)
obs_per_source = 3 #total observing time per source = OnOffOnTime * obs_per_source
h = Horizon(10.0) #minimum of 10 degrees elevation
h_up = Horizon(85.0) #maximum of 85 degrees due to keyhole
myOff = Offset("J2000",1.0,0.0,cosv=True)  # Off position relative to source
doFirstPointing = True #Setting to False will skip the first pointing
doFirstCal = True  #Setting to False will skip the first 3C calibrator OnOff scan
peak_every = 12 #peak/cal every 12 OnOffOn (every 2.5 hours)
peak_near_source = False #Do another peak when changing to new source
#####################################

######### NOTES ###############
# This script runs in blocks of On-Off-On position switching with
# the two outer 'on' scans sharing one 'off'
# Total on-source time = 20 minutes
# Length of one 'On' or 'Off' = 3 minutes 20 seconds
# Length of one On-Off-On = 10 minutes
# 3 On-Off-On blocks are needed per source (30 minutes total per source)

###### Timing
# It takes 34m to completely observe 1 source+overhead (9 track scans)

execfile("/home/astro-util/projects/15B287_operator/15B287_config.py")
execfile("/home/astro-util/projects/15B287_operator/15B287_utils.py")
Catalog(fluxcal)
Catalog(lband_pointing)

scanTime = OnOffOnTime * 20.0 #seconds
tdelta = DateTime.TimeDelta(minutes=OnOffOnTime)
obs_count = 0
doCal = doFirstCal
doPointing = doFirstPointing
project_obs = 0
old_catalog_name = 'dummy'
fullcat = '/home/astro-util/projects/15B287_operator/15B287_operator.cat'

Configure(config_1)

while project_obs < 100:
    mycat,altcal = select_my_catalog()
    if mycat == old_catalog_name:
        print 'SAME CATALOG HAS BEEN SELECTED: Using FULL catalog'
        mycat = fullcat
        altcal = '3C309_1'
    old_catalog_name = mycat
    c = Catalog(mycat)
    sources = c.keys()
    for source in sources:
        doBalance = True
        newPeak = True
        calibrator = c[source]["calibrator"]
        n_obs = int(float(c[source]["n_obs"]))
        obs_left = obs_per_source-n_obs
        obs_ok = obs_left > 0
        t_now = Now()
        if t_now != None and obs_ok:
            source_rise = h.GetRise(source)
            source_set  = h.GetSet(source)
            keyhole_rise = h_up.GetRise(source)
            keyhole_set = h_up.GetSet(source)
            if source_rise != None or keyhole_set != None:
                if source_set != None and keyhole_rise != None:
                    t_ok = ((t_now + tdelta) < source_set)
                    t_ok = t_ok and (t_now >= source_rise)
                    t_ok = t_ok and ((t_now + tdelta) < keyhole_rise)
                else:
                    t_ok = True
            else:
                t_ok = False
        else:
            t_ok = False

        source_ok = t_ok and obs_ok

        if source_ok:
            if doPointing == True:
                #check the calibrator is above the horizon
                keyhole_cal_rise = h_up.GetRise(calibrator)
                keyhole_cal_set = h_up.GetSet(calibrator)
                cal_rise = h.GetRise(calibrator)
                if cal_rise>t_now or keyhole_cal_set == None:
                    myCal = altcal #low circumpolar alternative
                    print 'Calibrator %s is too low: Using %s' %(calibrator,altcal)
                else:
                    if keyhole_cal_rise != None:
                        if (t_now+tdelta) >= keyhole_cal_rise:
                            print 'Calibrator %s is in keyhole: Using %s' %(calibrator,altcal)
                            myCal = altcal
                        else:
                            myCal = calibrator
                    else:
                        myCal = calibrator

                if obs_count == 0:
                    AutoPeakFocus(myCal)
                    #Break("Check Peak and Focus")
                else:
                    AutoPeak(myCal)
                Configure(config_1)
                doBalance = True
                doPointing = False

            if doCal:
                Slew(myCal)
                Balance()
                print 'Calibration scans (OnOff) :%s ' %(myCal)
                OnOff(myCal,myOff,120.0)
                doCal = False
                doBalance = True

            for i in range(obs_left):
                t_now = Now()   #check time ok again
                t_ok = False
                if t_now != None and keyhole_set != None:
                    if source_rise != None:
                        if source_set != None:
                            t_ok = ((t_now + tdelta) < source_set)
                            t_ok = t_ok and (t_now >= source_rise)
                            if keyhole_rise != None:
                                t_ok = t_ok and ((t_now+tdelta) < keyhole_rise)
                        else:
                            t_ok = True
                    else:
                        t_ok = False
                else:
                    t_ok = False

                if t_ok:
                    if peak_near_source and newPeak:
                        Slew(source)
                        AutoPeak()
                        Configure(config_1)
                        newPeak = False
                        doBalance = True
                    if doBalance:
                        Slew(source)
                        Balance()
                        doBalance = False

                    Comment("Starting on-source scan")
                    Track(source,None,scanTime)
                    Comment("Starting off-source scan")
                    Track(source,None,scanTime,fixedOffset=myOff)
                    Comment("Starting on-source scan")
                    Track(source,None,scanTime)
                    obs_count = obs_count + 1
                    obs_tot = obs_per_source+1-obs_left+i
                    print '%s: OBS COMPLETE = %s/%s' %(source,obs_tot,obs_per_source)
                    update_my_catalogs(source,obs_tot)

                    if obs_count % peak_every == 0:  #Cal/pointing interval
                        doCal = True
                        doPointing = True
        if source_ok and mycat == fullcat:
            break
    project_obs = project_obs+1

#######################################################
 LOG SESSION NUMBER 8 
[09:34:15] ******** Begin Scheduling Block
[09:34:15] ******** observer = OPERATOR, SB name = 15B287_operator, project ID = AGBT15B_287, date = 10 Jan 2016

[09:34:15] Configuring telescope.
[09:34:16]     Setting State: Activating
[09:34:17]     Setting State: Ready
[09:34:17]     Setting State: Activating
[09:34:18]     Setting State: Ready
[09:34:18] Default values are
[09:34:18] if3freq  =  [0, 0, 0]
[09:34:18] notchfilter  =  In
[09:34:18] polswitch  =  thru
[09:34:18] The bad devices are: 
[09:34:18] OpticalDriver5
[09:34:18] The bad devices are: 
[09:34:18] OpticalDriver5

[09:34:18] Checking telescope
[09:34:18] Configuration Complete
[09:34:18] INFO: Selecting Catalog
[09:34:18] INFO: Using Catalog for LST 9-13
[09:34:18] INFO: Selecting Catalog
[09:34:18] INFO: Using Catalog for LST 9-13
[09:34:18] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:34:18] Calibrator 3C48 is too low: Using 3C309_1
[09:34:19] Configuring telescope.
[09:34:19]     Setting State: Activating
[09:34:20]     Setting State: Ready
[09:34:20]     Setting State: Activating
[09:34:21]     Setting State: Ready
[09:34:21] Default values are
[09:34:21] if3freq  =  [0]
[09:34:21] notchfilter  =  In
[09:34:21] polswitch  =  thru
[09:34:21] The bad devices are: 
[09:34:21] OpticalDriver5

[09:34:21] Checking telescope
[09:34:21] Configuration Complete
[09:34:21] source : 3C309_1
               F1 : 1.4
               F2 : 32.0
               S22235 : 1.0
               S1400 : 7.5
               angsize : 1.5
               location : J2000 @ (14:59:07.58, 71:40:19.87)
[09:34:21] Slewing to source.
[09:34:22] In state Ready, waiting for state Activating
[09:34:22]     Setting State: Activating
[09:34:22] Detected state Activating
[09:34:22] In state Activating, waiting for state Ready
[09:34:35]     Setting State: Ready
[09:34:35] Detected state Ready
[09:34:35] Balancing IF system.
[09:34:35] Balancing IFRack
[09:34:35]     Setting State: Activating
[09:34:35]     Setting State: Ready
[09:34:37] the sampler values are:
[09:34:37] RF_power 1 : 0.9912109
[09:34:37] RF_power 2 : 0
[09:34:37] RF_power 3 : 1.079102
[09:34:37] RF_power 4 : 0.01464844
[09:34:37] RF_power 5 : 0.03417969
[09:34:37] RF_power 6 : 2.875977
[09:34:37] RF_power 7 : 0.4833984
[09:34:37] RF_power 8 : 0.02441406
[09:34:37] source : 3C309_1
               F1 : 1.4
               F2 : 32.0
               S22235 : 1.0
               S1400 : 7.5
               angsize : 1.5
               location : J2000 @ (14:59:07.58, 71:40:19.87)
[09:34:37] Peak: Subscan 1 of 4
[09:34:38] In state Ready, waiting for state Running
[09:34:38]     Setting State: Activating
[09:35:00]     Setting State: Committed
[09:35:02]     Setting State: Running
[09:35:02] Detected state Running
[09:35:02] *** Notice: This subscan will be numbered as scan #50 in your data reduction package.
[09:35:02] In state Running, waiting for state Ready
[09:35:32]     Setting State: Stopping
[09:35:38]     Setting State: Ready
[09:35:38] Detected state Ready
[09:35:38] Ygor Telescope: WaitForStopping
[09:35:38] Peak: Subscan 2 of 4
[09:35:38] In state Ready, waiting for state Running
[09:35:38]     Setting State: Activating
[09:35:47]     Setting State: Committed
[09:35:49]     Setting State: Running
[09:35:49] Detected state Running
[09:35:49] *** Notice: This subscan will be numbered as scan #51 in your data reduction package.
[09:35:49] In state Running, waiting for state Ready
[09:36:19]     Setting State: Stopping
[09:36:25]     Setting State: Ready
[09:36:25] Detected state Ready
[09:36:25] Ygor Telescope: WaitForStopping
[09:36:25] *** Updating antenna's pointing to az2=0.0186 and el=0.3222 arcmins

[09:36:25] Peak: Subscan 3 of 4
[09:36:26] In state Ready, waiting for state Running
[09:36:26]     Setting State: Activating
[09:36:46]     Setting State: Committed
[09:36:48]     Setting State: Running
[09:36:48] Detected state Running
[09:36:48] *** Notice: This subscan will be numbered as scan #52 in your data reduction package.
[09:36:48] In state Running, waiting for state Ready
[09:37:18]     Setting State: Stopping
[09:37:23]     Setting State: Ready
[09:37:23] Detected state Ready
[09:37:23] Ygor Telescope: WaitForStopping
[09:37:23] Peak: Subscan 4 of 4
[09:37:23] In state Ready, waiting for state Running
[09:37:23]     Setting State: Activating
[09:37:31]     Setting State: Committed
[09:37:33]     Setting State: Running
[09:37:33] Detected state Running
[09:37:33] *** Notice: This subscan will be numbered as scan #53 in your data reduction package.
[09:37:33] In state Running, waiting for state Ready
[09:38:03]     Setting State: Stopping
[09:38:07]     Setting State: Ready
[09:38:07] Detected state Ready
[09:38:07] Ygor Telescope: WaitForStopping
[09:38:08] . *** Updating antenna's pointing to az2=0.0186 and el=0.3128 arcmins

[09:38:09] source : 3C309_1
               F1 : 1.4
               F2 : 32.0
               S22235 : 1.0
               S1400 : 7.5
               angsize : 1.5
               location : J2000 @ (14:59:07.58, 71:40:19.87)
[09:38:09] Focus: Subscan 1 of 1
[09:38:09] In state Ready, waiting for state Running
[09:38:09]     Setting State: Activating
[09:38:35]     Setting State: Committed
[09:38:37]     Setting State: Running
[09:38:37] Detected state Running
[09:38:37] *** Notice: This subscan will be numbered as scan #54 in your data reduction package.
[09:38:37] In state Running, waiting for state Ready
[09:39:37]     Setting State: Stopping
[09:39:39]     Setting State: Ready
[09:39:39] Detected state Ready
[09:39:39] Ygor Telescope: WaitForStopping
[09:39:40] . *** Updating antenna's focus to -23.81 mm

[09:39:40] Configuring telescope.
[09:39:41]     Setting State: Activating
[09:39:42]     Setting State: Ready
[09:39:44]     Setting State: Activating
[09:39:45]     Setting State: Ready
[09:39:45] Default values are
[09:39:45] if3freq  =  [0, 0, 0]
[09:39:45] notchfilter  =  In
[09:39:45] polswitch  =  thru
[09:39:45] The bad devices are: 
[09:39:45] OpticalDriver5
[09:39:45] The bad devices are: 
[09:39:45] OpticalDriver5
[09:39:45] Waiting for the ConverterRack to finish activating
[09:39:45] . .
[09:39:45] Checking telescope
[09:39:45] Configuration Complete
[09:39:45] source : 3C309_1
               F1 : 1.4
               F2 : 32.0
               S22235 : 1.0
               S1400 : 7.5
               angsize : 1.5
               location : J2000 @ (14:59:07.58, 71:40:19.87)
[09:39:45] Slewing to source.
[09:39:45] In state Ready, waiting for state Activating
[09:39:45]     Setting State: Activating
[09:39:45] Detected state Activating
[09:39:45] In state Activating, waiting for state Ready
[09:40:12]     Setting State: Ready
[09:40:12] Detected state Ready
[09:40:12] Balancing IF system.
[09:40:12] Balancing IFRack
[09:40:12]     Setting State: Activating
[09:40:12]     Setting State: Ready
[09:40:14] the sampler values are:
[09:40:14] RF_power 1 : 2.949219
[09:40:14] RF_power 2 : 0.004882812
[09:40:14] RF_power 3 : 2.993164
[09:40:14] RF_power 4 : 0.01464844
[09:40:14] RF_power 5 : 0.03417969
[09:40:14] RF_power 6 : 2.915039
[09:40:14] RF_power 7 : 3.095703
[09:40:14] RF_power 8 : 0.02441406
[09:40:14] Balancing VEGAS
[09:40:14]     Setting State: Activating
[09:40:14]     Setting State: Ready
[09:40:15]     Setting State: Activating
[09:40:15]     Setting State: Ready
[09:40:16] Calibration scans (OnOff) :3C309_1 
[09:40:16] source : 3C309_1
               F1 : 1.4
               F2 : 32.0
               S22235 : 1.0
               S1400 : 7.5
               angsize : 1.5
               location : J2000 @ (14:59:07.58, 71:40:19.87)
[09:40:16] OnOff: Subscan 1 of 2
[09:40:17] In state Ready, waiting for state Running
[09:40:17]     Setting State: Activating
[09:40:22]     Setting State: Committed
[09:40:24]     Setting State: Running
[09:40:24] Detected state Running
[09:40:24] *** Notice: This subscan will be numbered as scan #55 in your data reduction package.
[09:40:24] In state Running, waiting for state Ready
[09:42:24]     Setting State: Stopping
[09:42:26]     Setting State: Ready
[09:42:26] Detected state Ready
[09:42:26] Ygor Telescope: WaitForStopping
[09:42:26] OnOff: Subscan 2 of 2
[09:42:26] In state Ready, waiting for state Running
[09:42:26]     Setting State: Activating
[09:42:39]     Setting State: Committed
[09:42:41]     Setting State: Running
[09:42:41] Detected state Running
[09:42:41] *** Notice: This subscan will be numbered as scan #56 in your data reduction package.
[09:42:41] In state Running, waiting for state Ready
[09:44:41]     Setting State: Stopping
[09:44:43]     Setting State: Ready
[09:44:43] Detected state Ready
[09:44:43] Ygor Telescope: WaitForStopping
[09:44:43] INFO: Selecting Catalog
[09:44:43] INFO: Using Catalog for LST 9-13
[09:44:43] INFO: Selecting Catalog
[09:44:43] INFO: Using Catalog for LST 9-13
[09:44:43] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:44:43] INFO: Selecting Catalog
[09:44:43] INFO: Using Catalog for LST 9-13
[09:44:43] INFO: Selecting Catalog
[09:44:43] INFO: Using Catalog for LST 9-13
[09:44:43] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:44:43] INFO: Selecting Catalog
[09:44:43] INFO: Using Catalog for LST 9-13
[09:44:43] INFO: Selecting Catalog
[09:44:43] INFO: Using Catalog for LST 9-13
[09:44:43] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:44:43] INFO: Selecting Catalog
[09:44:43] INFO: Using Catalog for LST 9-13
[09:44:43] INFO: Selecting Catalog
[09:44:43] INFO: Using Catalog for LST 9-13
[09:44:43] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:44:43] INFO: Selecting Catalog
[09:44:43] INFO: Using Catalog for LST 9-13
[09:44:43] INFO: Selecting Catalog
[09:44:43] INFO: Using Catalog for LST 9-13
[09:44:43] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:44:43] INFO: Selecting Catalog
[09:44:43] INFO: Using Catalog for LST 9-13
[09:44:43] INFO: Selecting Catalog
[09:44:43] INFO: Using Catalog for LST 9-13
[09:44:43] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:44:43] INFO: Selecting Catalog
[09:44:43] INFO: Using Catalog for LST 9-13
[09:44:43] INFO: Selecting Catalog
[09:44:43] INFO: Using Catalog for LST 9-13
[09:44:43] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:44:43] INFO: Selecting Catalog
[09:44:43] INFO: Using Catalog for LST 9-13
[09:44:43] INFO: Selecting Catalog
[09:44:43] INFO: Using Catalog for LST 9-13
[09:44:43] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:44:43] INFO: Selecting Catalog
[09:44:43] INFO: Using Catalog for LST 9-13
[09:44:43] INFO: Selecting Catalog
[09:44:43] INFO: Using Catalog for LST 9-13
[09:44:43] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:44:43] INFO: Selecting Catalog
[09:44:43] INFO: Using Catalog for LST 9-13
[09:44:43] INFO: Selecting Catalog
[09:44:43] INFO: Using Catalog for LST 9-13
[09:44:43] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:44:43] INFO: Selecting Catalog
[09:44:43] INFO: Using Catalog for LST 9-13
[09:44:43] INFO: Selecting Catalog
[09:44:43] INFO: Using Catalog for LST 9-13
[09:44:43] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:44:43] INFO: Selecting Catalog
[09:44:43] INFO: Using Catalog for LST 9-13
[09:44:43] INFO: Selecting Catalog
[09:44:43] INFO: Using Catalog for LST 9-13
[09:44:43] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:44:43] INFO: Selecting Catalog
[09:44:43] INFO: Using Catalog for LST 9-13
[09:44:43] INFO: Selecting Catalog
[09:44:43] INFO: Using Catalog for LST 9-13
[09:44:43] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:44:43] INFO: Selecting Catalog
[09:44:43] INFO: Using Catalog for LST 9-13
[09:44:43] INFO: Selecting Catalog
[09:44:43] INFO: Using Catalog for LST 9-13
[09:44:43] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:44:43] INFO: Selecting Catalog
[09:44:43] INFO: Using Catalog for LST 9-13
[09:44:43] INFO: Selecting Catalog
[09:44:43] INFO: Using Catalog for LST 9-13
[09:44:43] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:44:44] INFO: Selecting Catalog
[09:44:44] INFO: Using Catalog for LST 9-13
[09:44:44] INFO: Selecting Catalog
[09:44:44] INFO: Using Catalog for LST 9-13
[09:44:44] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:44:44] INFO: Selecting Catalog
[09:44:44] INFO: Using Catalog for LST 9-13
[09:44:44] INFO: Selecting Catalog
[09:44:44] INFO: Using Catalog for LST 9-13
[09:44:44] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:44:44] INFO: Selecting Catalog
[09:44:44] INFO: Using Catalog for LST 9-13
[09:44:44] INFO: Selecting Catalog
[09:44:44] INFO: Using Catalog for LST 9-13
[09:44:44] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:44:44] INFO: Selecting Catalog
[09:44:44] INFO: Using Catalog for LST 9-13
[09:44:44] INFO: Selecting Catalog
[09:44:44] INFO: Using Catalog for LST 9-13
[09:44:44] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:44:44] INFO: Selecting Catalog
[09:44:44] INFO: Using Catalog for LST 9-13
[09:44:44] INFO: Selecting Catalog
[09:44:44] INFO: Using Catalog for LST 9-13
[09:44:44] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:44:44] INFO: Selecting Catalog
[09:44:44] INFO: Using Catalog for LST 9-13
[09:44:44] INFO: Selecting Catalog
[09:44:44] INFO: Using Catalog for LST 9-13
[09:44:44] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:44:44] INFO: Selecting Catalog
[09:44:44] INFO: Using Catalog for LST 9-13
[09:44:44] INFO: Selecting Catalog
[09:44:44] INFO: Using Catalog for LST 9-13
[09:44:44] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:44:44] INFO: Selecting Catalog
[09:44:44] INFO: Using Catalog for LST 9-13
[09:44:44] INFO: Selecting Catalog
[09:44:44] INFO: Using Catalog for LST 9-13
[09:44:44] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:44:44] INFO: Selecting Catalog
[09:44:44] INFO: Using Catalog for LST 9-13
[09:44:44] INFO: Selecting Catalog
[09:44:44] INFO: Using Catalog for LST 9-13
[09:44:44] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:44:44] INFO: Selecting Catalog
[09:44:44] INFO: Using Catalog for LST 9-13
[09:44:44] INFO: Selecting Catalog
[09:44:44] INFO: Using Catalog for LST 9-13
[09:44:44] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:44:44] INFO: Selecting Catalog
[09:44:44] INFO: Using Catalog for LST 9-13
[09:44:44] INFO: Selecting Catalog
[09:44:44] INFO: Using Catalog for LST 9-13
[09:44:44] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:44:44] INFO: Selecting Catalog
[09:44:44] INFO: Using Catalog for LST 9-13
[09:44:44] INFO: Selecting Catalog
[09:44:44] INFO: Using Catalog for LST 9-13
[09:44:44] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:44:44] INFO: Selecting Catalog
[09:44:44] INFO: Using Catalog for LST 9-13
[09:44:44] INFO: Selecting Catalog
[09:44:44] INFO: Using Catalog for LST 9-13
[09:44:44] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:44:44] INFO: Selecting Catalog
[09:44:44] INFO: Using Catalog for LST 9-13
[09:44:44] INFO: Selecting Catalog
[09:44:44] INFO: Using Catalog for LST 9-13
[09:44:44] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:44:44] INFO: Selecting Catalog
[09:44:44] INFO: Using Catalog for LST 9-13
[09:44:44] INFO: Selecting Catalog
[09:44:44] INFO: Using Catalog for LST 9-13
[09:44:44] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:44:45] INFO: Selecting Catalog
[09:44:45] INFO: Using Catalog for LST 9-13
[09:44:45] INFO: Selecting Catalog
[09:44:45] INFO: Using Catalog for LST 9-13
[09:44:45] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:44:45] INFO: Selecting Catalog
[09:44:45] INFO: Using Catalog for LST 9-13
[09:44:45] INFO: Selecting Catalog
[09:44:45] INFO: Using Catalog for LST 9-13
[09:44:45] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:44:45] INFO: Selecting Catalog
[09:44:45] INFO: Using Catalog for LST 9-13
[09:44:45] INFO: Selecting Catalog
[09:44:45] INFO: Using Catalog for LST 9-13
[09:44:45] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:44:45] INFO: Selecting Catalog
[09:44:45] INFO: Using Catalog for LST 9-13
[09:44:45] INFO: Selecting Catalog
[09:44:45] INFO: Using Catalog for LST 9-13
[09:44:45] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:44:45] INFO: Selecting Catalog
[09:44:45] INFO: Using Catalog for LST 9-13
[09:44:45] INFO: Selecting Catalog
[09:44:45] INFO: Using Catalog for LST 9-13
[09:44:45] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:44:45] INFO: Selecting Catalog
[09:44:45] INFO: Using Catalog for LST 9-13
[09:44:45] INFO: Selecting Catalog
[09:44:45] INFO: Using Catalog for LST 9-13
[09:44:45] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:44:45] INFO: Selecting Catalog
[09:44:45] INFO: Using Catalog for LST 9-13
[09:44:45] INFO: Selecting Catalog
[09:44:45] INFO: Using Catalog for LST 9-13
[09:44:45] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:44:45] INFO: Selecting Catalog
[09:44:45] INFO: Using Catalog for LST 9-13
[09:44:45] INFO: Selecting Catalog
[09:44:45] INFO: Using Catalog for LST 9-13
[09:44:45] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:44:45] INFO: Selecting Catalog
[09:44:45] INFO: Using Catalog for LST 9-13
[09:44:45] INFO: Selecting Catalog
[09:44:45] INFO: Using Catalog for LST 9-13
[09:44:45] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:44:45] INFO: Selecting Catalog
[09:44:45] INFO: Using Catalog for LST 9-13
[09:44:45] INFO: Selecting Catalog
[09:44:45] INFO: Using Catalog for LST 9-13
[09:44:45] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:44:45] INFO: Selecting Catalog
[09:44:45] INFO: Using Catalog for LST 9-13
[09:44:45] INFO: Selecting Catalog
[09:44:45] INFO: Using Catalog for LST 9-13
[09:44:45] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:44:45] INFO: Selecting Catalog
[09:44:45] INFO: Using Catalog for LST 9-13
[09:44:45] INFO: Selecting Catalog
[09:44:45] INFO: Using Catalog for LST 9-13
[09:44:45] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:44:45] INFO: Selecting Catalog
[09:44:45] INFO: Using Catalog for LST 9-13
[09:44:45] INFO: Selecting Catalog
[09:44:45] INFO: Using Catalog for LST 9-13
[09:44:45] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:44:45] INFO: Selecting Catalog
[09:44:45] INFO: Using Catalog for LST 9-13
[09:44:45] INFO: Selecting Catalog
[09:44:45] INFO: Using Catalog for LST 9-13
[09:44:45] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:44:45] INFO: Selecting Catalog
[09:44:45] INFO: Using Catalog for LST 9-13
[09:44:45] INFO: Selecting Catalog
[09:44:45] INFO: Using Catalog for LST 9-13
[09:44:45] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:44:45] INFO: Selecting Catalog
[09:44:45] INFO: Using Catalog for LST 9-13
[09:44:45] INFO: Selecting Catalog
[09:44:45] INFO: Using Catalog for LST 9-13
[09:44:45] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:44:45] INFO: Selecting Catalog
[09:44:45] INFO: Using Catalog for LST 9-13
[09:44:45] INFO: Selecting Catalog
[09:44:45] INFO: Using Catalog for LST 9-13
[09:44:45] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:44:46] INFO: Selecting Catalog
[09:44:46] INFO: Using Catalog for LST 9-13
[09:44:46] INFO: Selecting Catalog
[09:44:46] INFO: Using Catalog for LST 9-13
[09:44:46] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:44:46] INFO: Selecting Catalog
[09:44:46] INFO: Using Catalog for LST 9-13
[09:44:46] INFO: Selecting Catalog
[09:44:46] INFO: Using Catalog for LST 9-13
[09:44:46] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
runSuccessful: True
[09:44:46] ******** End Scheduling Block
[09:44:46] ******** observer = OPERATOR, SB name = 15B287_operator, project ID = AGBT15B_287

how much log? 19641 id: 179194self.history: <gbt.turtle.database.History.History instance at 0x4956b00>self.history.connection: <gbt.turtle.database.TurtleConnection.TurtleConnection instance at 0x4956878>how much converted log? 19849 
#######################################################
 
 
#######################################################
 SCRIPT NUMBER 9, project:AGBT15B_287_40 
 179195 128 OPERATOR 10 Amber Bonsall 2016-01-10 09:44:48 obs_completed 
#######################################################
# test script to update catalog as you go...

########## CHANGE THESE ONLY #############
OnOffOnTime = 10 #minutes (change this to 12 to be in line with DSS scheduling)
obs_per_source = 3 #total observing time per source = OnOffOnTime * obs_per_source
h = Horizon(10.0) #minimum of 10 degrees elevation
h_up = Horizon(85.0) #maximum of 85 degrees due to keyhole
myOff = Offset("J2000",1.0,0.0,cosv=True)  # Off position relative to source
doFirstPointing = True #Setting to False will skip the first pointing
doFirstCal = True  #Setting to False will skip the first 3C calibrator OnOff scan
peak_every = 12 #peak/cal every 12 OnOffOn (every 2.5 hours)
peak_near_source = False #Do another peak when changing to new source
#####################################

######### NOTES ###############
# This script runs in blocks of On-Off-On position switching with
# the two outer 'on' scans sharing one 'off'
# Total on-source time = 20 minutes
# Length of one 'On' or 'Off' = 3 minutes 20 seconds
# Length of one On-Off-On = 10 minutes
# 3 On-Off-On blocks are needed per source (30 minutes total per source)

###### Timing
# It takes 34m to completely observe 1 source+overhead (9 track scans)

execfile("/home/astro-util/projects/15B287_operator/15B287_config.py")
execfile("/home/astro-util/projects/15B287_operator/15B287_utils.py")
Catalog(fluxcal)
Catalog(lband_pointing)

scanTime = OnOffOnTime * 20.0 #seconds
tdelta = DateTime.TimeDelta(minutes=OnOffOnTime)
obs_count = 0
doCal = doFirstCal
doPointing = doFirstPointing
project_obs = 0
old_catalog_name = 'dummy'
fullcat = '/home/astro-util/projects/15B287_operator/15B287_operator.cat'

Configure(config_1)

while project_obs < 100:
    mycat,altcal = select_my_catalog()
    if mycat == old_catalog_name:
        print 'SAME CATALOG HAS BEEN SELECTED: Using FULL catalog'
        mycat = fullcat
        altcal = '3C309_1'
    old_catalog_name = mycat
    c = Catalog(mycat)
    sources = c.keys()
    for source in sources:
        doBalance = True
        newPeak = True
        calibrator = c[source]["calibrator"]
        n_obs = int(float(c[source]["n_obs"]))
        obs_left = obs_per_source-n_obs
        obs_ok = obs_left > 0
        t_now = Now()
        if t_now != None and obs_ok:
            source_rise = h.GetRise(source)
            source_set  = h.GetSet(source)
            keyhole_rise = h_up.GetRise(source)
            keyhole_set = h_up.GetSet(source)
            if source_rise != None or keyhole_set != None:
                if source_set != None and keyhole_rise != None:
                    t_ok = ((t_now + tdelta) < source_set)
                    t_ok = t_ok and (t_now >= source_rise)
                    t_ok = t_ok and ((t_now + tdelta) < keyhole_rise)
                else:
                    t_ok = True
            else:
                t_ok = False
        else:
            t_ok = False

        source_ok = t_ok and obs_ok

        if source_ok:
            if doPointing == True:
                #check the calibrator is above the horizon
                keyhole_cal_rise = h_up.GetRise(calibrator)
                keyhole_cal_set = h_up.GetSet(calibrator)
                cal_rise = h.GetRise(calibrator)
                if cal_rise>t_now or keyhole_cal_set == None:
                    myCal = altcal #low circumpolar alternative
                    print 'Calibrator %s is too low: Using %s' %(calibrator,altcal)
                else:
                    if keyhole_cal_rise != None:
                        if (t_now+tdelta) >= keyhole_cal_rise:
                            print 'Calibrator %s is in keyhole: Using %s' %(calibrator,altcal)
                            myCal = altcal
                        else:
                            myCal = calibrator
                    else:
                        myCal = calibrator

                if obs_count == 0:
                    AutoPeakFocus(myCal)
                    #Break("Check Peak and Focus")
                else:
                    AutoPeak(myCal)
                Configure(config_1)
                doBalance = True
                doPointing = False

            if doCal:
                Slew(myCal)
                Balance()
                print 'Calibration scans (OnOff) :%s ' %(myCal)
                OnOff(myCal,myOff,120.0)
                doCal = False
                doBalance = True

            for i in range(obs_left):
                t_now = Now()   #check time ok again
                t_ok = False
                if t_now != None and keyhole_set != None:
                    if source_rise != None:
                        if source_set != None:
                            t_ok = ((t_now + tdelta) < source_set)
                            t_ok = t_ok and (t_now >= source_rise)
                            if keyhole_rise != None:
                                t_ok = t_ok and ((t_now+tdelta) < keyhole_rise)
                        else:
                            t_ok = True
                    else:
                        t_ok = False
                else:
                    t_ok = False

                if t_ok:
                    if peak_near_source and newPeak:
                        Slew(source)
                        AutoPeak()
                        Configure(config_1)
                        newPeak = False
                        doBalance = True
                    if doBalance:
                        Slew(source)
                        Balance()
                        doBalance = False

                    Comment("Starting on-source scan")
                    Track(source,None,scanTime)
                    Comment("Starting off-source scan")
                    Track(source,None,scanTime,fixedOffset=myOff)
                    Comment("Starting on-source scan")
                    Track(source,None,scanTime)
                    obs_count = obs_count + 1
                    obs_tot = obs_per_source+1-obs_left+i
                    print '%s: OBS COMPLETE = %s/%s' %(source,obs_tot,obs_per_source)
                    update_my_catalogs(source,obs_tot)

                    if obs_count % peak_every == 0:  #Cal/pointing interval
                        doCal = True
                        doPointing = True
        if source_ok and mycat == fullcat:
            break
    project_obs = project_obs+1

#######################################################
 LOG SESSION NUMBER 9 
[09:44:48] ******** Begin Scheduling Block
[09:44:48] ******** observer = OPERATOR, SB name = 15B287_operator, project ID = AGBT15B_287, date = 10 Jan 2016

[09:44:48] Configuring telescope.
[09:44:48]     Setting State: Activating
[09:44:49]     Setting State: Ready
[09:44:49]     Setting State: Activating
[09:44:50]     Setting State: Ready
[09:44:50] Default values are
[09:44:50] if3freq  =  [0, 0, 0]
[09:44:50] notchfilter  =  In
[09:44:50] polswitch  =  thru
[09:44:50] The bad devices are: 
[09:44:50] OpticalDriver5
[09:44:50] The bad devices are: 
[09:44:50] OpticalDriver5

[09:44:50] Checking telescope
[09:44:50] Configuration Complete
[09:44:50] INFO: Selecting Catalog
[09:44:50] INFO: Using Catalog for LST 9-13
[09:44:50] INFO: Selecting Catalog
[09:44:50] INFO: Using Catalog for LST 9-13
[09:44:50] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:44:51] Calibrator 3C48 is too low: Using 3C309_1
[09:44:51] Configuring telescope.
[09:44:51]     Setting State: Activating
[09:44:53]     Setting State: Ready
[09:44:55]     Setting State: Activating
[09:44:56]     Setting State: Ready
[09:44:56] Default values are
[09:44:56] if3freq  =  [0]
[09:44:56] notchfilter  =  In
[09:44:56] polswitch  =  thru
[09:44:56] The bad devices are: 
[09:44:56] OpticalDriver5
[09:44:56] Waiting for the LO1 to finish activating
[09:44:56] . .
[09:44:56] Checking telescope
[09:44:56] Configuration Complete
[09:44:56] source : 3C309_1
               F1 : 1.4
               F2 : 32.0
               S22235 : 1.0
               S1400 : 7.5
               angsize : 1.5
               location : J2000 @ (14:59:07.58, 71:40:19.87)
[09:44:56] Slewing to source.
[09:44:56] In state Ready, waiting for state Activating
[09:44:56]     Setting State: Activating
[09:44:56] Detected state Activating
[09:44:56] In state Activating, waiting for state Ready
[09:45:09]     Setting State: Ready
[09:45:09] Detected state Ready
[09:45:09] Balancing IF system.
[09:45:09] Balancing IFRack
[09:45:09]     Setting State: Activating
[09:45:09]     Setting State: Ready
[09:45:11] the sampler values are:
[09:45:11] RF_power 1 : 1.005859
[09:45:11] RF_power 2 : 0.004882812
[09:45:11] RF_power 3 : 1.079102
[09:45:11] RF_power 4 : 0.01464844
[09:45:11] RF_power 5 : 0.03417969
[09:45:11] RF_power 6 : 2.890625
[09:45:11] RF_power 7 : 0.4785156
[09:45:11] RF_power 8 : 0.01953125
[09:45:11] source : 3C309_1
               F1 : 1.4
               F2 : 32.0
               S22235 : 1.0
               S1400 : 7.5
               angsize : 1.5
               location : J2000 @ (14:59:07.58, 71:40:19.87)
[09:45:11] Peak: Subscan 1 of 4
[09:45:12] In state Ready, waiting for state Running
[09:45:12]     Setting State: Activating
[09:45:35]     Setting State: Committed
[09:45:37]     Setting State: Running
[09:45:37] Detected state Running
[09:45:37] *** Notice: This subscan will be numbered as scan #57 in your data reduction package.
[09:45:37] In state Running, waiting for state Ready
[09:46:07]     Setting State: Stopping
[09:46:13]     Setting State: Ready
[09:46:13] Detected state Ready
[09:46:13] Ygor Telescope: WaitForStopping
[09:46:13] Peak: Subscan 2 of 4
[09:46:13] In state Ready, waiting for state Running
[09:46:13]     Setting State: Activating
[09:46:21]     Setting State: Committed
[09:46:23]     Setting State: Running
[09:46:23] Detected state Running
[09:46:23] *** Notice: This subscan will be numbered as scan #58 in your data reduction package.
[09:46:23] In state Running, waiting for state Ready
[09:46:53]     Setting State: Stopping
[09:46:59]     Setting State: Ready
[09:46:59] Detected state Ready
[09:46:59] Ygor Telescope: WaitForStopping
[09:46:59] *** Updating antenna's pointing to az2=0.0375 and el=0.3128 arcmins

[09:46:59] Peak: Subscan 3 of 4
[09:47:00] In state Ready, waiting for state Running
[09:47:00]     Setting State: Activating
[09:47:20]     Setting State: Committed
[09:47:22]     Setting State: Running
[09:47:22] Detected state Running
[09:47:22] *** Notice: This subscan will be numbered as scan #59 in your data reduction package.
[09:47:22] In state Running, waiting for state Ready
[09:47:52]     Setting State: Stopping
[09:47:57]     Setting State: Ready
[09:47:57] Detected state Ready
[09:47:57] Ygor Telescope: WaitForStopping
[09:47:57] Peak: Subscan 4 of 4
[09:47:57] In state Ready, waiting for state Running
[09:47:57]     Setting State: Activating
[09:48:05]     Setting State: Committed
[09:48:07]     Setting State: Running
[09:48:07] Detected state Running
[09:48:07] *** Notice: This subscan will be numbered as scan #60 in your data reduction package.
[09:48:07] In state Running, waiting for state Ready
[09:48:37]     Setting State: Stopping
[09:48:41]     Setting State: Ready
[09:48:41] Detected state Ready
[09:48:41] Ygor Telescope: WaitForStopping
[09:48:42] . *** Updating antenna's pointing to az2=0.0375 and el=0.3302 arcmins

[09:48:43] source : 3C309_1
               F1 : 1.4
               F2 : 32.0
               S22235 : 1.0
               S1400 : 7.5
               angsize : 1.5
               location : J2000 @ (14:59:07.58, 71:40:19.87)
[09:48:43] Focus: Subscan 1 of 1
[09:48:43] In state Ready, waiting for state Running
[09:48:43]     Setting State: Activating
[09:49:09]     Setting State: Committed
[09:49:11]     Setting State: Running
[09:49:11] Detected state Running
[09:49:11] *** Notice: This subscan will be numbered as scan #61 in your data reduction package.
[09:49:11] In state Running, waiting for state Ready
[09:50:11]     Setting State: Stopping
[09:50:13]     Setting State: Ready
[09:50:13] Detected state Ready
[09:50:13] Ygor Telescope: WaitForStopping
[09:50:14] . *** Updating antenna's focus to -29.16 mm

[09:50:15] Configuring telescope.
[09:50:15]     Setting State: Activating
[09:50:16]     Setting State: Ready
[09:50:18]     Setting State: Activating
[09:50:19]     Setting State: Ready
[09:50:19] Default values are
[09:50:19] if3freq  =  [0, 0, 0]
[09:50:19] notchfilter  =  In
[09:50:19] polswitch  =  thru
[09:50:19] The bad devices are: 
[09:50:19] OpticalDriver5
[09:50:19] The bad devices are: 
[09:50:19] OpticalDriver5
[09:50:19] Waiting for the ConverterRack to finish activating
[09:50:19] . .
[09:50:19] Checking telescope
[09:50:19] Configuration Complete
[09:50:19] source : 3C309_1
               F1 : 1.4
               F2 : 32.0
               S22235 : 1.0
               S1400 : 7.5
               angsize : 1.5
               location : J2000 @ (14:59:07.58, 71:40:19.87)
[09:50:19] Slewing to source.
[09:50:20] In state Ready, waiting for state Activating
[09:50:20]     Setting State: Activating
[09:50:20] Detected state Activating
[09:50:20] In state Activating, waiting for state Ready
[09:50:47]     Setting State: Ready
[09:50:47] Detected state Ready
[09:50:47] Balancing IF system.
[09:50:48] Balancing IFRack
[09:50:48]     Setting State: Activating
[09:50:48]     Setting State: Ready
[09:50:50] the sampler values are:
[09:50:50] RF_power 1 : 3.061523
[09:50:50] RF_power 2 : 0.009765625
[09:50:50] RF_power 3 : 3.071289
[09:50:50] RF_power 4 : 0.01464844
[09:50:50] RF_power 5 : 0.03417969
[09:50:50] RF_power 6 : 2.993164
[09:50:50] RF_power 7 : 3.15918
[09:50:50] RF_power 8 : 0.02441406
[09:50:50] Balancing VEGAS
[09:50:50]     Setting State: Activating
[09:50:50]     Setting State: Ready
[09:50:51]     Setting State: Activating
[09:50:51]     Setting State: Ready
[09:50:52] Calibration scans (OnOff) :3C309_1 
[09:50:52] source : 3C309_1
               F1 : 1.4
               F2 : 32.0
               S22235 : 1.0
               S1400 : 7.5
               angsize : 1.5
               location : J2000 @ (14:59:07.58, 71:40:19.87)
[09:50:52] OnOff: Subscan 1 of 2
[09:50:52] In state Ready, waiting for state Running
[09:50:52]     Setting State: Activating
[09:50:57]     Setting State: Committed
[09:50:59]     Setting State: Running
[09:50:59] Detected state Running
[09:50:59] *** Notice: This subscan will be numbered as scan #62 in your data reduction package.
[09:50:59] In state Running, waiting for state Ready
[09:52:59]     Setting State: Stopping
[09:53:01]     Setting State: Ready
[09:53:01] Detected state Ready
[09:53:01] Ygor Telescope: WaitForStopping
[09:53:01] OnOff: Subscan 2 of 2
[09:53:01] In state Ready, waiting for state Running
[09:53:01]     Setting State: Activating
[09:53:14]     Setting State: Committed
[09:53:16]     Setting State: Running
[09:53:16] Detected state Running
[09:53:16] *** Notice: This subscan will be numbered as scan #63 in your data reduction package.
[09:53:16] In state Running, waiting for state Ready
[09:55:16]     Setting State: Stopping
[09:55:18]     Setting State: Ready
[09:55:18] Detected state Ready
[09:55:18] Ygor Telescope: WaitForStopping
[09:55:18] INFO: Selecting Catalog
[09:55:18] INFO: Using Catalog for LST 9-13
[09:55:18] INFO: Selecting Catalog
[09:55:18] INFO: Using Catalog for LST 9-13
[09:55:18] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:55:18] INFO: Selecting Catalog
[09:55:18] INFO: Using Catalog for LST 9-13
[09:55:18] INFO: Selecting Catalog
[09:55:18] INFO: Using Catalog for LST 9-13
[09:55:18] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:55:18] INFO: Selecting Catalog
[09:55:18] INFO: Using Catalog for LST 9-13
[09:55:18] INFO: Selecting Catalog
[09:55:18] INFO: Using Catalog for LST 9-13
[09:55:18] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:55:18] INFO: Selecting Catalog
[09:55:18] INFO: Using Catalog for LST 9-13
[09:55:18] INFO: Selecting Catalog
[09:55:18] INFO: Using Catalog for LST 9-13
[09:55:18] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:55:18] INFO: Selecting Catalog
[09:55:18] INFO: Using Catalog for LST 9-13
[09:55:18] INFO: Selecting Catalog
[09:55:18] INFO: Using Catalog for LST 9-13
[09:55:18] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:55:18] INFO: Selecting Catalog
[09:55:18] INFO: Using Catalog for LST 9-13
[09:55:18] INFO: Selecting Catalog
[09:55:18] INFO: Using Catalog for LST 9-13
[09:55:18] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:55:18] INFO: Selecting Catalog
[09:55:18] INFO: Using Catalog for LST 9-13
[09:55:18] INFO: Selecting Catalog
[09:55:18] INFO: Using Catalog for LST 9-13
[09:55:18] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:55:18] INFO: Selecting Catalog
[09:55:18] INFO: Using Catalog for LST 9-13
[09:55:18] INFO: Selecting Catalog
[09:55:18] INFO: Using Catalog for LST 9-13
[09:55:18] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:55:18] INFO: Selecting Catalog
[09:55:18] INFO: Using Catalog for LST 9-13
[09:55:18] INFO: Selecting Catalog
[09:55:18] INFO: Using Catalog for LST 9-13
[09:55:18] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:55:18] INFO: Selecting Catalog
[09:55:18] INFO: Using Catalog for LST 9-13
[09:55:18] INFO: Selecting Catalog
[09:55:18] INFO: Using Catalog for LST 9-13
[09:55:18] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:55:18] INFO: Selecting Catalog
[09:55:18] INFO: Using Catalog for LST 9-13
[09:55:18] INFO: Selecting Catalog
[09:55:18] INFO: Using Catalog for LST 9-13
[09:55:18] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:55:18] INFO: Selecting Catalog
[09:55:18] INFO: Using Catalog for LST 9-13
[09:55:18] INFO: Selecting Catalog
[09:55:18] INFO: Using Catalog for LST 9-13
[09:55:18] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:55:18] INFO: Selecting Catalog
[09:55:18] INFO: Using Catalog for LST 9-13
[09:55:18] INFO: Selecting Catalog
[09:55:18] INFO: Using Catalog for LST 9-13
[09:55:18] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:55:18] INFO: Selecting Catalog
[09:55:18] INFO: Using Catalog for LST 9-13
[09:55:18] INFO: Selecting Catalog
[09:55:18] INFO: Using Catalog for LST 9-13
[09:55:18] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:55:18] INFO: Selecting Catalog
[09:55:18] INFO: Using Catalog for LST 9-13
[09:55:18] INFO: Selecting Catalog
[09:55:18] INFO: Using Catalog for LST 9-13
[09:55:18] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:55:19] INFO: Selecting Catalog
[09:55:19] INFO: Using Catalog for LST 9-13
[09:55:19] INFO: Selecting Catalog
[09:55:19] INFO: Using Catalog for LST 9-13
[09:55:19] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:55:19] INFO: Selecting Catalog
[09:55:19] INFO: Using Catalog for LST 9-13
[09:55:19] INFO: Selecting Catalog
[09:55:19] INFO: Using Catalog for LST 9-13
[09:55:19] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:55:19] INFO: Selecting Catalog
[09:55:19] INFO: Using Catalog for LST 9-13
[09:55:19] INFO: Selecting Catalog
[09:55:19] INFO: Using Catalog for LST 9-13
[09:55:19] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:55:19] INFO: Selecting Catalog
[09:55:19] INFO: Using Catalog for LST 9-13
[09:55:19] INFO: Selecting Catalog
[09:55:19] INFO: Using Catalog for LST 9-13
[09:55:19] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:55:19] INFO: Selecting Catalog
[09:55:19] INFO: Using Catalog for LST 9-13
[09:55:19] INFO: Selecting Catalog
[09:55:19] INFO: Using Catalog for LST 9-13
[09:55:19] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:55:19] INFO: Selecting Catalog
[09:55:19] INFO: Using Catalog for LST 9-13
[09:55:19] INFO: Selecting Catalog
[09:55:19] INFO: Using Catalog for LST 9-13
[09:55:19] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:55:19] INFO: Selecting Catalog
[09:55:19] INFO: Using Catalog for LST 9-13
[09:55:19] INFO: Selecting Catalog
[09:55:19] INFO: Using Catalog for LST 9-13
[09:55:19] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:55:19] INFO: Selecting Catalog
[09:55:19] INFO: Using Catalog for LST 9-13
[09:55:19] INFO: Selecting Catalog
[09:55:19] INFO: Using Catalog for LST 9-13
[09:55:19] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:55:19] INFO: Selecting Catalog
[09:55:19] INFO: Using Catalog for LST 9-13
[09:55:19] INFO: Selecting Catalog
[09:55:19] INFO: Using Catalog for LST 9-13
[09:55:19] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:55:19] INFO: Selecting Catalog
[09:55:19] INFO: Using Catalog for LST 9-13
[09:55:19] INFO: Selecting Catalog
[09:55:19] INFO: Using Catalog for LST 9-13
[09:55:19] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:55:19] INFO: Selecting Catalog
[09:55:19] INFO: Using Catalog for LST 9-13
[09:55:19] INFO: Selecting Catalog
[09:55:19] INFO: Using Catalog for LST 9-13
[09:55:19] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:55:19] INFO: Selecting Catalog
[09:55:19] INFO: Using Catalog for LST 9-13
[09:55:19] INFO: Selecting Catalog
[09:55:19] INFO: Using Catalog for LST 9-13
[09:55:19] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:55:19] INFO: Selecting Catalog
[09:55:19] INFO: Using Catalog for LST 9-13
[09:55:19] INFO: Selecting Catalog
[09:55:19] INFO: Using Catalog for LST 9-13
[09:55:19] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:55:19] INFO: Selecting Catalog
[09:55:19] INFO: Using Catalog for LST 9-13
[09:55:19] INFO: Selecting Catalog
[09:55:19] INFO: Using Catalog for LST 9-13
[09:55:19] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:55:19] INFO: Selecting Catalog
[09:55:19] INFO: Using Catalog for LST 9-13
[09:55:19] INFO: Selecting Catalog
[09:55:19] INFO: Using Catalog for LST 9-13
[09:55:19] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:55:19] INFO: Selecting Catalog
[09:55:19] INFO: Using Catalog for LST 9-13
[09:55:19] INFO: Selecting Catalog
[09:55:19] INFO: Using Catalog for LST 9-13
[09:55:19] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:55:20] INFO: Selecting Catalog
[09:55:20] INFO: Using Catalog for LST 9-13
[09:55:20] INFO: Selecting Catalog
[09:55:20] INFO: Using Catalog for LST 9-13
[09:55:20] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:55:20] INFO: Selecting Catalog
[09:55:20] INFO: Using Catalog for LST 9-13
[09:55:20] INFO: Selecting Catalog
[09:55:20] INFO: Using Catalog for LST 9-13
[09:55:20] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:55:20] INFO: Selecting Catalog
[09:55:20] INFO: Using Catalog for LST 9-13
[09:55:20] INFO: Selecting Catalog
[09:55:20] INFO: Using Catalog for LST 9-13
[09:55:20] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:55:20] INFO: Selecting Catalog
[09:55:20] INFO: Using Catalog for LST 9-13
[09:55:20] INFO: Selecting Catalog
[09:55:20] INFO: Using Catalog for LST 9-13
[09:55:20] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:55:20] INFO: Selecting Catalog
[09:55:20] INFO: Using Catalog for LST 9-13
[09:55:20] INFO: Selecting Catalog
[09:55:20] INFO: Using Catalog for LST 9-13
[09:55:20] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:55:20] INFO: Selecting Catalog
[09:55:20] INFO: Using Catalog for LST 9-13
[09:55:20] INFO: Selecting Catalog
[09:55:20] INFO: Using Catalog for LST 9-13
[09:55:20] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:55:20] INFO: Selecting Catalog
[09:55:20] INFO: Using Catalog for LST 9-13
[09:55:20] INFO: Selecting Catalog
[09:55:20] INFO: Using Catalog for LST 9-13
[09:55:20] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:55:20] INFO: Selecting Catalog
[09:55:20] INFO: Using Catalog for LST 9-13
[09:55:20] INFO: Selecting Catalog
[09:55:20] INFO: Using Catalog for LST 9-13
[09:55:20] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:55:20] INFO: Selecting Catalog
[09:55:20] INFO: Using Catalog for LST 9-13
[09:55:20] INFO: Selecting Catalog
[09:55:20] INFO: Using Catalog for LST 9-13
[09:55:20] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:55:20] INFO: Selecting Catalog
[09:55:20] INFO: Using Catalog for LST 9-13
[09:55:20] INFO: Selecting Catalog
[09:55:20] INFO: Using Catalog for LST 9-13
[09:55:20] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:55:20] INFO: Selecting Catalog
[09:55:20] INFO: Using Catalog for LST 9-13
[09:55:20] INFO: Selecting Catalog
[09:55:20] INFO: Using Catalog for LST 9-13
[09:55:20] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:55:20] INFO: Selecting Catalog
[09:55:20] INFO: Using Catalog for LST 9-13
[09:55:20] INFO: Selecting Catalog
[09:55:20] INFO: Using Catalog for LST 9-13
[09:55:20] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:55:20] INFO: Selecting Catalog
[09:55:20] INFO: Using Catalog for LST 9-13
[09:55:20] INFO: Selecting Catalog
[09:55:20] INFO: Using Catalog for LST 9-13
[09:55:20] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:55:20] INFO: Selecting Catalog
[09:55:20] INFO: Using Catalog for LST 9-13
[09:55:20] INFO: Selecting Catalog
[09:55:20] INFO: Using Catalog for LST 9-13
[09:55:20] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:55:20] INFO: Selecting Catalog
[09:55:20] INFO: Using Catalog for LST 9-13
[09:55:20] INFO: Selecting Catalog
[09:55:20] INFO: Using Catalog for LST 9-13
[09:55:20] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:55:20] INFO: Selecting Catalog
[09:55:20] INFO: Using Catalog for LST 9-13
[09:55:20] INFO: Selecting Catalog
[09:55:20] INFO: Using Catalog for LST 9-13
[09:55:20] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:55:21] INFO: Selecting Catalog
[09:55:21] INFO: Using Catalog for LST 9-13
[09:55:21] INFO: Selecting Catalog
[09:55:21] INFO: Using Catalog for LST 9-13
[09:55:21] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:55:21] INFO: Selecting Catalog
[09:55:21] INFO: Using Catalog for LST 9-13
[09:55:21] INFO: Selecting Catalog
[09:55:21] INFO: Using Catalog for LST 9-13
[09:55:21] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
runSuccessful: True
[09:55:21] ******** End Scheduling Block
[09:55:21] ******** observer = OPERATOR, SB name = 15B287_operator, project ID = AGBT15B_287

how much log? 19715 id: 179195self.history: <gbt.turtle.database.History.History instance at 0x4956b00>self.history.connection: <gbt.turtle.database.TurtleConnection.TurtleConnection instance at 0x4956878>how much converted log? 19923 
#######################################################
 
 
#######################################################
 SCRIPT NUMBER 10, project:AGBT15B_287_40 
 179196 128 OPERATOR 10 Amber Bonsall 2016-01-10 09:55:23 obs_completed 
#######################################################
# test script to update catalog as you go...

########## CHANGE THESE ONLY #############
OnOffOnTime = 10 #minutes (change this to 12 to be in line with DSS scheduling)
obs_per_source = 3 #total observing time per source = OnOffOnTime * obs_per_source
h = Horizon(10.0) #minimum of 10 degrees elevation
h_up = Horizon(85.0) #maximum of 85 degrees due to keyhole
myOff = Offset("J2000",1.0,0.0,cosv=True)  # Off position relative to source
doFirstPointing = True #Setting to False will skip the first pointing
doFirstCal = True  #Setting to False will skip the first 3C calibrator OnOff scan
peak_every = 12 #peak/cal every 12 OnOffOn (every 2.5 hours)
peak_near_source = False #Do another peak when changing to new source
#####################################

######### NOTES ###############
# This script runs in blocks of On-Off-On position switching with
# the two outer 'on' scans sharing one 'off'
# Total on-source time = 20 minutes
# Length of one 'On' or 'Off' = 3 minutes 20 seconds
# Length of one On-Off-On = 10 minutes
# 3 On-Off-On blocks are needed per source (30 minutes total per source)

###### Timing
# It takes 34m to completely observe 1 source+overhead (9 track scans)

execfile("/home/astro-util/projects/15B287_operator/15B287_config.py")
execfile("/home/astro-util/projects/15B287_operator/15B287_utils.py")
Catalog(fluxcal)
Catalog(lband_pointing)

scanTime = OnOffOnTime * 20.0 #seconds
tdelta = DateTime.TimeDelta(minutes=OnOffOnTime)
obs_count = 0
doCal = doFirstCal
doPointing = doFirstPointing
project_obs = 0
old_catalog_name = 'dummy'
fullcat = '/home/astro-util/projects/15B287_operator/15B287_operator.cat'

Configure(config_1)

while project_obs < 100:
    mycat,altcal = select_my_catalog()
    if mycat == old_catalog_name:
        print 'SAME CATALOG HAS BEEN SELECTED: Using FULL catalog'
        mycat = fullcat
        altcal = '3C309_1'
    old_catalog_name = mycat
    c = Catalog(mycat)
    sources = c.keys()
    for source in sources:
        doBalance = True
        newPeak = True
        calibrator = c[source]["calibrator"]
        n_obs = int(float(c[source]["n_obs"]))
        obs_left = obs_per_source-n_obs
        obs_ok = obs_left > 0
        t_now = Now()
        if t_now != None and obs_ok:
            source_rise = h.GetRise(source)
            source_set  = h.GetSet(source)
            keyhole_rise = h_up.GetRise(source)
            keyhole_set = h_up.GetSet(source)
            if source_rise != None or keyhole_set != None:
                if source_set != None and keyhole_rise != None:
                    t_ok = ((t_now + tdelta) < source_set)
                    t_ok = t_ok and (t_now >= source_rise)
                    t_ok = t_ok and ((t_now + tdelta) < keyhole_rise)
                else:
                    t_ok = True
            else:
                t_ok = False
        else:
            t_ok = False

        source_ok = t_ok and obs_ok

        if source_ok:
            if doPointing == True:
                #check the calibrator is above the horizon
                keyhole_cal_rise = h_up.GetRise(calibrator)
                keyhole_cal_set = h_up.GetSet(calibrator)
                cal_rise = h.GetRise(calibrator)
                if cal_rise>t_now or keyhole_cal_set == None:
                    myCal = altcal #low circumpolar alternative
                    print 'Calibrator %s is too low: Using %s' %(calibrator,altcal)
                else:
                    if keyhole_cal_rise != None:
                        if (t_now+tdelta) >= keyhole_cal_rise:
                            print 'Calibrator %s is in keyhole: Using %s' %(calibrator,altcal)
                            myCal = altcal
                        else:
                            myCal = calibrator
                    else:
                        myCal = calibrator

                if obs_count == 0:
                    AutoPeakFocus(myCal)
                    #Break("Check Peak and Focus")
                else:
                    AutoPeak(myCal)
                Configure(config_1)
                doBalance = True
                doPointing = False

            if doCal:
                Slew(myCal)
                Balance()
                print 'Calibration scans (OnOff) :%s ' %(myCal)
                OnOff(myCal,myOff,120.0)
                doCal = False
                doBalance = True

            for i in range(obs_left):
                t_now = Now()   #check time ok again
                t_ok = False
                if t_now != None and keyhole_set != None:
                    if source_rise != None:
                        if source_set != None:
                            t_ok = ((t_now + tdelta) < source_set)
                            t_ok = t_ok and (t_now >= source_rise)
                            if keyhole_rise != None:
                                t_ok = t_ok and ((t_now+tdelta) < keyhole_rise)
                        else:
                            t_ok = True
                    else:
                        t_ok = False
                else:
                    t_ok = False

                if t_ok:
                    if peak_near_source and newPeak:
                        Slew(source)
                        AutoPeak()
                        Configure(config_1)
                        newPeak = False
                        doBalance = True
                    if doBalance:
                        Slew(source)
                        Balance()
                        doBalance = False

                    Comment("Starting on-source scan")
                    Track(source,None,scanTime)
                    Comment("Starting off-source scan")
                    Track(source,None,scanTime,fixedOffset=myOff)
                    Comment("Starting on-source scan")
                    Track(source,None,scanTime)
                    obs_count = obs_count + 1
                    obs_tot = obs_per_source+1-obs_left+i
                    print '%s: OBS COMPLETE = %s/%s' %(source,obs_tot,obs_per_source)
                    update_my_catalogs(source,obs_tot)

                    if obs_count % peak_every == 0:  #Cal/pointing interval
                        doCal = True
                        doPointing = True
        if source_ok and mycat == fullcat:
            break
    project_obs = project_obs+1

#######################################################
 LOG SESSION NUMBER 10 
[09:55:23] ******** Begin Scheduling Block
[09:55:23] ******** observer = OPERATOR, SB name = 15B287_operator, project ID = AGBT15B_287, date = 10 Jan 2016

[09:55:23] Configuring telescope.
[09:55:23]     Setting State: Activating
[09:55:25]     Setting State: Ready
[09:55:26]     Setting State: Activating
[09:55:27]     Setting State: Ready
[09:55:27] Default values are
[09:55:27] if3freq  =  [0, 0, 0]
[09:55:27] notchfilter  =  In
[09:55:27] polswitch  =  thru
[09:55:27] The bad devices are: 
[09:55:27] OpticalDriver5
[09:55:27] The bad devices are: 
[09:55:27] OpticalDriver5
[09:55:27] Waiting for the Rcvr1_2 to finish activating
[09:55:27] . .
[09:55:27] Checking telescope
[09:55:27] Configuration Complete
[09:55:28] INFO: Selecting Catalog
[09:55:28] INFO: Using Catalog for LST 9-13
[09:55:28] INFO: Selecting Catalog
[09:55:28] INFO: Using Catalog for LST 9-13
[09:55:28] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[09:55:28] Calibrator 3C48 is too low: Using 3C309_1
[09:55:28] Configuring telescope.
[09:55:29]     Setting State: Activating
[09:55:30]     Setting State: Ready
[09:55:30]     Setting State: Activating
[09:55:31]     Setting State: Ready
[09:55:31] Default values are
[09:55:31] if3freq  =  [0]
[09:55:31] notchfilter  =  In
[09:55:31] polswitch  =  thru
[09:55:31] The bad devices are: 
[09:55:31] OpticalDriver5

[09:55:31] Checking telescope
[09:55:31] Configuration Complete
[09:55:31] source : 3C309_1
               F1 : 1.4
               F2 : 32.0
               S22235 : 1.0
               S1400 : 7.5
               angsize : 1.5
               location : J2000 @ (14:59:07.58, 71:40:19.87)
[09:55:31] Slewing to source.
[09:55:31] In state Ready, waiting for state Activating
[09:55:31]     Setting State: Activating
[09:55:31] Detected state Activating
[09:55:31] In state Activating, waiting for state Ready
[09:55:44]     Setting State: Ready
[09:55:44] Detected state Ready
[09:55:44] Balancing IF system.
[09:55:44] Balancing IFRack
[09:55:45]     Setting State: Activating
[09:55:45]     Setting State: Ready
[09:55:46] the sampler values are:
[09:55:46] RF_power 1 : 1.005859
[09:55:46] RF_power 2 : 0.004882812
[09:55:46] RF_power 3 : 0.859375
[09:55:46] RF_power 4 : 0.01464844
[09:55:46] RF_power 5 : 0.02929688
[09:55:46] RF_power 6 : 2.963867
[09:55:46] RF_power 7 : 0.4638672
[09:55:46] RF_power 8 : 0.02441406
[09:55:46] source : 3C309_1
               F1 : 1.4
               F2 : 32.0
               S22235 : 1.0
               S1400 : 7.5
               angsize : 1.5
               location : J2000 @ (14:59:07.58, 71:40:19.87)
[09:55:47] Peak: Subscan 1 of 4
[09:55:47] In state Ready, waiting for state Running
[09:55:47]     Setting State: Activating
[09:56:10]     Setting State: Committed
[09:56:12]     Setting State: Running
[09:56:12] Detected state Running
[09:56:12] *** Notice: This subscan will be numbered as scan #64 in your data reduction package.
[09:56:12] In state Running, waiting for state Ready
[09:56:42]     Setting State: Stopping
[09:56:48]     Setting State: Ready
[09:56:48] Detected state Ready
[09:56:48] Ygor Telescope: WaitForStopping
[09:56:48] Peak: Subscan 2 of 4
[09:56:49] In state Ready, waiting for state Running
[09:56:49]     Setting State: Activating
[09:56:57]     Setting State: Committed
[09:56:59]     Setting State: Running
[09:56:59] Detected state Running
[09:56:59] *** Notice: This subscan will be numbered as scan #65 in your data reduction package.
[09:56:59] In state Running, waiting for state Ready
[09:57:29]     Setting State: Stopping
[09:57:35]     Setting State: Ready
[09:57:35] Detected state Ready
[09:57:35] Ygor Telescope: WaitForStopping
[09:57:36] *** Updating antenna's pointing to az2=0.0205 and el=0.3302 arcmins

[09:57:36] Peak: Subscan 3 of 4
[09:57:36] In state Ready, waiting for state Running
[09:57:36]     Setting State: Activating
[09:57:56]     Setting State: Committed
[09:57:58]     Setting State: Running
[09:57:58] Detected state Running
[09:57:58] *** Notice: This subscan will be numbered as scan #66 in your data reduction package.
[09:57:58] In state Running, waiting for state Ready
[09:58:28]     Setting State: Stopping
[09:58:33]     Setting State: Ready
[09:58:33] Detected state Ready
[09:58:33] Ygor Telescope: WaitForStopping
[09:58:33] Peak: Subscan 4 of 4
[09:58:33] In state Ready, waiting for state Running
[09:58:33]     Setting State: Activating
[09:58:41]     Setting State: Committed
[09:58:43]     Setting State: Running
[09:58:43] Detected state Running
[09:58:43] *** Notice: This subscan will be numbered as scan #67 in your data reduction package.
[09:58:43] In state Running, waiting for state Ready
[09:59:13]     Setting State: Stopping
[09:59:17]     Setting State: Ready
[09:59:17] Detected state Ready
[09:59:17] Ygor Telescope: WaitForStopping
[09:59:18] . *** Updating antenna's pointing to az2=0.0205 and el=0.3111 arcmins

[09:59:19] source : 3C309_1
               F1 : 1.4
               F2 : 32.0
               S22235 : 1.0
               S1400 : 7.5
               angsize : 1.5
               location : J2000 @ (14:59:07.58, 71:40:19.87)
[09:59:19] Focus: Subscan 1 of 1
[09:59:20] In state Ready, waiting for state Running
[09:59:20]     Setting State: Activating
[09:59:45]     Setting State: Committed
[09:59:47]     Setting State: Running
[09:59:47] Detected state Running
[09:59:47] *** Notice: This subscan will be numbered as scan #68 in your data reduction package.
[09:59:47] In state Running, waiting for state Ready
[10:00:47]     Setting State: Stopping
[10:00:49]     Setting State: Ready
[10:00:49] Detected state Ready
[10:00:49] Ygor Telescope: WaitForStopping
[10:00:50] . *** Updating antenna's focus to -39.71 mm

[10:00:51] Configuring telescope.
[10:00:51]     Setting State: Activating
[10:00:53]     Setting State: Ready
[10:00:54]     Setting State: Activating
[10:00:55]     Setting State: Ready
[10:00:55] Default values are
[10:00:55] if3freq  =  [0, 0, 0]
[10:00:55] notchfilter  =  In
[10:00:55] polswitch  =  thru
[10:00:55] The bad devices are: 
[10:00:55] OpticalDriver5
[10:00:55] The bad devices are: 
[10:00:55] OpticalDriver5
[10:00:55] Waiting for the ConverterRack to finish activating
[10:00:55] . .
[10:00:55] Checking telescope
[10:00:55] Configuration Complete
[10:00:56] source : 3C309_1
               F1 : 1.4
               F2 : 32.0
               S22235 : 1.0
               S1400 : 7.5
               angsize : 1.5
               location : J2000 @ (14:59:07.58, 71:40:19.87)
[10:00:56] Slewing to source.
[10:00:56]     Setting State: Activating
[10:00:56] In state Ready, waiting for state Activating
[10:00:56] Detected state Activating
[10:00:56] In state Activating, waiting for state Ready
[10:01:24]     Setting State: Ready
[10:01:24] Detected state Ready
[10:01:24] Balancing IF system.
[10:01:24] Balancing IFRack
[10:01:25]     Setting State: Activating
[10:01:25]     Setting State: Ready
[10:01:26] the sampler values are:
[10:01:26] RF_power 1 : 3.110352
[10:01:26] RF_power 2 : 0.004882812
[10:01:26] RF_power 3 : 3.173828
[10:01:26] RF_power 4 : 0.01464844
[10:01:26] RF_power 5 : 0.02929688
[10:01:26] RF_power 6 : 3.00293
[10:01:26] RF_power 7 : 3.266602
[10:01:26] RF_power 8 : 0.01953125
[10:01:26] Balancing VEGAS
[10:01:26]     Setting State: Activating
[10:01:27]     Setting State: Ready
[10:01:28]     Setting State: Activating
[10:01:28]     Setting State: Ready
[10:01:28] Calibration scans (OnOff) :3C309_1 
[10:01:28] source : 3C309_1
               F1 : 1.4
               F2 : 32.0
               S22235 : 1.0
               S1400 : 7.5
               angsize : 1.5
               location : J2000 @ (14:59:07.58, 71:40:19.87)
[10:01:28] OnOff: Subscan 1 of 2
[10:01:29] In state Ready, waiting for state Running
[10:01:29]     Setting State: Activating
[10:01:34]     Setting State: Committed
[10:01:36]     Setting State: Running
[10:01:36] Detected state Running
[10:01:36] *** Notice: This subscan will be numbered as scan #69 in your data reduction package.
[10:01:36] In state Running, waiting for state Ready
[10:03:36]     Setting State: Stopping
[10:03:38]     Setting State: Ready
[10:03:38] Detected state Ready
[10:03:38] Ygor Telescope: WaitForStopping
[10:03:38] OnOff: Subscan 2 of 2
[10:03:38] In state Ready, waiting for state Running
[10:03:38]     Setting State: Activating
[10:03:51]     Setting State: Committed
[10:03:53]     Setting State: Running
[10:03:53] Detected state Running
[10:03:53] *** Notice: This subscan will be numbered as scan #70 in your data reduction package.
[10:03:53] In state Running, waiting for state Ready
[10:05:53]     Setting State: Stopping
[10:05:55]     Setting State: Ready
[10:05:55] Detected state Ready
[10:05:55] Ygor Telescope: WaitForStopping
[10:05:55] INFO: Selecting Catalog
[10:05:55] INFO: Using Catalog for LST 9-13
[10:05:55] INFO: Selecting Catalog
[10:05:55] INFO: Using Catalog for LST 9-13
[10:05:55] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:05:55] INFO: Selecting Catalog
[10:05:55] INFO: Using Catalog for LST 9-13
[10:05:55] INFO: Selecting Catalog
[10:05:55] INFO: Using Catalog for LST 9-13
[10:05:55] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:05:55] INFO: Selecting Catalog
[10:05:55] INFO: Using Catalog for LST 9-13
[10:05:55] INFO: Selecting Catalog
[10:05:55] INFO: Using Catalog for LST 9-13
[10:05:55] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:05:55] INFO: Selecting Catalog
[10:05:55] INFO: Using Catalog for LST 9-13
[10:05:55] INFO: Selecting Catalog
[10:05:55] INFO: Using Catalog for LST 9-13
[10:05:55] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:05:55] INFO: Selecting Catalog
[10:05:55] INFO: Using Catalog for LST 9-13
[10:05:55] INFO: Selecting Catalog
[10:05:55] INFO: Using Catalog for LST 9-13
[10:05:55] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:05:55] INFO: Selecting Catalog
[10:05:55] INFO: Using Catalog for LST 9-13
[10:05:55] INFO: Selecting Catalog
[10:05:55] INFO: Using Catalog for LST 9-13
[10:05:55] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:05:55] INFO: Selecting Catalog
[10:05:55] INFO: Using Catalog for LST 9-13
[10:05:55] INFO: Selecting Catalog
[10:05:55] INFO: Using Catalog for LST 9-13
[10:05:55] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:05:55] INFO: Selecting Catalog
[10:05:55] INFO: Using Catalog for LST 9-13
[10:05:55] INFO: Selecting Catalog
[10:05:55] INFO: Using Catalog for LST 9-13
[10:05:55] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:05:55] INFO: Selecting Catalog
[10:05:55] INFO: Using Catalog for LST 9-13
[10:05:55] INFO: Selecting Catalog
[10:05:55] INFO: Using Catalog for LST 9-13
[10:05:55] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:05:55] INFO: Selecting Catalog
[10:05:55] INFO: Using Catalog for LST 9-13
[10:05:55] INFO: Selecting Catalog
[10:05:55] INFO: Using Catalog for LST 9-13
[10:05:55] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:05:55] INFO: Selecting Catalog
[10:05:55] INFO: Using Catalog for LST 9-13
[10:05:55] INFO: Selecting Catalog
[10:05:55] INFO: Using Catalog for LST 9-13
[10:05:55] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:05:55] INFO: Selecting Catalog
[10:05:55] INFO: Using Catalog for LST 9-13
[10:05:55] INFO: Selecting Catalog
[10:05:55] INFO: Using Catalog for LST 9-13
[10:05:55] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:05:55] INFO: Selecting Catalog
[10:05:55] INFO: Using Catalog for LST 9-13
[10:05:55] INFO: Selecting Catalog
[10:05:55] INFO: Using Catalog for LST 9-13
[10:05:55] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:05:55] INFO: Selecting Catalog
[10:05:55] INFO: Using Catalog for LST 9-13
[10:05:55] INFO: Selecting Catalog
[10:05:55] INFO: Using Catalog for LST 9-13
[10:05:55] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:05:55] INFO: Selecting Catalog
[10:05:55] INFO: Using Catalog for LST 9-13
[10:05:55] INFO: Selecting Catalog
[10:05:55] INFO: Using Catalog for LST 9-13
[10:05:55] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:05:56] INFO: Selecting Catalog
[10:05:56] INFO: Using Catalog for LST 9-13
[10:05:56] INFO: Selecting Catalog
[10:05:56] INFO: Using Catalog for LST 9-13
[10:05:56] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:05:56] INFO: Selecting Catalog
[10:05:56] INFO: Using Catalog for LST 9-13
[10:05:56] INFO: Selecting Catalog
[10:05:56] INFO: Using Catalog for LST 9-13
[10:05:56] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:05:56] INFO: Selecting Catalog
[10:05:56] INFO: Using Catalog for LST 9-13
[10:05:56] INFO: Selecting Catalog
[10:05:56] INFO: Using Catalog for LST 9-13
[10:05:56] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:05:56] INFO: Selecting Catalog
[10:05:56] INFO: Using Catalog for LST 9-13
[10:05:56] INFO: Selecting Catalog
[10:05:56] INFO: Using Catalog for LST 9-13
[10:05:56] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:05:56] INFO: Selecting Catalog
[10:05:56] INFO: Using Catalog for LST 9-13
[10:05:56] INFO: Selecting Catalog
[10:05:56] INFO: Using Catalog for LST 9-13
[10:05:56] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:05:56] INFO: Selecting Catalog
[10:05:56] INFO: Using Catalog for LST 9-13
[10:05:56] INFO: Selecting Catalog
[10:05:56] INFO: Using Catalog for LST 9-13
[10:05:56] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:05:56] INFO: Selecting Catalog
[10:05:56] INFO: Using Catalog for LST 9-13
[10:05:56] INFO: Selecting Catalog
[10:05:56] INFO: Using Catalog for LST 9-13
[10:05:56] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:05:56] INFO: Selecting Catalog
[10:05:56] INFO: Using Catalog for LST 9-13
[10:05:56] INFO: Selecting Catalog
[10:05:56] INFO: Using Catalog for LST 9-13
[10:05:56] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:05:56] INFO: Selecting Catalog
[10:05:56] INFO: Using Catalog for LST 9-13
[10:05:56] INFO: Selecting Catalog
[10:05:56] INFO: Using Catalog for LST 9-13
[10:05:56] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:05:56] INFO: Selecting Catalog
[10:05:56] INFO: Using Catalog for LST 9-13
[10:05:56] INFO: Selecting Catalog
[10:05:56] INFO: Using Catalog for LST 9-13
[10:05:56] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:05:56] INFO: Selecting Catalog
[10:05:56] INFO: Using Catalog for LST 9-13
[10:05:56] INFO: Selecting Catalog
[10:05:56] INFO: Using Catalog for LST 9-13
[10:05:56] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:05:56] INFO: Selecting Catalog
[10:05:56] INFO: Using Catalog for LST 9-13
[10:05:56] INFO: Selecting Catalog
[10:05:56] INFO: Using Catalog for LST 9-13
[10:05:56] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:05:56] INFO: Selecting Catalog
[10:05:56] INFO: Using Catalog for LST 9-13
[10:05:56] INFO: Selecting Catalog
[10:05:56] INFO: Using Catalog for LST 9-13
[10:05:56] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:05:56] INFO: Selecting Catalog
[10:05:56] INFO: Using Catalog for LST 9-13
[10:05:56] INFO: Selecting Catalog
[10:05:56] INFO: Using Catalog for LST 9-13
[10:05:56] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:05:56] INFO: Selecting Catalog
[10:05:56] INFO: Using Catalog for LST 9-13
[10:05:56] INFO: Selecting Catalog
[10:05:56] INFO: Using Catalog for LST 9-13
[10:05:56] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:05:56] INFO: Selecting Catalog
[10:05:56] INFO: Using Catalog for LST 9-13
[10:05:56] INFO: Selecting Catalog
[10:05:56] INFO: Using Catalog for LST 9-13
[10:05:56] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:05:56] INFO: Selecting Catalog
[10:05:56] INFO: Using Catalog for LST 9-13
[10:05:57] INFO: Selecting Catalog
[10:05:57] INFO: Using Catalog for LST 9-13
[10:05:57] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:05:57] INFO: Selecting Catalog
[10:05:57] INFO: Using Catalog for LST 9-13
[10:05:57] INFO: Selecting Catalog
[10:05:57] INFO: Using Catalog for LST 9-13
[10:05:57] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:05:57] INFO: Selecting Catalog
[10:05:57] INFO: Using Catalog for LST 9-13
[10:05:57] INFO: Selecting Catalog
[10:05:57] INFO: Using Catalog for LST 9-13
[10:05:57] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:05:57] INFO: Selecting Catalog
[10:05:57] INFO: Using Catalog for LST 9-13
[10:05:57] INFO: Selecting Catalog
[10:05:57] INFO: Using Catalog for LST 9-13
[10:05:57] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:05:57] INFO: Selecting Catalog
[10:05:57] INFO: Using Catalog for LST 9-13
[10:05:57] INFO: Selecting Catalog
[10:05:57] INFO: Using Catalog for LST 9-13
[10:05:57] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:05:57] INFO: Selecting Catalog
[10:05:57] INFO: Using Catalog for LST 9-13
[10:05:57] INFO: Selecting Catalog
[10:05:57] INFO: Using Catalog for LST 9-13
[10:05:57] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:05:57] INFO: Selecting Catalog
[10:05:57] INFO: Using Catalog for LST 9-13
[10:05:57] INFO: Selecting Catalog
[10:05:57] INFO: Using Catalog for LST 9-13
[10:05:57] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:05:57] INFO: Selecting Catalog
[10:05:57] INFO: Using Catalog for LST 9-13
[10:05:57] INFO: Selecting Catalog
[10:05:57] INFO: Using Catalog for LST 9-13
[10:05:57] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:05:57] INFO: Selecting Catalog
[10:05:57] INFO: Using Catalog for LST 9-13
[10:05:57] INFO: Selecting Catalog
[10:05:57] INFO: Using Catalog for LST 9-13
[10:05:57] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:05:57] INFO: Selecting Catalog
[10:05:57] INFO: Using Catalog for LST 9-13
[10:05:57] INFO: Selecting Catalog
[10:05:57] INFO: Using Catalog for LST 9-13
[10:05:57] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:05:57] INFO: Selecting Catalog
[10:05:57] INFO: Using Catalog for LST 9-13
[10:05:57] INFO: Selecting Catalog
[10:05:57] INFO: Using Catalog for LST 9-13
[10:05:57] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:05:57] INFO: Selecting Catalog
[10:05:57] INFO: Using Catalog for LST 9-13
[10:05:57] INFO: Selecting Catalog
[10:05:57] INFO: Using Catalog for LST 9-13
[10:05:57] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:05:57] INFO: Selecting Catalog
[10:05:57] INFO: Using Catalog for LST 9-13
[10:05:57] INFO: Selecting Catalog
[10:05:57] INFO: Using Catalog for LST 9-13
[10:05:57] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:05:57] INFO: Selecting Catalog
[10:05:57] INFO: Using Catalog for LST 9-13
[10:05:57] INFO: Selecting Catalog
[10:05:57] INFO: Using Catalog for LST 9-13
[10:05:57] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:05:57] INFO: Selecting Catalog
[10:05:57] INFO: Using Catalog for LST 9-13
[10:05:57] INFO: Selecting Catalog
[10:05:57] INFO: Using Catalog for LST 9-13
[10:05:57] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:05:57] INFO: Selecting Catalog
[10:05:57] INFO: Using Catalog for LST 9-13
[10:05:57] INFO: Selecting Catalog
[10:05:57] INFO: Using Catalog for LST 9-13
[10:05:57] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:05:58] INFO: Selecting Catalog
[10:05:58] INFO: Using Catalog for LST 9-13
[10:05:58] INFO: Selecting Catalog
[10:05:58] INFO: Using Catalog for LST 9-13
[10:05:58] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:05:58] INFO: Selecting Catalog
[10:05:58] INFO: Using Catalog for LST 9-13
[10:05:58] INFO: Selecting Catalog
[10:05:58] INFO: Using Catalog for LST 9-13
[10:05:58] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
runSuccessful: True
[10:05:58] ******** End Scheduling Block
[10:05:58] ******** observer = OPERATOR, SB name = 15B287_operator, project ID = AGBT15B_287

how much log? 19719 id: 179196self.history: <gbt.turtle.database.History.History instance at 0x4956b00>self.history.connection: <gbt.turtle.database.TurtleConnection.TurtleConnection instance at 0x4956878>how much converted log? 19927 
#######################################################
 
 
#######################################################
 SCRIPT NUMBER 11, project:AGBT15B_287_40 
 179197 128 OPERATOR 10 Amber Bonsall 2016-01-10 10:06:00 obs_completed 
#######################################################
# test script to update catalog as you go...

########## CHANGE THESE ONLY #############
OnOffOnTime = 10 #minutes (change this to 12 to be in line with DSS scheduling)
obs_per_source = 3 #total observing time per source = OnOffOnTime * obs_per_source
h = Horizon(10.0) #minimum of 10 degrees elevation
h_up = Horizon(85.0) #maximum of 85 degrees due to keyhole
myOff = Offset("J2000",1.0,0.0,cosv=True)  # Off position relative to source
doFirstPointing = True #Setting to False will skip the first pointing
doFirstCal = True  #Setting to False will skip the first 3C calibrator OnOff scan
peak_every = 12 #peak/cal every 12 OnOffOn (every 2.5 hours)
peak_near_source = False #Do another peak when changing to new source
#####################################

######### NOTES ###############
# This script runs in blocks of On-Off-On position switching with
# the two outer 'on' scans sharing one 'off'
# Total on-source time = 20 minutes
# Length of one 'On' or 'Off' = 3 minutes 20 seconds
# Length of one On-Off-On = 10 minutes
# 3 On-Off-On blocks are needed per source (30 minutes total per source)

###### Timing
# It takes 34m to completely observe 1 source+overhead (9 track scans)

execfile("/home/astro-util/projects/15B287_operator/15B287_config.py")
execfile("/home/astro-util/projects/15B287_operator/15B287_utils.py")
Catalog(fluxcal)
Catalog(lband_pointing)

scanTime = OnOffOnTime * 20.0 #seconds
tdelta = DateTime.TimeDelta(minutes=OnOffOnTime)
obs_count = 0
doCal = doFirstCal
doPointing = doFirstPointing
project_obs = 0
old_catalog_name = 'dummy'
fullcat = '/home/astro-util/projects/15B287_operator/15B287_operator.cat'

Configure(config_1)

while project_obs < 100:
    mycat,altcal = select_my_catalog()
    if mycat == old_catalog_name:
        print 'SAME CATALOG HAS BEEN SELECTED: Using FULL catalog'
        mycat = fullcat
        altcal = '3C309_1'
    old_catalog_name = mycat
    c = Catalog(mycat)
    sources = c.keys()
    for source in sources:
        doBalance = True
        newPeak = True
        calibrator = c[source]["calibrator"]
        n_obs = int(float(c[source]["n_obs"]))
        obs_left = obs_per_source-n_obs
        obs_ok = obs_left > 0
        t_now = Now()
        if t_now != None and obs_ok:
            source_rise = h.GetRise(source)
            source_set  = h.GetSet(source)
            keyhole_rise = h_up.GetRise(source)
            keyhole_set = h_up.GetSet(source)
            if source_rise != None or keyhole_set != None:
                if source_set != None and keyhole_rise != None:
                    t_ok = ((t_now + tdelta) < source_set)
                    t_ok = t_ok and (t_now >= source_rise)
                    t_ok = t_ok and ((t_now + tdelta) < keyhole_rise)
                else:
                    t_ok = True
            else:
                t_ok = False
        else:
            t_ok = False

        source_ok = t_ok and obs_ok

        if source_ok:
            if doPointing == True:
                #check the calibrator is above the horizon
                keyhole_cal_rise = h_up.GetRise(calibrator)
                keyhole_cal_set = h_up.GetSet(calibrator)
                cal_rise = h.GetRise(calibrator)
                if cal_rise>t_now or keyhole_cal_set == None:
                    myCal = altcal #low circumpolar alternative
                    print 'Calibrator %s is too low: Using %s' %(calibrator,altcal)
                else:
                    if keyhole_cal_rise != None:
                        if (t_now+tdelta) >= keyhole_cal_rise:
                            print 'Calibrator %s is in keyhole: Using %s' %(calibrator,altcal)
                            myCal = altcal
                        else:
                            myCal = calibrator
                    else:
                        myCal = calibrator

                if obs_count == 0:
                    AutoPeakFocus(myCal)
                    #Break("Check Peak and Focus")
                else:
                    AutoPeak(myCal)
                Configure(config_1)
                doBalance = True
                doPointing = False

            if doCal:
                Slew(myCal)
                Balance()
                print 'Calibration scans (OnOff) :%s ' %(myCal)
                OnOff(myCal,myOff,120.0)
                doCal = False
                doBalance = True

            for i in range(obs_left):
                t_now = Now()   #check time ok again
                t_ok = False
                if t_now != None and keyhole_set != None:
                    if source_rise != None:
                        if source_set != None:
                            t_ok = ((t_now + tdelta) < source_set)
                            t_ok = t_ok and (t_now >= source_rise)
                            if keyhole_rise != None:
                                t_ok = t_ok and ((t_now+tdelta) < keyhole_rise)
                        else:
                            t_ok = True
                    else:
                        t_ok = False
                else:
                    t_ok = False

                if t_ok:
                    if peak_near_source and newPeak:
                        Slew(source)
                        AutoPeak()
                        Configure(config_1)
                        newPeak = False
                        doBalance = True
                    if doBalance:
                        Slew(source)
                        Balance()
                        doBalance = False

                    Comment("Starting on-source scan")
                    Track(source,None,scanTime)
                    Comment("Starting off-source scan")
                    Track(source,None,scanTime,fixedOffset=myOff)
                    Comment("Starting on-source scan")
                    Track(source,None,scanTime)
                    obs_count = obs_count + 1
                    obs_tot = obs_per_source+1-obs_left+i
                    print '%s: OBS COMPLETE = %s/%s' %(source,obs_tot,obs_per_source)
                    update_my_catalogs(source,obs_tot)

                    if obs_count % peak_every == 0:  #Cal/pointing interval
                        doCal = True
                        doPointing = True
        if source_ok and mycat == fullcat:
            break
    project_obs = project_obs+1

#######################################################
 LOG SESSION NUMBER 11 
[10:06:00] ******** Begin Scheduling Block
[10:06:00] ******** observer = OPERATOR, SB name = 15B287_operator, project ID = AGBT15B_287, date = 10 Jan 2016

[10:06:00] Configuring telescope.
[10:06:00]     Setting State: Activating
[10:06:03]     Setting State: Ready
[10:06:04]     Setting State: Activating
[10:06:05]     Setting State: Ready
[10:06:05] Default values are
[10:06:05] if3freq  =  [0, 0, 0]
[10:06:05] notchfilter  =  In
[10:06:05] polswitch  =  thru
[10:06:05] The bad devices are: 
[10:06:05] OpticalDriver5
[10:06:05] The bad devices are: 
[10:06:05] OpticalDriver5
[10:06:05] Waiting for the ConverterRack to finish activating
[10:06:05] . . .
[10:06:05] Checking telescope
[10:06:05] Configuration Complete
[10:06:05] INFO: Selecting Catalog
[10:06:05] INFO: Using Catalog for LST 9-13
[10:06:06] INFO: Selecting Catalog
[10:06:06] INFO: Using Catalog for LST 9-13
[10:06:06] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:06:06] Calibrator 3C48 is too low: Using 3C309_1
[10:06:06] Configuring telescope.
[10:06:07]     Setting State: Activating
[10:06:08]     Setting State: Ready
[10:06:08]     Setting State: Activating
[10:06:09]     Setting State: Ready
[10:06:09] Default values are
[10:06:09] if3freq  =  [0]
[10:06:09] notchfilter  =  In
[10:06:09] polswitch  =  thru
[10:06:09] The bad devices are: 
[10:06:09] OpticalDriver5

[10:06:09] Checking telescope
[10:06:09] Configuration Complete
[10:06:09] source : 3C309_1
               F1 : 1.4
               F2 : 32.0
               S22235 : 1.0
               S1400 : 7.5
               angsize : 1.5
               location : J2000 @ (14:59:07.58, 71:40:19.87)
[10:06:09] Slewing to source.
[10:06:09] In state Ready, waiting for state Activating
[10:06:09]     Setting State: Activating
[10:06:09] Detected state Activating
[10:06:09] In state Activating, waiting for state Ready
[10:06:22]     Setting State: Ready
[10:06:22] Detected state Ready
[10:06:22] Balancing IF system.
[10:06:22] Balancing IFRack
[10:06:22]     Setting State: Activating
[10:06:22]     Setting State: Ready
[10:06:24] the sampler values are:
[10:06:24] RF_power 1 : 1.010742
[10:06:24] RF_power 2 : 0
[10:06:24] RF_power 3 : 1.088867
[10:06:24] RF_power 4 : 0.01464844
[10:06:24] RF_power 5 : 0.03417969
[10:06:24] RF_power 6 : 2.900391
[10:06:24] RF_power 7 : 0.4785156
[10:06:24] RF_power 8 : 0.02441406
[10:06:24] source : 3C309_1
               F1 : 1.4
               F2 : 32.0
               S22235 : 1.0
               S1400 : 7.5
               angsize : 1.5
               location : J2000 @ (14:59:07.58, 71:40:19.87)
[10:06:24] Peak: Subscan 1 of 4
[10:06:25] In state Ready, waiting for state Running
[10:06:25]     Setting State: Activating
[10:06:48]     Setting State: Committed
[10:06:50]     Setting State: Running
[10:06:50] Detected state Running
[10:06:50] *** Notice: This subscan will be numbered as scan #71 in your data reduction package.
[10:06:50] In state Running, waiting for state Ready
[10:07:20]     Setting State: Stopping
[10:07:26]     Setting State: Ready
[10:07:26] Detected state Ready
[10:07:26] Ygor Telescope: WaitForStopping
[10:07:26] Peak: Subscan 2 of 4
[10:07:27] In state Ready, waiting for state Running
[10:07:27]     Setting State: Activating
[10:07:36]     Setting State: Committed
[10:07:38]     Setting State: Running
[10:07:38] Detected state Running
[10:07:38] *** Notice: This subscan will be numbered as scan #72 in your data reduction package.
[10:07:38] In state Running, waiting for state Ready
[10:08:08]     Setting State: Stopping
[10:08:14]     Setting State: Ready
[10:08:14] Detected state Ready
[10:08:14] Ygor Telescope: WaitForStopping
[10:08:15] *** Updating antenna's pointing to az2=0.0491 and el=0.3111 arcmins

[10:08:15] Peak: Subscan 3 of 4
[10:08:15] In state Ready, waiting for state Running
[10:08:16]     Setting State: Activating
[10:08:36]     Setting State: Committed
[10:08:38]     Setting State: Running
[10:08:38] Detected state Running
[10:08:38] *** Notice: This subscan will be numbered as scan #73 in your data reduction package.
[10:08:38] In state Running, waiting for state Ready
[10:09:08]     Setting State: Stopping
[10:09:13]     Setting State: Ready
[10:09:13] Detected state Ready
[10:09:13] Ygor Telescope: WaitForStopping
[10:09:13] Peak: Subscan 4 of 4
[10:09:13] In state Ready, waiting for state Running
[10:09:13]     Setting State: Activating
[10:09:21]     Setting State: Committed
[10:09:23]     Setting State: Running
[10:09:23] Detected state Running
[10:09:23] *** Notice: This subscan will be numbered as scan #74 in your data reduction package.
[10:09:23] In state Running, waiting for state Ready
[10:09:53]     Setting State: Stopping
[10:09:57]     Setting State: Ready
[10:09:57] Detected state Ready
[10:09:57] Ygor Telescope: WaitForStopping
[10:09:58] *** Updating antenna's pointing to az2=0.0491 and el=0.3349 arcmins

[10:09:58] source : 3C309_1
               F1 : 1.4
               F2 : 32.0
               S22235 : 1.0
               S1400 : 7.5
               angsize : 1.5
               location : J2000 @ (14:59:07.58, 71:40:19.87)
[10:09:58] Focus: Subscan 1 of 1
[10:09:59] In state Ready, waiting for state Running
[10:09:59]     Setting State: Activating
[10:10:25]     Setting State: Committed
[10:10:27]     Setting State: Running
[10:10:27] Detected state Running
[10:10:27] *** Notice: This subscan will be numbered as scan #75 in your data reduction package.
[10:10:27] In state Running, waiting for state Ready
[10:11:27]     Setting State: Stopping
[10:11:29]     Setting State: Ready
[10:11:29] Detected state Ready
[10:11:29] Ygor Telescope: WaitForStopping
[10:11:29] *** Updating antenna's focus to -26.41 mm

[10:11:29] Configuring telescope.
[10:11:30]     Setting State: Activating
[10:11:33]     Setting State: Ready
[10:11:34]     Setting State: Activating
[10:11:35]     Setting State: Ready
[10:11:35] Default values are
[10:11:35] if3freq  =  [0, 0, 0]
[10:11:35] notchfilter  =  In
[10:11:35] polswitch  =  thru
[10:11:35] The bad devices are: 
[10:11:35] OpticalDriver5
[10:11:35] The bad devices are: 
[10:11:35] OpticalDriver5
[10:11:35] Waiting for the ConverterRack to finish activating
[10:11:35] . . .
[10:11:35] Checking telescope
[10:11:35] Configuration Complete
[10:11:35] source : 3C309_1
               F1 : 1.4
               F2 : 32.0
               S22235 : 1.0
               S1400 : 7.5
               angsize : 1.5
               location : J2000 @ (14:59:07.58, 71:40:19.87)
[10:11:35] Slewing to source.
[10:11:36] In state Ready, waiting for state Activating
[10:11:36]     Setting State: Activating
[10:11:36] Detected state Activating
[10:11:36] In state Activating, waiting for state Ready
[10:12:01]     Setting State: Ready
[10:12:01] Detected state Ready
[10:12:01] Balancing IF system.
[10:12:02] Balancing IFRack
[10:12:02]     Setting State: Activating
[10:12:02]     Setting State: Ready
[10:12:04] the sampler values are:
[10:12:04] RF_power 1 : 2.983398
[10:12:04] RF_power 2 : 0.004882812
[10:12:04] RF_power 3 : 2.983398
[10:12:04] RF_power 4 : 0.01464844
[10:12:04] RF_power 5 : 0.02929688
[10:12:04] RF_power 6 : 2.885742
[10:12:04] RF_power 7 : 3.100586
[10:12:04] RF_power 8 : 0.02441406
[10:12:04] Balancing VEGAS
[10:12:04]     Setting State: Activating
[10:12:04]     Setting State: Ready
[10:12:05]     Setting State: Activating
[10:12:05]     Setting State: Ready
[10:12:06] Calibration scans (OnOff) :3C309_1 
[10:12:06] source : 3C309_1
               F1 : 1.4
               F2 : 32.0
               S22235 : 1.0
               S1400 : 7.5
               angsize : 1.5
               location : J2000 @ (14:59:07.58, 71:40:19.87)
[10:12:06] OnOff: Subscan 1 of 2
[10:12:06] In state Ready, waiting for state Running
[10:12:06]     Setting State: Activating
[10:12:11]     Setting State: Committed
[10:12:13]     Setting State: Running
[10:12:13] Detected state Running
[10:12:13] *** Notice: This subscan will be numbered as scan #76 in your data reduction package.
[10:12:13] In state Running, waiting for state Ready
[10:14:13]     Setting State: Stopping
[10:14:15]     Setting State: Ready
[10:14:15] Detected state Ready
[10:14:15] Ygor Telescope: WaitForStopping
[10:14:15] OnOff: Subscan 2 of 2
[10:14:15] In state Ready, waiting for state Running
[10:14:15]     Setting State: Activating
[10:14:28]     Setting State: Committed
[10:14:30]     Setting State: Running
[10:14:30] Detected state Running
[10:14:30] *** Notice: This subscan will be numbered as scan #77 in your data reduction package.
[10:14:30] In state Running, waiting for state Ready
[10:16:30]     Setting State: Stopping
[10:16:32]     Setting State: Ready
[10:16:32] Detected state Ready
[10:16:32] Ygor Telescope: WaitForStopping
[10:16:32] INFO: Selecting Catalog
[10:16:32] INFO: Using Catalog for LST 9-13
[10:16:32] INFO: Selecting Catalog
[10:16:32] INFO: Using Catalog for LST 9-13
[10:16:32] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:16:32] INFO: Selecting Catalog
[10:16:32] INFO: Using Catalog for LST 9-13
[10:16:32] INFO: Selecting Catalog
[10:16:32] INFO: Using Catalog for LST 9-13
[10:16:32] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:16:32] INFO: Selecting Catalog
[10:16:32] INFO: Using Catalog for LST 9-13
[10:16:32] INFO: Selecting Catalog
[10:16:32] INFO: Using Catalog for LST 9-13
[10:16:32] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:16:32] INFO: Selecting Catalog
[10:16:32] INFO: Using Catalog for LST 9-13
[10:16:32] INFO: Selecting Catalog
[10:16:32] INFO: Using Catalog for LST 9-13
[10:16:32] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:16:32] INFO: Selecting Catalog
[10:16:32] INFO: Using Catalog for LST 9-13
[10:16:32] INFO: Selecting Catalog
[10:16:32] INFO: Using Catalog for LST 9-13
[10:16:32] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:16:32] INFO: Selecting Catalog
[10:16:32] INFO: Using Catalog for LST 9-13
[10:16:32] INFO: Selecting Catalog
[10:16:32] INFO: Using Catalog for LST 9-13
[10:16:32] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:16:32] INFO: Selecting Catalog
[10:16:32] INFO: Using Catalog for LST 9-13
[10:16:32] INFO: Selecting Catalog
[10:16:32] INFO: Using Catalog for LST 9-13
[10:16:32] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:16:32] INFO: Selecting Catalog
[10:16:32] INFO: Using Catalog for LST 9-13
[10:16:32] INFO: Selecting Catalog
[10:16:32] INFO: Using Catalog for LST 9-13
[10:16:32] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:16:32] INFO: Selecting Catalog
[10:16:32] INFO: Using Catalog for LST 9-13
[10:16:32] INFO: Selecting Catalog
[10:16:32] INFO: Using Catalog for LST 9-13
[10:16:32] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:16:32] INFO: Selecting Catalog
[10:16:32] INFO: Using Catalog for LST 9-13
[10:16:32] INFO: Selecting Catalog
[10:16:32] INFO: Using Catalog for LST 9-13
[10:16:32] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:16:32] INFO: Selecting Catalog
[10:16:32] INFO: Using Catalog for LST 9-13
[10:16:32] INFO: Selecting Catalog
[10:16:32] INFO: Using Catalog for LST 9-13
[10:16:32] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:16:32] INFO: Selecting Catalog
[10:16:32] INFO: Using Catalog for LST 9-13
[10:16:32] INFO: Selecting Catalog
[10:16:32] INFO: Using Catalog for LST 9-13
[10:16:32] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:16:32] INFO: Selecting Catalog
[10:16:32] INFO: Using Catalog for LST 9-13
[10:16:32] INFO: Selecting Catalog
[10:16:32] INFO: Using Catalog for LST 9-13
[10:16:32] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:16:32] INFO: Selecting Catalog
[10:16:32] INFO: Using Catalog for LST 9-13
[10:16:32] INFO: Selecting Catalog
[10:16:32] INFO: Using Catalog for LST 9-13
[10:16:32] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:16:33] INFO: Selecting Catalog
[10:16:33] INFO: Using Catalog for LST 9-13
[10:16:33] INFO: Selecting Catalog
[10:16:33] INFO: Using Catalog for LST 9-13
[10:16:33] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:16:33] INFO: Selecting Catalog
[10:16:33] INFO: Using Catalog for LST 9-13
[10:16:33] INFO: Selecting Catalog
[10:16:33] INFO: Using Catalog for LST 9-13
[10:16:33] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:16:33] INFO: Selecting Catalog
[10:16:33] INFO: Using Catalog for LST 9-13
[10:16:33] INFO: Selecting Catalog
[10:16:33] INFO: Using Catalog for LST 9-13
[10:16:33] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:16:33] INFO: Selecting Catalog
[10:16:33] INFO: Using Catalog for LST 9-13
[10:16:33] INFO: Selecting Catalog
[10:16:33] INFO: Using Catalog for LST 9-13
[10:16:33] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:16:33] INFO: Selecting Catalog
[10:16:33] INFO: Using Catalog for LST 9-13
[10:16:33] INFO: Selecting Catalog
[10:16:33] INFO: Using Catalog for LST 9-13
[10:16:33] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:16:33] INFO: Selecting Catalog
[10:16:33] INFO: Using Catalog for LST 9-13
[10:16:33] INFO: Selecting Catalog
[10:16:33] INFO: Using Catalog for LST 9-13
[10:16:33] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:16:33] INFO: Selecting Catalog
[10:16:33] INFO: Using Catalog for LST 9-13
[10:16:33] INFO: Selecting Catalog
[10:16:33] INFO: Using Catalog for LST 9-13
[10:16:33] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:16:33] INFO: Selecting Catalog
[10:16:33] INFO: Using Catalog for LST 9-13
[10:16:33] INFO: Selecting Catalog
[10:16:33] INFO: Using Catalog for LST 9-13
[10:16:33] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:16:33] INFO: Selecting Catalog
[10:16:33] INFO: Using Catalog for LST 9-13
[10:16:33] INFO: Selecting Catalog
[10:16:33] INFO: Using Catalog for LST 9-13
[10:16:33] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:16:33] INFO: Selecting Catalog
[10:16:33] INFO: Using Catalog for LST 9-13
[10:16:33] INFO: Selecting Catalog
[10:16:33] INFO: Using Catalog for LST 9-13
[10:16:33] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:16:33] INFO: Selecting Catalog
[10:16:33] INFO: Using Catalog for LST 9-13
[10:16:33] INFO: Selecting Catalog
[10:16:33] INFO: Using Catalog for LST 9-13
[10:16:33] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:16:33] INFO: Selecting Catalog
[10:16:33] INFO: Using Catalog for LST 9-13
[10:16:33] INFO: Selecting Catalog
[10:16:33] INFO: Using Catalog for LST 9-13
[10:16:33] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:16:33] INFO: Selecting Catalog
[10:16:33] INFO: Using Catalog for LST 9-13
[10:16:33] INFO: Selecting Catalog
[10:16:33] INFO: Using Catalog for LST 9-13
[10:16:33] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:16:33] INFO: Selecting Catalog
[10:16:33] INFO: Using Catalog for LST 9-13
[10:16:33] INFO: Selecting Catalog
[10:16:33] INFO: Using Catalog for LST 9-13
[10:16:33] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:16:33] INFO: Selecting Catalog
[10:16:33] INFO: Using Catalog for LST 9-13
[10:16:33] INFO: Selecting Catalog
[10:16:33] INFO: Using Catalog for LST 9-13
[10:16:33] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:16:33] INFO: Selecting Catalog
[10:16:33] INFO: Using Catalog for LST 9-13
[10:16:33] INFO: Selecting Catalog
[10:16:33] INFO: Using Catalog for LST 9-13
[10:16:33] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:16:34] INFO: Selecting Catalog
[10:16:34] INFO: Using Catalog for LST 9-13
[10:16:34] INFO: Selecting Catalog
[10:16:34] INFO: Using Catalog for LST 9-13
[10:16:34] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:16:34] INFO: Selecting Catalog
[10:16:34] INFO: Using Catalog for LST 9-13
[10:16:34] INFO: Selecting Catalog
[10:16:34] INFO: Using Catalog for LST 9-13
[10:16:34] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:16:34] INFO: Selecting Catalog
[10:16:34] INFO: Using Catalog for LST 9-13
[10:16:34] INFO: Selecting Catalog
[10:16:34] INFO: Using Catalog for LST 9-13
[10:16:34] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:16:34] INFO: Selecting Catalog
[10:16:34] INFO: Using Catalog for LST 9-13
[10:16:34] INFO: Selecting Catalog
[10:16:34] INFO: Using Catalog for LST 9-13
[10:16:34] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:16:34] INFO: Selecting Catalog
[10:16:34] INFO: Using Catalog for LST 9-13
[10:16:34] INFO: Selecting Catalog
[10:16:34] INFO: Using Catalog for LST 9-13
[10:16:34] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:16:34] INFO: Selecting Catalog
[10:16:34] INFO: Using Catalog for LST 9-13
[10:16:34] INFO: Selecting Catalog
[10:16:34] INFO: Using Catalog for LST 9-13
[10:16:34] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:16:34] INFO: Selecting Catalog
[10:16:34] INFO: Using Catalog for LST 9-13
[10:16:34] INFO: Selecting Catalog
[10:16:34] INFO: Using Catalog for LST 9-13
[10:16:34] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:16:34] INFO: Selecting Catalog
[10:16:34] INFO: Using Catalog for LST 9-13
[10:16:34] INFO: Selecting Catalog
[10:16:34] INFO: Using Catalog for LST 9-13
[10:16:34] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:16:34] INFO: Selecting Catalog
[10:16:34] INFO: Using Catalog for LST 9-13
[10:16:34] INFO: Selecting Catalog
[10:16:34] INFO: Using Catalog for LST 9-13
[10:16:34] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:16:34] INFO: Selecting Catalog
[10:16:34] INFO: Using Catalog for LST 9-13
[10:16:34] INFO: Selecting Catalog
[10:16:34] INFO: Using Catalog for LST 9-13
[10:16:34] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:16:34] INFO: Selecting Catalog
[10:16:34] INFO: Using Catalog for LST 9-13
[10:16:34] INFO: Selecting Catalog
[10:16:34] INFO: Using Catalog for LST 9-13
[10:16:34] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:16:34] INFO: Selecting Catalog
[10:16:34] INFO: Using Catalog for LST 9-13
[10:16:34] INFO: Selecting Catalog
[10:16:34] INFO: Using Catalog for LST 9-13
[10:16:34] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:16:34] INFO: Selecting Catalog
[10:16:34] INFO: Using Catalog for LST 9-13
[10:16:34] INFO: Selecting Catalog
[10:16:34] INFO: Using Catalog for LST 9-13
[10:16:34] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:16:34] INFO: Selecting Catalog
[10:16:34] INFO: Using Catalog for LST 9-13
[10:16:34] INFO: Selecting Catalog
[10:16:34] INFO: Using Catalog for LST 9-13
[10:16:34] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:16:35] INFO: Selecting Catalog
[10:16:35] INFO: Using Catalog for LST 9-13
[10:16:35] INFO: Selecting Catalog
[10:16:35] INFO: Using Catalog for LST 9-13
[10:16:35] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:16:35] INFO: Selecting Catalog
[10:16:35] INFO: Using Catalog for LST 9-13
[10:16:35] INFO: Selecting Catalog
[10:16:35] INFO: Using Catalog for LST 9-13
[10:16:35] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:16:35] INFO: Selecting Catalog
[10:16:35] INFO: Using Catalog for LST 9-13
[10:16:35] INFO: Selecting Catalog
[10:16:35] INFO: Using Catalog for LST 9-13
[10:16:35] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:16:35] INFO: Selecting Catalog
[10:16:35] INFO: Using Catalog for LST 9-13
[10:16:35] INFO: Selecting Catalog
[10:16:35] INFO: Using Catalog for LST 9-13
[10:16:35] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:16:35] INFO: Selecting Catalog
[10:16:35] INFO: Using Catalog for LST 9-13
[10:16:35] INFO: Selecting Catalog
[10:16:35] INFO: Using Catalog for LST 9-13
[10:16:35] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
runSuccessful: True
[10:16:35] ******** End Scheduling Block
[10:16:35] ******** observer = OPERATOR, SB name = 15B287_operator, project ID = AGBT15B_287

how much log? 19716 id: 179197self.history: <gbt.turtle.database.History.History instance at 0x4956b00>self.history.connection: <gbt.turtle.database.TurtleConnection.TurtleConnection instance at 0x4956878>how much converted log? 19924 
#######################################################
 
 
#######################################################
 SCRIPT NUMBER 12, project:AGBT15B_287_40 
 179198 128 OPERATOR 10 Amber Bonsall 2016-01-10 10:16:37 obs_completed 
#######################################################
# test script to update catalog as you go...

########## CHANGE THESE ONLY #############
OnOffOnTime = 10 #minutes (change this to 12 to be in line with DSS scheduling)
obs_per_source = 3 #total observing time per source = OnOffOnTime * obs_per_source
h = Horizon(10.0) #minimum of 10 degrees elevation
h_up = Horizon(85.0) #maximum of 85 degrees due to keyhole
myOff = Offset("J2000",1.0,0.0,cosv=True)  # Off position relative to source
doFirstPointing = True #Setting to False will skip the first pointing
doFirstCal = True  #Setting to False will skip the first 3C calibrator OnOff scan
peak_every = 12 #peak/cal every 12 OnOffOn (every 2.5 hours)
peak_near_source = False #Do another peak when changing to new source
#####################################

######### NOTES ###############
# This script runs in blocks of On-Off-On position switching with
# the two outer 'on' scans sharing one 'off'
# Total on-source time = 20 minutes
# Length of one 'On' or 'Off' = 3 minutes 20 seconds
# Length of one On-Off-On = 10 minutes
# 3 On-Off-On blocks are needed per source (30 minutes total per source)

###### Timing
# It takes 34m to completely observe 1 source+overhead (9 track scans)

execfile("/home/astro-util/projects/15B287_operator/15B287_config.py")
execfile("/home/astro-util/projects/15B287_operator/15B287_utils.py")
Catalog(fluxcal)
Catalog(lband_pointing)

scanTime = OnOffOnTime * 20.0 #seconds
tdelta = DateTime.TimeDelta(minutes=OnOffOnTime)
obs_count = 0
doCal = doFirstCal
doPointing = doFirstPointing
project_obs = 0
old_catalog_name = 'dummy'
fullcat = '/home/astro-util/projects/15B287_operator/15B287_operator.cat'

Configure(config_1)

while project_obs < 100:
    mycat,altcal = select_my_catalog()
    if mycat == old_catalog_name:
        print 'SAME CATALOG HAS BEEN SELECTED: Using FULL catalog'
        mycat = fullcat
        altcal = '3C309_1'
    old_catalog_name = mycat
    c = Catalog(mycat)
    sources = c.keys()
    for source in sources:
        doBalance = True
        newPeak = True
        calibrator = c[source]["calibrator"]
        n_obs = int(float(c[source]["n_obs"]))
        obs_left = obs_per_source-n_obs
        obs_ok = obs_left > 0
        t_now = Now()
        if t_now != None and obs_ok:
            source_rise = h.GetRise(source)
            source_set  = h.GetSet(source)
            keyhole_rise = h_up.GetRise(source)
            keyhole_set = h_up.GetSet(source)
            if source_rise != None or keyhole_set != None:
                if source_set != None and keyhole_rise != None:
                    t_ok = ((t_now + tdelta) < source_set)
                    t_ok = t_ok and (t_now >= source_rise)
                    t_ok = t_ok and ((t_now + tdelta) < keyhole_rise)
                else:
                    t_ok = True
            else:
                t_ok = False
        else:
            t_ok = False

        source_ok = t_ok and obs_ok

        if source_ok:
            if doPointing == True:
                #check the calibrator is above the horizon
                keyhole_cal_rise = h_up.GetRise(calibrator)
                keyhole_cal_set = h_up.GetSet(calibrator)
                cal_rise = h.GetRise(calibrator)
                if cal_rise>t_now or keyhole_cal_set == None:
                    myCal = altcal #low circumpolar alternative
                    print 'Calibrator %s is too low: Using %s' %(calibrator,altcal)
                else:
                    if keyhole_cal_rise != None:
                        if (t_now+tdelta) >= keyhole_cal_rise:
                            print 'Calibrator %s is in keyhole: Using %s' %(calibrator,altcal)
                            myCal = altcal
                        else:
                            myCal = calibrator
                    else:
                        myCal = calibrator

                if obs_count == 0:
                    AutoPeakFocus(myCal)
                    #Break("Check Peak and Focus")
                else:
                    AutoPeak(myCal)
                Configure(config_1)
                doBalance = True
                doPointing = False

            if doCal:
                Slew(myCal)
                Balance()
                print 'Calibration scans (OnOff) :%s ' %(myCal)
                OnOff(myCal,myOff,120.0)
                doCal = False
                doBalance = True

            for i in range(obs_left):
                t_now = Now()   #check time ok again
                t_ok = False
                if t_now != None and keyhole_set != None:
                    if source_rise != None:
                        if source_set != None:
                            t_ok = ((t_now + tdelta) < source_set)
                            t_ok = t_ok and (t_now >= source_rise)
                            if keyhole_rise != None:
                                t_ok = t_ok and ((t_now+tdelta) < keyhole_rise)
                        else:
                            t_ok = True
                    else:
                        t_ok = False
                else:
                    t_ok = False

                if t_ok:
                    if peak_near_source and newPeak:
                        Slew(source)
                        AutoPeak()
                        Configure(config_1)
                        newPeak = False
                        doBalance = True
                    if doBalance:
                        Slew(source)
                        Balance()
                        doBalance = False

                    Comment("Starting on-source scan")
                    Track(source,None,scanTime)
                    Comment("Starting off-source scan")
                    Track(source,None,scanTime,fixedOffset=myOff)
                    Comment("Starting on-source scan")
                    Track(source,None,scanTime)
                    obs_count = obs_count + 1
                    obs_tot = obs_per_source+1-obs_left+i
                    print '%s: OBS COMPLETE = %s/%s' %(source,obs_tot,obs_per_source)
                    update_my_catalogs(source,obs_tot)

                    if obs_count % peak_every == 0:  #Cal/pointing interval
                        doCal = True
                        doPointing = True
        if source_ok and mycat == fullcat:
            break
    project_obs = project_obs+1

#######################################################
 LOG SESSION NUMBER 12 
[10:16:37] ******** Begin Scheduling Block
[10:16:37] ******** observer = OPERATOR, SB name = 15B287_operator, project ID = AGBT15B_287, date = 10 Jan 2016

[10:16:37] Configuring telescope.
[10:16:37]     Setting State: Activating
[10:16:39]     Setting State: Ready
[10:16:40]     Setting State: Activating
[10:16:41]     Setting State: Ready
[10:16:41] Default values are
[10:16:41] if3freq  =  [0, 0, 0]
[10:16:41] notchfilter  =  In
[10:16:41] polswitch  =  thru
[10:16:41] The bad devices are: 
[10:16:41] OpticalDriver5
[10:16:41] The bad devices are: 
[10:16:41] OpticalDriver5
[10:16:41] Waiting for the Rcvr1_2 to finish activating
[10:16:41] . .
[10:16:41] Checking telescope
[10:16:41] Configuration Complete
[10:16:42] INFO: Selecting Catalog
[10:16:42] INFO: Using Catalog for LST 9-13
[10:16:42] INFO: Selecting Catalog
[10:16:42] INFO: Using Catalog for LST 9-13
[10:16:42] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:16:42] Calibrator 3C48 is too low: Using 3C309_1
[10:16:42] Configuring telescope.
[10:16:43]     Setting State: Activating
[10:16:44]     Setting State: Ready
[10:16:44]     Setting State: Activating
[10:16:45]     Setting State: Ready
[10:16:45] Default values are
[10:16:45] if3freq  =  [0]
[10:16:45] notchfilter  =  In
[10:16:45] polswitch  =  thru
[10:16:45] The bad devices are: 
[10:16:45] OpticalDriver5

[10:16:45] Checking telescope
[10:16:45] Configuration Complete
[10:16:45] source : 3C309_1
               F1 : 1.4
               F2 : 32.0
               S22235 : 1.0
               S1400 : 7.5
               angsize : 1.5
               location : J2000 @ (14:59:07.58, 71:40:19.87)
[10:16:45] Slewing to source.
[10:16:45] In state Ready, waiting for state Activating
[10:16:45]     Setting State: Activating
[10:16:45] Detected state Activating
[10:16:45] In state Activating, waiting for state Ready
[10:16:58]     Setting State: Ready
[10:16:58] Detected state Ready
[10:16:58] Balancing IF system.
[10:16:58] Balancing IFRack
[10:16:58]     Setting State: Activating
[10:16:58]     Setting State: Ready
[10:17:00] the sampler values are:
[10:17:00] RF_power 1 : 1.010742
[10:17:00] RF_power 2 : 0.004882812
[10:17:00] RF_power 3 : 1.098633
[10:17:00] RF_power 4 : 0.01464844
[10:17:00] RF_power 5 : 0.03417969
[10:17:00] RF_power 6 : 2.93457
[10:17:00] RF_power 7 : 0.46875
[10:17:00] RF_power 8 : 0.02929688
[10:17:00] source : 3C309_1
               F1 : 1.4
               F2 : 32.0
               S22235 : 1.0
               S1400 : 7.5
               angsize : 1.5
               location : J2000 @ (14:59:07.58, 71:40:19.87)
[10:17:00] Peak: Subscan 1 of 4
[10:17:01] In state Ready, waiting for state Running
[10:17:01]     Setting State: Activating
[10:17:24]     Setting State: Committed
[10:17:26]     Setting State: Running
[10:17:26] Detected state Running
[10:17:26] *** Notice: This subscan will be numbered as scan #78 in your data reduction package.
[10:17:26] In state Running, waiting for state Ready
[10:17:56]     Setting State: Stopping
[10:18:02]     Setting State: Ready
[10:18:02] Detected state Ready
[10:18:02] Ygor Telescope: WaitForStopping
[10:18:02] Peak: Subscan 2 of 4
[10:18:03] In state Ready, waiting for state Running
[10:18:03]     Setting State: Activating
[10:18:12]     Setting State: Committed
[10:18:14]     Setting State: Running
[10:18:14] Detected state Running
[10:18:14] *** Notice: This subscan will be numbered as scan #79 in your data reduction package.
[10:18:14] In state Running, waiting for state Ready
[10:18:44]     Setting State: Stopping
[10:18:50]     Setting State: Ready
[10:18:50] Detected state Ready
[10:18:50] Ygor Telescope: WaitForStopping
[10:18:51] . *** Updating antenna's pointing to az2=0.0178 and el=0.3349 arcmins

[10:18:51] Peak: Subscan 3 of 4
[10:18:52] In state Ready, waiting for state Running
[10:18:52]     Setting State: Activating
[10:19:12]     Setting State: Committed
[10:19:14]     Setting State: Running
[10:19:14] Detected state Running
[10:19:14] *** Notice: This subscan will be numbered as scan #80 in your data reduction package.
[10:19:14] In state Running, waiting for state Ready
[10:19:44]     Setting State: Stopping
[10:19:49]     Setting State: Ready
[10:19:49] Detected state Ready
[10:19:49] Ygor Telescope: WaitForStopping
[10:19:49] Peak: Subscan 4 of 4
[10:19:49] In state Ready, waiting for state Running
[10:19:49]     Setting State: Activating
[10:19:57]     Setting State: Committed
[10:19:59]     Setting State: Running
[10:19:59] Detected state Running
[10:19:59] *** Notice: This subscan will be numbered as scan #81 in your data reduction package.
[10:19:59] In state Running, waiting for state Ready
[10:20:29]     Setting State: Stopping
[10:20:33]     Setting State: Ready
[10:20:33] Detected state Ready
[10:20:33] Ygor Telescope: WaitForStopping
[10:20:34] . *** Updating antenna's pointing to az2=0.0178 and el=0.3160 arcmins

[10:20:35] source : 3C309_1
               F1 : 1.4
               F2 : 32.0
               S22235 : 1.0
               S1400 : 7.5
               angsize : 1.5
               location : J2000 @ (14:59:07.58, 71:40:19.87)
[10:20:35] Focus: Subscan 1 of 1
[10:20:35] In state Ready, waiting for state Running
[10:20:36]     Setting State: Activating
[10:21:01]     Setting State: Committed
[10:21:03]     Setting State: Running
[10:21:03] Detected state Running
[10:21:03] *** Notice: This subscan will be numbered as scan #82 in your data reduction package.
[10:21:03] In state Running, waiting for state Ready
[10:22:03]     Setting State: Stopping
[10:22:05]     Setting State: Ready
[10:22:05] Detected state Ready
[10:22:05] Ygor Telescope: WaitForStopping
[10:22:06] . *** Updating antenna's focus to -32.05 mm

[10:22:07] Configuring telescope.
[10:22:07]     Setting State: Activating
[10:22:08]     Setting State: Ready
[10:22:08]     Setting State: Activating
[10:22:09]     Setting State: Ready
[10:22:09] Default values are
[10:22:09] if3freq  =  [0, 0, 0]
[10:22:09] notchfilter  =  In
[10:22:09] polswitch  =  thru
[10:22:09] The bad devices are: 
[10:22:09] OpticalDriver5
[10:22:09] The bad devices are: 
[10:22:09] OpticalDriver5

[10:22:09] Checking telescope
[10:22:09] Configuration Complete
[10:22:09] source : 3C309_1
               F1 : 1.4
               F2 : 32.0
               S22235 : 1.0
               S1400 : 7.5
               angsize : 1.5
               location : J2000 @ (14:59:07.58, 71:40:19.87)
[10:22:09] Slewing to source.
[10:22:10] In state Ready, waiting for state Activating
     Setting State: Activating
[10:22:10] Detected state Activating
[10:22:10] In state Activating, waiting for state Ready
[10:22:37]     Setting State: Ready
[10:22:37] Detected state Ready
[10:22:37] Balancing IF system.
[10:22:37] Balancing IFRack
[10:22:38]     Setting State: Activating
[10:22:38]     Setting State: Ready
[10:22:40] the sampler values are:
[10:22:40] RF_power 1 : 3.076172
[10:22:40] RF_power 2 : 0.009765625
[10:22:40] RF_power 3 : 3.120117
[10:22:40] RF_power 4 : 0.01464844
[10:22:40] RF_power 5 : 0.02929688
[10:22:40] RF_power 6 : 2.954102
[10:22:40] RF_power 7 : 3.173828
[10:22:40] RF_power 8 : 0.02441406
[10:22:40] Balancing VEGAS
[10:22:40]     Setting State: Activating
[10:22:40]     Setting State: Ready
[10:22:41]     Setting State: Activating
[10:22:41]     Setting State: Ready
[10:22:41] Calibration scans (OnOff) :3C309_1 
[10:22:41] source : 3C309_1
               F1 : 1.4
               F2 : 32.0
               S22235 : 1.0
               S1400 : 7.5
               angsize : 1.5
               location : J2000 @ (14:59:07.58, 71:40:19.87)
[10:22:42] OnOff: Subscan 1 of 2
[10:22:42] In state Ready, waiting for state Running
[10:22:42]     Setting State: Activating
[10:22:47]     Setting State: Committed
[10:22:49]     Setting State: Running
[10:22:49] Detected state Running
[10:22:49] *** Notice: This subscan will be numbered as scan #83 in your data reduction package.
[10:22:49] In state Running, waiting for state Ready
[10:24:49]     Setting State: Stopping
[10:24:51]     Setting State: Ready
[10:24:51] Detected state Ready
[10:24:51] Ygor Telescope: WaitForStopping
[10:24:51] OnOff: Subscan 2 of 2
[10:24:51] In state Ready, waiting for state Running
[10:24:51]     Setting State: Activating
[10:25:04]     Setting State: Committed
[10:25:06]     Setting State: Running
[10:25:06] Detected state Running
[10:25:06] *** Notice: This subscan will be numbered as scan #84 in your data reduction package.
[10:25:06] In state Running, waiting for state Ready
[10:27:06]     Setting State: Stopping
[10:27:08]     Setting State: Ready
[10:27:08] Detected state Ready
[10:27:08] Ygor Telescope: WaitForStopping
[10:27:08] INFO: Selecting Catalog
[10:27:08] INFO: Using Catalog for LST 9-13
[10:27:08] INFO: Selecting Catalog
[10:27:08] INFO: Using Catalog for LST 9-13
[10:27:08] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:27:08] INFO: Selecting Catalog
[10:27:08] INFO: Using Catalog for LST 9-13
[10:27:08] INFO: Selecting Catalog
[10:27:08] INFO: Using Catalog for LST 9-13
[10:27:08] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:27:08] INFO: Selecting Catalog
[10:27:08] INFO: Using Catalog for LST 9-13
[10:27:08] INFO: Selecting Catalog
[10:27:08] INFO: Using Catalog for LST 9-13
[10:27:08] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:27:08] INFO: Selecting Catalog
[10:27:08] INFO: Using Catalog for LST 9-13
[10:27:08] INFO: Selecting Catalog
[10:27:08] INFO: Using Catalog for LST 9-13
[10:27:08] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:27:08] INFO: Selecting Catalog
[10:27:08] INFO: Using Catalog for LST 9-13
[10:27:08] INFO: Selecting Catalog
[10:27:08] INFO: Using Catalog for LST 9-13
[10:27:08] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:27:08] INFO: Selecting Catalog
[10:27:08] INFO: Using Catalog for LST 9-13
[10:27:08] INFO: Selecting Catalog
[10:27:08] INFO: Using Catalog for LST 9-13
[10:27:08] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:27:08] INFO: Selecting Catalog
[10:27:08] INFO: Using Catalog for LST 9-13
[10:27:08] INFO: Selecting Catalog
[10:27:08] INFO: Using Catalog for LST 9-13
[10:27:08] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:27:08] INFO: Selecting Catalog
[10:27:08] INFO: Using Catalog for LST 9-13
[10:27:08] INFO: Selecting Catalog
[10:27:08] INFO: Using Catalog for LST 9-13
[10:27:08] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:27:08] INFO: Selecting Catalog
[10:27:08] INFO: Using Catalog for LST 9-13
[10:27:08] INFO: Selecting Catalog
[10:27:08] INFO: Using Catalog for LST 9-13
[10:27:08] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:27:08] INFO: Selecting Catalog
[10:27:08] INFO: Using Catalog for LST 9-13
[10:27:08] INFO: Selecting Catalog
[10:27:08] INFO: Using Catalog for LST 9-13
[10:27:08] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:27:08] INFO: Selecting Catalog
[10:27:08] INFO: Using Catalog for LST 9-13
[10:27:08] INFO: Selecting Catalog
[10:27:08] INFO: Using Catalog for LST 9-13
[10:27:08] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:27:08] INFO: Selecting Catalog
[10:27:08] INFO: Using Catalog for LST 9-13
[10:27:08] INFO: Selecting Catalog
[10:27:08] INFO: Using Catalog for LST 9-13
[10:27:08] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:27:08] INFO: Selecting Catalog
[10:27:08] INFO: Using Catalog for LST 9-13
[10:27:08] INFO: Selecting Catalog
[10:27:08] INFO: Using Catalog for LST 9-13
[10:27:08] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:27:08] INFO: Selecting Catalog
[10:27:08] INFO: Using Catalog for LST 9-13
[10:27:08] INFO: Selecting Catalog
[10:27:08] INFO: Using Catalog for LST 9-13
[10:27:08] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:27:08] INFO: Selecting Catalog
[10:27:08] INFO: Using Catalog for LST 9-13
[10:27:08] INFO: Selecting Catalog
[10:27:08] INFO: Using Catalog for LST 9-13
[10:27:08] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:27:09] INFO: Selecting Catalog
[10:27:09] INFO: Using Catalog for LST 9-13
[10:27:09] INFO: Selecting Catalog
[10:27:09] INFO: Using Catalog for LST 9-13
[10:27:09] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:27:09] INFO: Selecting Catalog
[10:27:09] INFO: Using Catalog for LST 9-13
[10:27:09] INFO: Selecting Catalog
[10:27:09] INFO: Using Catalog for LST 9-13
[10:27:09] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:27:09] INFO: Selecting Catalog
[10:27:09] INFO: Using Catalog for LST 9-13
[10:27:09] INFO: Selecting Catalog
[10:27:09] INFO: Using Catalog for LST 9-13
[10:27:09] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:27:09] INFO: Selecting Catalog
[10:27:09] INFO: Using Catalog for LST 9-13
[10:27:09] INFO: Selecting Catalog
[10:27:09] INFO: Using Catalog for LST 9-13
[10:27:09] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:27:09] INFO: Selecting Catalog
[10:27:09] INFO: Using Catalog for LST 9-13
[10:27:09] INFO: Selecting Catalog
[10:27:09] INFO: Using Catalog for LST 9-13
[10:27:09] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:27:09] INFO: Selecting Catalog
[10:27:09] INFO: Using Catalog for LST 9-13
[10:27:09] INFO: Selecting Catalog
[10:27:09] INFO: Using Catalog for LST 9-13
[10:27:09] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:27:09] INFO: Selecting Catalog
[10:27:09] INFO: Using Catalog for LST 9-13
[10:27:09] INFO: Selecting Catalog
[10:27:09] INFO: Using Catalog for LST 9-13
[10:27:09] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:27:09] INFO: Selecting Catalog
[10:27:09] INFO: Using Catalog for LST 9-13
[10:27:09] INFO: Selecting Catalog
[10:27:09] INFO: Using Catalog for LST 9-13
[10:27:09] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:27:09] INFO: Selecting Catalog
[10:27:09] INFO: Using Catalog for LST 9-13
[10:27:09] INFO: Selecting Catalog
[10:27:09] INFO: Using Catalog for LST 9-13
[10:27:09] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:27:09] INFO: Selecting Catalog
[10:27:09] INFO: Using Catalog for LST 9-13
[10:27:09] INFO: Selecting Catalog
[10:27:09] INFO: Using Catalog for LST 9-13
[10:27:09] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:27:09] INFO: Selecting Catalog
[10:27:09] INFO: Using Catalog for LST 9-13
[10:27:09] INFO: Selecting Catalog
[10:27:09] INFO: Using Catalog for LST 9-13
[10:27:09] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:27:09] INFO: Selecting Catalog
[10:27:09] INFO: Using Catalog for LST 9-13
[10:27:09] INFO: Selecting Catalog
[10:27:09] INFO: Using Catalog for LST 9-13
[10:27:09] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:27:09] INFO: Selecting Catalog
[10:27:09] INFO: Using Catalog for LST 9-13
[10:27:09] INFO: Selecting Catalog
[10:27:09] INFO: Using Catalog for LST 9-13
[10:27:09] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:27:09] INFO: Selecting Catalog
[10:27:09] INFO: Using Catalog for LST 9-13
[10:27:09] INFO: Selecting Catalog
[10:27:09] INFO: Using Catalog for LST 9-13
[10:27:09] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:27:09] INFO: Selecting Catalog
[10:27:09] INFO: Using Catalog for LST 9-13
[10:27:09] INFO: Selecting Catalog
[10:27:09] INFO: Using Catalog for LST 9-13
[10:27:09] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:27:09] INFO: Selecting Catalog
[10:27:09] INFO: Using Catalog for LST 9-13
[10:27:09] INFO: Selecting Catalog
[10:27:09] INFO: Using Catalog for LST 9-13
[10:27:09] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:27:09] INFO: Selecting Catalog
[10:27:09] INFO: Using Catalog for LST 9-13
[10:27:09] INFO: Selecting Catalog
[10:27:09] INFO: Using Catalog for LST 9-13
[10:27:09] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:27:10] INFO: Selecting Catalog
[10:27:10] INFO: Using Catalog for LST 9-13
[10:27:10] INFO: Selecting Catalog
[10:27:10] INFO: Using Catalog for LST 9-13
[10:27:10] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:27:10] INFO: Selecting Catalog
[10:27:10] INFO: Using Catalog for LST 9-13
[10:27:10] INFO: Selecting Catalog
[10:27:10] INFO: Using Catalog for LST 9-13
[10:27:10] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:27:10] INFO: Selecting Catalog
[10:27:10] INFO: Using Catalog for LST 9-13
[10:27:10] INFO: Selecting Catalog
[10:27:10] INFO: Using Catalog for LST 9-13
[10:27:10] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:27:10] INFO: Selecting Catalog
[10:27:10] INFO: Using Catalog for LST 9-13
[10:27:10] INFO: Selecting Catalog
[10:27:10] INFO: Using Catalog for LST 9-13
[10:27:10] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:27:10] INFO: Selecting Catalog
[10:27:10] INFO: Using Catalog for LST 9-13
[10:27:10] INFO: Selecting Catalog
[10:27:10] INFO: Using Catalog for LST 9-13
[10:27:10] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:27:10] INFO: Selecting Catalog
[10:27:10] INFO: Using Catalog for LST 9-13
[10:27:10] INFO: Selecting Catalog
[10:27:10] INFO: Using Catalog for LST 9-13
[10:27:10] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:27:10] INFO: Selecting Catalog
[10:27:10] INFO: Using Catalog for LST 9-13
[10:27:10] INFO: Selecting Catalog
[10:27:10] INFO: Using Catalog for LST 9-13
[10:27:10] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:27:10] INFO: Selecting Catalog
[10:27:10] INFO: Using Catalog for LST 9-13
[10:27:10] INFO: Selecting Catalog
[10:27:10] INFO: Using Catalog for LST 9-13
[10:27:10] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:27:10] INFO: Selecting Catalog
[10:27:10] INFO: Using Catalog for LST 9-13
[10:27:10] INFO: Selecting Catalog
[10:27:10] INFO: Using Catalog for LST 9-13
[10:27:10] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:27:10] INFO: Selecting Catalog
[10:27:10] INFO: Using Catalog for LST 9-13
[10:27:10] INFO: Selecting Catalog
[10:27:10] INFO: Using Catalog for LST 9-13
[10:27:10] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:27:10] INFO: Selecting Catalog
[10:27:10] INFO: Using Catalog for LST 9-13
[10:27:10] INFO: Selecting Catalog
[10:27:10] INFO: Using Catalog for LST 9-13
[10:27:10] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:27:10] INFO: Selecting Catalog
[10:27:10] INFO: Using Catalog for LST 9-13
[10:27:10] INFO: Selecting Catalog
[10:27:10] INFO: Using Catalog for LST 9-13
[10:27:10] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:27:10] INFO: Selecting Catalog
[10:27:10] INFO: Using Catalog for LST 9-13
[10:27:10] INFO: Selecting Catalog
[10:27:10] INFO: Using Catalog for LST 9-13
[10:27:10] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:27:10] INFO: Selecting Catalog
[10:27:10] INFO: Using Catalog for LST 9-13
[10:27:10] INFO: Selecting Catalog
[10:27:10] INFO: Using Catalog for LST 9-13
[10:27:10] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:27:10] INFO: Selecting Catalog
[10:27:10] INFO: Using Catalog for LST 9-13
[10:27:10] INFO: Selecting Catalog
[10:27:10] INFO: Using Catalog for LST 9-13
[10:27:10] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:27:10] INFO: Selecting Catalog
[10:27:10] INFO: Using Catalog for LST 9-13
[10:27:10] INFO: Selecting Catalog
[10:27:10] INFO: Using Catalog for LST 9-13
[10:27:10] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:27:11] INFO: Selecting Catalog
[10:27:11] INFO: Using Catalog for LST 9-13
[10:27:11] INFO: Selecting Catalog
[10:27:11] INFO: Using Catalog for LST 9-13
[10:27:11] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
runSuccessful: True
[10:27:11] ******** End Scheduling Block
[10:27:11] ******** observer = OPERATOR, SB name = 15B287_operator, project ID = AGBT15B_287

how much log? 19633 id: 179198self.history: <gbt.turtle.database.History.History instance at 0x4956b00>self.history.connection: <gbt.turtle.database.TurtleConnection.TurtleConnection instance at 0x4956878>how much converted log? 19841 
#######################################################
 
 
#######################################################
 SCRIPT NUMBER 13, project:AGBT15B_287_40 
 179199 128 OPERATOR 10 Amber Bonsall 2016-01-10 10:27:13 obs_completed 
#######################################################
# test script to update catalog as you go...

########## CHANGE THESE ONLY #############
OnOffOnTime = 10 #minutes (change this to 12 to be in line with DSS scheduling)
obs_per_source = 3 #total observing time per source = OnOffOnTime * obs_per_source
h = Horizon(10.0) #minimum of 10 degrees elevation
h_up = Horizon(85.0) #maximum of 85 degrees due to keyhole
myOff = Offset("J2000",1.0,0.0,cosv=True)  # Off position relative to source
doFirstPointing = True #Setting to False will skip the first pointing
doFirstCal = True  #Setting to False will skip the first 3C calibrator OnOff scan
peak_every = 12 #peak/cal every 12 OnOffOn (every 2.5 hours)
peak_near_source = False #Do another peak when changing to new source
#####################################

######### NOTES ###############
# This script runs in blocks of On-Off-On position switching with
# the two outer 'on' scans sharing one 'off'
# Total on-source time = 20 minutes
# Length of one 'On' or 'Off' = 3 minutes 20 seconds
# Length of one On-Off-On = 10 minutes
# 3 On-Off-On blocks are needed per source (30 minutes total per source)

###### Timing
# It takes 34m to completely observe 1 source+overhead (9 track scans)

execfile("/home/astro-util/projects/15B287_operator/15B287_config.py")
execfile("/home/astro-util/projects/15B287_operator/15B287_utils.py")
Catalog(fluxcal)
Catalog(lband_pointing)

scanTime = OnOffOnTime * 20.0 #seconds
tdelta = DateTime.TimeDelta(minutes=OnOffOnTime)
obs_count = 0
doCal = doFirstCal
doPointing = doFirstPointing
project_obs = 0
old_catalog_name = 'dummy'
fullcat = '/home/astro-util/projects/15B287_operator/15B287_operator.cat'

Configure(config_1)

while project_obs < 100:
    mycat,altcal = select_my_catalog()
    if mycat == old_catalog_name:
        print 'SAME CATALOG HAS BEEN SELECTED: Using FULL catalog'
        mycat = fullcat
        altcal = '3C309_1'
    old_catalog_name = mycat
    c = Catalog(mycat)
    sources = c.keys()
    for source in sources:
        doBalance = True
        newPeak = True
        calibrator = c[source]["calibrator"]
        n_obs = int(float(c[source]["n_obs"]))
        obs_left = obs_per_source-n_obs
        obs_ok = obs_left > 0
        t_now = Now()
        if t_now != None and obs_ok:
            source_rise = h.GetRise(source)
            source_set  = h.GetSet(source)
            keyhole_rise = h_up.GetRise(source)
            keyhole_set = h_up.GetSet(source)
            if source_rise != None or keyhole_set != None:
                if source_set != None and keyhole_rise != None:
                    t_ok = ((t_now + tdelta) < source_set)
                    t_ok = t_ok and (t_now >= source_rise)
                    t_ok = t_ok and ((t_now + tdelta) < keyhole_rise)
                else:
                    t_ok = True
            else:
                t_ok = False
        else:
            t_ok = False

        source_ok = t_ok and obs_ok

        if source_ok:
            if doPointing == True:
                #check the calibrator is above the horizon
                keyhole_cal_rise = h_up.GetRise(calibrator)
                keyhole_cal_set = h_up.GetSet(calibrator)
                cal_rise = h.GetRise(calibrator)
                if cal_rise>t_now or keyhole_cal_set == None:
                    myCal = altcal #low circumpolar alternative
                    print 'Calibrator %s is too low: Using %s' %(calibrator,altcal)
                else:
                    if keyhole_cal_rise != None:
                        if (t_now+tdelta) >= keyhole_cal_rise:
                            print 'Calibrator %s is in keyhole: Using %s' %(calibrator,altcal)
                            myCal = altcal
                        else:
                            myCal = calibrator
                    else:
                        myCal = calibrator

                if obs_count == 0:
                    AutoPeakFocus(myCal)
                    #Break("Check Peak and Focus")
                else:
                    AutoPeak(myCal)
                Configure(config_1)
                doBalance = True
                doPointing = False

            if doCal:
                Slew(myCal)
                Balance()
                print 'Calibration scans (OnOff) :%s ' %(myCal)
                OnOff(myCal,myOff,120.0)
                doCal = False
                doBalance = True

            for i in range(obs_left):
                t_now = Now()   #check time ok again
                t_ok = False
                if t_now != None and keyhole_set != None:
                    if source_rise != None:
                        if source_set != None:
                            t_ok = ((t_now + tdelta) < source_set)
                            t_ok = t_ok and (t_now >= source_rise)
                            if keyhole_rise != None:
                                t_ok = t_ok and ((t_now+tdelta) < keyhole_rise)
                        else:
                            t_ok = True
                    else:
                        t_ok = False
                else:
                    t_ok = False

                if t_ok:
                    if peak_near_source and newPeak:
                        Slew(source)
                        AutoPeak()
                        Configure(config_1)
                        newPeak = False
                        doBalance = True
                    if doBalance:
                        Slew(source)
                        Balance()
                        doBalance = False

                    Comment("Starting on-source scan")
                    Track(source,None,scanTime)
                    Comment("Starting off-source scan")
                    Track(source,None,scanTime,fixedOffset=myOff)
                    Comment("Starting on-source scan")
                    Track(source,None,scanTime)
                    obs_count = obs_count + 1
                    obs_tot = obs_per_source+1-obs_left+i
                    print '%s: OBS COMPLETE = %s/%s' %(source,obs_tot,obs_per_source)
                    update_my_catalogs(source,obs_tot)

                    if obs_count % peak_every == 0:  #Cal/pointing interval
                        doCal = True
                        doPointing = True
        if source_ok and mycat == fullcat:
            break
    project_obs = project_obs+1

#######################################################
 LOG SESSION NUMBER 13 
[10:27:13] ******** Begin Scheduling Block
[10:27:13] ******** observer = OPERATOR, SB name = 15B287_operator, project ID = AGBT15B_287, date = 10 Jan 2016

[10:27:13] Configuring telescope.
[10:27:13]     Setting State: Activating
[10:27:14]     Setting State: Ready
[10:27:14]     Setting State: Activating
[10:27:15]     Setting State: Ready
[10:27:15] Default values are
[10:27:15] if3freq  =  [0, 0, 0]
[10:27:15] notchfilter  =  In
[10:27:15] polswitch  =  thru
[10:27:15] The bad devices are: 
[10:27:15] OpticalDriver5
[10:27:15] The bad devices are: 
[10:27:15] OpticalDriver5

[10:27:15] Checking telescope
[10:27:15] Configuration Complete
[10:27:15] INFO: Selecting Catalog
[10:27:15] INFO: Using Catalog for LST 9-13
[10:27:15] INFO: Selecting Catalog
[10:27:15] INFO: Using Catalog for LST 9-13
[10:27:15] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:27:16] Calibrator 3C48 is too low: Using 3C309_1
[10:27:16] Configuring telescope.
[10:27:16]     Setting State: Activating
[10:27:18]     Setting State: Ready
[10:27:18]     Setting State: Activating
[10:27:19]     Setting State: Ready
[10:27:19] Default values are
[10:27:19] if3freq  =  [0]
[10:27:19] notchfilter  =  In
[10:27:19] polswitch  =  thru
[10:27:19] The bad devices are: 
[10:27:19] OpticalDriver5

[10:27:19] Checking telescope
[10:27:19] Configuration Complete
[10:27:19] source : 3C309_1
               F1 : 1.4
               F2 : 32.0
               S22235 : 1.0
               S1400 : 7.5
               angsize : 1.5
               location : J2000 @ (14:59:07.58, 71:40:19.87)
[10:27:19] Slewing to source.
[10:27:19] In state Ready, waiting for state Activating
[10:27:19]     Setting State: Activating
[10:27:19] Detected state Activating
[10:27:19] In state Activating, waiting for state Ready
[10:27:32]     Setting State: Ready
[10:27:32] Detected state Ready
[10:27:32] Balancing IF system.
[10:27:32] Balancing IFRack
[10:27:33]     Setting State: Activating
[10:27:33]     Setting State: Ready
[10:27:35] the sampler values are:
[10:27:35] RF_power 1 : 0.9912109
[10:27:35] RF_power 2 : 0.004882812
[10:27:35] RF_power 3 : 1.069336
[10:27:35] RF_power 4 : 0.01464844
[10:27:35] RF_power 5 : 0.03417969
[10:27:35] RF_power 6 : 2.851562
[10:27:35] RF_power 7 : 0.4785156
[10:27:35] RF_power 8 : 0.02441406
[10:27:35] source : 3C309_1
               F1 : 1.4
               F2 : 32.0
               S22235 : 1.0
               S1400 : 7.5
               angsize : 1.5
               location : J2000 @ (14:59:07.58, 71:40:19.87)
[10:27:35] Peak: Subscan 1 of 4
[10:27:35] In state Ready, waiting for state Running
[10:27:35]     Setting State: Activating
[10:27:59]     Setting State: Committed
[10:28:01]     Setting State: Running
[10:28:01] Detected state Running
[10:28:01] *** Notice: This subscan will be numbered as scan #85 in your data reduction package.
[10:28:01] In state Running, waiting for state Ready
[10:28:31]     Setting State: Stopping
[10:28:37]     Setting State: Ready
[10:28:37] Detected state Ready
[10:28:37] Ygor Telescope: WaitForStopping
[10:28:37] Peak: Subscan 2 of 4
[10:28:38] In state Ready, waiting for state Running
[10:28:38]     Setting State: Activating
[10:28:47]     Setting State: Committed
[10:28:49]     Setting State: Running
[10:28:49] Detected state Running
[10:28:49] *** Notice: This subscan will be numbered as scan #86 in your data reduction package.
[10:28:49] In state Running, waiting for state Ready
[10:29:19]     Setting State: Stopping
[10:29:25]     Setting State: Ready
[10:29:25] Detected state Ready
[10:29:25] Ygor Telescope: WaitForStopping
[10:29:26] *** Updating antenna's pointing to az2=0.0230 and el=0.3160 arcmins

[10:29:26] Peak: Subscan 3 of 4
[10:29:27] In state Ready, waiting for state Running
[10:29:27]     Setting State: Activating
[10:29:47]     Setting State: Committed
[10:29:49]     Setting State: Running
[10:29:49] Detected state Running
[10:29:49] *** Notice: This subscan will be numbered as scan #87 in your data reduction package.
[10:29:49] In state Running, waiting for state Ready
[10:30:19]     Setting State: Stopping
[10:30:24]     Setting State: Ready
[10:30:24] Detected state Ready
[10:30:24] Ygor Telescope: WaitForStopping
[10:30:24] Peak: Subscan 4 of 4
[10:30:24] In state Ready, waiting for state Running
[10:30:24]     Setting State: Activating
[10:30:32]     Setting State: Committed
[10:30:34]     Setting State: Running
[10:30:34] Detected state Running
[10:30:34] *** Notice: This subscan will be numbered as scan #88 in your data reduction package.
[10:30:34] In state Running, waiting for state Ready
[10:31:04]     Setting State: Stopping
[10:31:08]     Setting State: Ready
[10:31:08] Detected state Ready
[10:31:08] Ygor Telescope: WaitForStopping
[10:31:09] . *** Updating antenna's pointing to az2=0.0230 and el=0.3460 arcmins

[10:31:10] source : 3C309_1
               F1 : 1.4
               F2 : 32.0
               S22235 : 1.0
               S1400 : 7.5
               angsize : 1.5
               location : J2000 @ (14:59:07.58, 71:40:19.87)
[10:31:10] Focus: Subscan 1 of 1
[10:31:10] In state Ready, waiting for state Running
[10:31:10]     Setting State: Activating
[10:31:36]     Setting State: Committed
[10:31:38]     Setting State: Running
[10:31:38] Detected state Running
[10:31:38] *** Notice: This subscan will be numbered as scan #89 in your data reduction package.
[10:31:38] In state Running, waiting for state Ready
[10:32:38]     Setting State: Stopping
[10:32:40]     Setting State: Ready
[10:32:40] Detected state Ready
[10:32:40] Ygor Telescope: WaitForStopping
[10:32:41] *** Poor fit, not updating antenna's corrections.

[10:32:41] Configuring telescope.
[10:32:41]     Setting State: Activating
[10:32:43]     Setting State: Ready
[10:32:45]     Setting State: Activating
[10:32:46]     Setting State: Ready
[10:32:46] Default values are
[10:32:46] if3freq  =  [0, 0, 0]
[10:32:46] notchfilter  =  In
[10:32:46] polswitch  =  thru
[10:32:46] The bad devices are: 
[10:32:46] OpticalDriver5
[10:32:46] The bad devices are: 
[10:32:46] OpticalDriver5
[10:32:46] Waiting for the ConverterRack to finish activating
[10:32:46] . .
[10:32:46] Checking telescope
[10:32:46] Configuration Complete
[10:32:46] source : 3C309_1
               F1 : 1.4
               F2 : 32.0
               S22235 : 1.0
               S1400 : 7.5
               angsize : 1.5
               location : J2000 @ (14:59:07.58, 71:40:19.87)
[10:32:46] Slewing to source.
[10:32:46] In state Ready, waiting for state Activating
[10:32:46]     Setting State: Activating
[10:32:46] Detected state Activating
[10:32:46] In state Activating, waiting for state Ready
[10:33:13]     Setting State: Ready
[10:33:13] Detected state Ready
[10:33:13] Balancing IF system.
[10:33:13] Balancing IFRack
[10:33:14]     Setting State: Activating
[10:33:14]     Setting State: Ready
[10:33:16] the sampler values are:
[10:33:16] RF_power 1 : 3.085938
[10:33:16] RF_power 2 : 0.004882812
[10:33:16] RF_power 3 : 3.120117
[10:33:16] RF_power 4 : 0.01464844
[10:33:16] RF_power 5 : 0.03417969
[10:33:16] RF_power 6 : 2.993164
[10:33:16] RF_power 7 : 3.227539
[10:33:16] RF_power 8 : 0.02441406
[10:33:16] Balancing VEGAS
[10:33:16]     Setting State: Activating
[10:33:16]     Setting State: Ready
[10:33:17]     Setting State: Activating
[10:33:17]     Setting State: Ready
[10:33:17] Calibration scans (OnOff) :3C309_1 
[10:33:17] source : 3C309_1
               F1 : 1.4
               F2 : 32.0
               S22235 : 1.0
               S1400 : 7.5
               angsize : 1.5
               location : J2000 @ (14:59:07.58, 71:40:19.87)
[10:33:18] OnOff: Subscan 1 of 2
[10:33:18] In state Ready, waiting for state Running
[10:33:18]     Setting State: Activating
[10:33:23]     Setting State: Committed
[10:33:25]     Setting State: Running
[10:33:25] Detected state Running
[10:33:25] *** Notice: This subscan will be numbered as scan #90 in your data reduction package.
[10:33:25] In state Running, waiting for state Ready
[10:35:25]     Setting State: Stopping
[10:35:27]     Setting State: Ready
[10:35:27] Detected state Ready
[10:35:27] Ygor Telescope: WaitForStopping
[10:35:27] OnOff: Subscan 2 of 2
[10:35:27] In state Ready, waiting for state Running
[10:35:27]     Setting State: Activating
[10:35:41]     Setting State: Committed
[10:35:43]     Setting State: Running
[10:35:43] Detected state Running
[10:35:43] *** Notice: This subscan will be numbered as scan #91 in your data reduction package.
[10:35:43] In state Running, waiting for state Ready
[10:37:43]     Setting State: Stopping
[10:37:45]     Setting State: Ready
[10:37:45] Detected state Ready
[10:37:45] Ygor Telescope: WaitForStopping
[10:37:45] INFO: Selecting Catalog
[10:37:45] INFO: Using Catalog for LST 9-13
[10:37:45] INFO: Selecting Catalog
[10:37:45] INFO: Using Catalog for LST 9-13
[10:37:45] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:37:45] INFO: Selecting Catalog
[10:37:45] INFO: Using Catalog for LST 9-13
[10:37:45] INFO: Selecting Catalog
[10:37:45] INFO: Using Catalog for LST 9-13
[10:37:45] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:37:45] INFO: Selecting Catalog
[10:37:45] INFO: Using Catalog for LST 9-13
[10:37:45] INFO: Selecting Catalog
[10:37:45] INFO: Using Catalog for LST 9-13
[10:37:45] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:37:45] INFO: Selecting Catalog
[10:37:45] INFO: Using Catalog for LST 9-13
[10:37:45] INFO: Selecting Catalog
[10:37:45] INFO: Using Catalog for LST 9-13
[10:37:45] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:37:45] INFO: Selecting Catalog
[10:37:45] INFO: Using Catalog for LST 9-13
[10:37:45] INFO: Selecting Catalog
[10:37:45] INFO: Using Catalog for LST 9-13
[10:37:45] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:37:45] INFO: Selecting Catalog
[10:37:45] INFO: Using Catalog for LST 9-13
[10:37:45] INFO: Selecting Catalog
[10:37:45] INFO: Using Catalog for LST 9-13
[10:37:45] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:37:45] INFO: Selecting Catalog
[10:37:45] INFO: Using Catalog for LST 9-13
[10:37:45] INFO: Selecting Catalog
[10:37:45] INFO: Using Catalog for LST 9-13
[10:37:45] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:37:45] INFO: Selecting Catalog
[10:37:45] INFO: Using Catalog for LST 9-13
[10:37:45] INFO: Selecting Catalog
[10:37:45] INFO: Using Catalog for LST 9-13
[10:37:45] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:37:45] INFO: Selecting Catalog
[10:37:45] INFO: Using Catalog for LST 9-13
[10:37:45] INFO: Selecting Catalog
[10:37:45] INFO: Using Catalog for LST 9-13
[10:37:45] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:37:45] INFO: Selecting Catalog
[10:37:45] INFO: Using Catalog for LST 9-13
[10:37:45] INFO: Selecting Catalog
[10:37:45] INFO: Using Catalog for LST 9-13
[10:37:45] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:37:45] INFO: Selecting Catalog
[10:37:45] INFO: Using Catalog for LST 9-13
[10:37:45] INFO: Selecting Catalog
[10:37:45] INFO: Using Catalog for LST 9-13
[10:37:45] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:37:45] INFO: Selecting Catalog
[10:37:45] INFO: Using Catalog for LST 9-13
[10:37:45] INFO: Selecting Catalog
[10:37:45] INFO: Using Catalog for LST 9-13
[10:37:45] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:37:45] INFO: Selecting Catalog
[10:37:45] INFO: Using Catalog for LST 9-13
[10:37:45] INFO: Selecting Catalog
[10:37:45] INFO: Using Catalog for LST 9-13
[10:37:45] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:37:45] INFO: Selecting Catalog
[10:37:45] INFO: Using Catalog for LST 9-13
[10:37:45] INFO: Selecting Catalog
[10:37:45] INFO: Using Catalog for LST 9-13
[10:37:45] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:37:45] INFO: Selecting Catalog
[10:37:45] INFO: Using Catalog for LST 9-13
[10:37:45] INFO: Selecting Catalog
[10:37:45] INFO: Using Catalog for LST 9-13
[10:37:45] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:37:46] INFO: Selecting Catalog
[10:37:46] INFO: Using Catalog for LST 9-13
[10:37:46] INFO: Selecting Catalog
[10:37:46] INFO: Using Catalog for LST 9-13
[10:37:46] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:37:46] INFO: Selecting Catalog
[10:37:46] INFO: Using Catalog for LST 9-13
[10:37:46] INFO: Selecting Catalog
[10:37:46] INFO: Using Catalog for LST 9-13
[10:37:46] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:37:46] INFO: Selecting Catalog
[10:37:46] INFO: Using Catalog for LST 9-13
[10:37:46] INFO: Selecting Catalog
[10:37:46] INFO: Using Catalog for LST 9-13
[10:37:46] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:37:46] INFO: Selecting Catalog
[10:37:46] INFO: Using Catalog for LST 9-13
[10:37:46] INFO: Selecting Catalog
[10:37:46] INFO: Using Catalog for LST 9-13
[10:37:46] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:37:46] INFO: Selecting Catalog
[10:37:46] INFO: Using Catalog for LST 9-13
[10:37:46] INFO: Selecting Catalog
[10:37:46] INFO: Using Catalog for LST 9-13
[10:37:46] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:37:46] INFO: Selecting Catalog
[10:37:46] INFO: Using Catalog for LST 9-13
[10:37:46] INFO: Selecting Catalog
[10:37:46] INFO: Using Catalog for LST 9-13
[10:37:46] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:37:46] INFO: Selecting Catalog
[10:37:46] INFO: Using Catalog for LST 9-13
[10:37:46] INFO: Selecting Catalog
[10:37:46] INFO: Using Catalog for LST 9-13
[10:37:46] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:37:46] INFO: Selecting Catalog
[10:37:46] INFO: Using Catalog for LST 9-13
[10:37:46] INFO: Selecting Catalog
[10:37:46] INFO: Using Catalog for LST 9-13
[10:37:46] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:37:46] INFO: Selecting Catalog
[10:37:46] INFO: Using Catalog for LST 9-13
[10:37:46] INFO: Selecting Catalog
[10:37:46] INFO: Using Catalog for LST 9-13
[10:37:46] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:37:46] INFO: Selecting Catalog
[10:37:46] INFO: Using Catalog for LST 9-13
[10:37:46] INFO: Selecting Catalog
[10:37:46] INFO: Using Catalog for LST 9-13
[10:37:46] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:37:46] INFO: Selecting Catalog
[10:37:46] INFO: Using Catalog for LST 9-13
[10:37:46] INFO: Selecting Catalog
[10:37:46] INFO: Using Catalog for LST 9-13
[10:37:46] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:37:46] INFO: Selecting Catalog
[10:37:46] INFO: Using Catalog for LST 9-13
[10:37:46] INFO: Selecting Catalog
[10:37:46] INFO: Using Catalog for LST 9-13
[10:37:46] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:37:46] INFO: Selecting Catalog
[10:37:46] INFO: Using Catalog for LST 9-13
[10:37:46] INFO: Selecting Catalog
[10:37:46] INFO: Using Catalog for LST 9-13
[10:37:46] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:37:46] INFO: Selecting Catalog
[10:37:46] INFO: Using Catalog for LST 9-13
[10:37:46] INFO: Selecting Catalog
[10:37:46] INFO: Using Catalog for LST 9-13
[10:37:46] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:37:46] INFO: Selecting Catalog
[10:37:46] INFO: Using Catalog for LST 9-13
[10:37:46] INFO: Selecting Catalog
[10:37:46] INFO: Using Catalog for LST 9-13
[10:37:46] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:37:46] INFO: Selecting Catalog
[10:37:46] INFO: Using Catalog for LST 9-13
[10:37:46] INFO: Selecting Catalog
[10:37:46] INFO: Using Catalog for LST 9-13
[10:37:46] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:37:46] INFO: Selecting Catalog
[10:37:46] INFO: Using Catalog for LST 9-13
[10:37:46] INFO: Selecting Catalog
[10:37:46] INFO: Using Catalog for LST 9-13
[10:37:46] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:37:47] INFO: Selecting Catalog
[10:37:47] INFO: Using Catalog for LST 9-13
[10:37:47] INFO: Selecting Catalog
[10:37:47] INFO: Using Catalog for LST 9-13
[10:37:47] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:37:47] INFO: Selecting Catalog
[10:37:47] INFO: Using Catalog for LST 9-13
[10:37:47] INFO: Selecting Catalog
[10:37:47] INFO: Using Catalog for LST 9-13
[10:37:47] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:37:47] INFO: Selecting Catalog
[10:37:47] INFO: Using Catalog for LST 9-13
[10:37:47] INFO: Selecting Catalog
[10:37:47] INFO: Using Catalog for LST 9-13
[10:37:47] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:37:47] INFO: Selecting Catalog
[10:37:47] INFO: Using Catalog for LST 9-13
[10:37:47] INFO: Selecting Catalog
[10:37:47] INFO: Using Catalog for LST 9-13
[10:37:47] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:37:47] INFO: Selecting Catalog
[10:37:47] INFO: Using Catalog for LST 9-13
[10:37:47] INFO: Selecting Catalog
[10:37:47] INFO: Using Catalog for LST 9-13
[10:37:47] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:37:47] INFO: Selecting Catalog
[10:37:47] INFO: Using Catalog for LST 9-13
[10:37:47] INFO: Selecting Catalog
[10:37:47] INFO: Using Catalog for LST 9-13
[10:37:47] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:37:47] INFO: Selecting Catalog
[10:37:47] INFO: Using Catalog for LST 9-13
[10:37:47] INFO: Selecting Catalog
[10:37:47] INFO: Using Catalog for LST 9-13
[10:37:47] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:37:47] INFO: Selecting Catalog
[10:37:47] INFO: Using Catalog for LST 9-13
[10:37:47] INFO: Selecting Catalog
[10:37:47] INFO: Using Catalog for LST 9-13
[10:37:47] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:37:47] INFO: Selecting Catalog
[10:37:47] INFO: Using Catalog for LST 9-13
[10:37:47] INFO: Selecting Catalog
[10:37:47] INFO: Using Catalog for LST 9-13
[10:37:47] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:37:47] INFO: Selecting Catalog
[10:37:47] INFO: Using Catalog for LST 9-13
[10:37:47] INFO: Selecting Catalog
[10:37:47] INFO: Using Catalog for LST 9-13
[10:37:47] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:37:47] INFO: Selecting Catalog
[10:37:47] INFO: Using Catalog for LST 9-13
[10:37:47] INFO: Selecting Catalog
[10:37:47] INFO: Using Catalog for LST 9-13
[10:37:47] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:37:47] INFO: Selecting Catalog
[10:37:47] INFO: Using Catalog for LST 9-13
[10:37:47] INFO: Selecting Catalog
[10:37:47] INFO: Using Catalog for LST 9-13
[10:37:47] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:37:47] INFO: Selecting Catalog
[10:37:47] INFO: Using Catalog for LST 9-13
[10:37:47] INFO: Selecting Catalog
[10:37:47] INFO: Using Catalog for LST 9-13
[10:37:47] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:37:47] INFO: Selecting Catalog
[10:37:47] INFO: Using Catalog for LST 9-13
[10:37:47] INFO: Selecting Catalog
[10:37:47] INFO: Using Catalog for LST 9-13
[10:37:47] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:37:47] INFO: Selecting Catalog
[10:37:47] INFO: Using Catalog for LST 9-13
[10:37:47] INFO: Selecting Catalog
[10:37:47] INFO: Using Catalog for LST 9-13
[10:37:47] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:37:47] INFO: Selecting Catalog
[10:37:47] INFO: Using Catalog for LST 9-13
[10:37:47] INFO: Selecting Catalog
[10:37:47] INFO: Using Catalog for LST 9-13
[10:37:47] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:37:48] INFO: Selecting Catalog
[10:37:48] INFO: Using Catalog for LST 9-13
[10:37:48] INFO: Selecting Catalog
[10:37:48] INFO: Using Catalog for LST 9-13
[10:37:48] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
runSuccessful: True
[10:37:48] ******** End Scheduling Block
[10:37:48] ******** observer = OPERATOR, SB name = 15B287_operator, project ID = AGBT15B_287

how much log? 19657 id: 179199self.history: <gbt.turtle.database.History.History instance at 0x4956b00>self.history.connection: <gbt.turtle.database.TurtleConnection.TurtleConnection instance at 0x4956878>how much converted log? 19865 
#######################################################
 
 
#######################################################
 SCRIPT NUMBER 14, project:AGBT15B_287_40 
 179200 128 OPERATOR 10 Amber Bonsall 2016-01-10 10:37:50 obs_completed 
#######################################################
# test script to update catalog as you go...

########## CHANGE THESE ONLY #############
OnOffOnTime = 10 #minutes (change this to 12 to be in line with DSS scheduling)
obs_per_source = 3 #total observing time per source = OnOffOnTime * obs_per_source
h = Horizon(10.0) #minimum of 10 degrees elevation
h_up = Horizon(85.0) #maximum of 85 degrees due to keyhole
myOff = Offset("J2000",1.0,0.0,cosv=True)  # Off position relative to source
doFirstPointing = True #Setting to False will skip the first pointing
doFirstCal = True  #Setting to False will skip the first 3C calibrator OnOff scan
peak_every = 12 #peak/cal every 12 OnOffOn (every 2.5 hours)
peak_near_source = False #Do another peak when changing to new source
#####################################

######### NOTES ###############
# This script runs in blocks of On-Off-On position switching with
# the two outer 'on' scans sharing one 'off'
# Total on-source time = 20 minutes
# Length of one 'On' or 'Off' = 3 minutes 20 seconds
# Length of one On-Off-On = 10 minutes
# 3 On-Off-On blocks are needed per source (30 minutes total per source)

###### Timing
# It takes 34m to completely observe 1 source+overhead (9 track scans)

execfile("/home/astro-util/projects/15B287_operator/15B287_config.py")
execfile("/home/astro-util/projects/15B287_operator/15B287_utils.py")
Catalog(fluxcal)
Catalog(lband_pointing)

scanTime = OnOffOnTime * 20.0 #seconds
tdelta = DateTime.TimeDelta(minutes=OnOffOnTime)
obs_count = 0
doCal = doFirstCal
doPointing = doFirstPointing
project_obs = 0
old_catalog_name = 'dummy'
fullcat = '/home/astro-util/projects/15B287_operator/15B287_operator.cat'

Configure(config_1)

while project_obs < 100:
    mycat,altcal = select_my_catalog()
    if mycat == old_catalog_name:
        print 'SAME CATALOG HAS BEEN SELECTED: Using FULL catalog'
        mycat = fullcat
        altcal = '3C309_1'
    old_catalog_name = mycat
    c = Catalog(mycat)
    sources = c.keys()
    for source in sources:
        doBalance = True
        newPeak = True
        calibrator = c[source]["calibrator"]
        n_obs = int(float(c[source]["n_obs"]))
        obs_left = obs_per_source-n_obs
        obs_ok = obs_left > 0
        t_now = Now()
        if t_now != None and obs_ok:
            source_rise = h.GetRise(source)
            source_set  = h.GetSet(source)
            keyhole_rise = h_up.GetRise(source)
            keyhole_set = h_up.GetSet(source)
            if source_rise != None or keyhole_set != None:
                if source_set != None and keyhole_rise != None:
                    t_ok = ((t_now + tdelta) < source_set)
                    t_ok = t_ok and (t_now >= source_rise)
                    t_ok = t_ok and ((t_now + tdelta) < keyhole_rise)
                else:
                    t_ok = True
            else:
                t_ok = False
        else:
            t_ok = False

        source_ok = t_ok and obs_ok

        if source_ok:
            if doPointing == True:
                #check the calibrator is above the horizon
                keyhole_cal_rise = h_up.GetRise(calibrator)
                keyhole_cal_set = h_up.GetSet(calibrator)
                cal_rise = h.GetRise(calibrator)
                if cal_rise>t_now or keyhole_cal_set == None:
                    myCal = altcal #low circumpolar alternative
                    print 'Calibrator %s is too low: Using %s' %(calibrator,altcal)
                else:
                    if keyhole_cal_rise != None:
                        if (t_now+tdelta) >= keyhole_cal_rise:
                            print 'Calibrator %s is in keyhole: Using %s' %(calibrator,altcal)
                            myCal = altcal
                        else:
                            myCal = calibrator
                    else:
                        myCal = calibrator

                if obs_count == 0:
                    AutoPeakFocus(myCal)
                    #Break("Check Peak and Focus")
                else:
                    AutoPeak(myCal)
                Configure(config_1)
                doBalance = True
                doPointing = False

            if doCal:
                Slew(myCal)
                Balance()
                print 'Calibration scans (OnOff) :%s ' %(myCal)
                OnOff(myCal,myOff,120.0)
                doCal = False
                doBalance = True

            for i in range(obs_left):
                t_now = Now()   #check time ok again
                t_ok = False
                if t_now != None and keyhole_set != None:
                    if source_rise != None:
                        if source_set != None:
                            t_ok = ((t_now + tdelta) < source_set)
                            t_ok = t_ok and (t_now >= source_rise)
                            if keyhole_rise != None:
                                t_ok = t_ok and ((t_now+tdelta) < keyhole_rise)
                        else:
                            t_ok = True
                    else:
                        t_ok = False
                else:
                    t_ok = False

                if t_ok:
                    if peak_near_source and newPeak:
                        Slew(source)
                        AutoPeak()
                        Configure(config_1)
                        newPeak = False
                        doBalance = True
                    if doBalance:
                        Slew(source)
                        Balance()
                        doBalance = False

                    Comment("Starting on-source scan")
                    Track(source,None,scanTime)
                    Comment("Starting off-source scan")
                    Track(source,None,scanTime,fixedOffset=myOff)
                    Comment("Starting on-source scan")
                    Track(source,None,scanTime)
                    obs_count = obs_count + 1
                    obs_tot = obs_per_source+1-obs_left+i
                    print '%s: OBS COMPLETE = %s/%s' %(source,obs_tot,obs_per_source)
                    update_my_catalogs(source,obs_tot)

                    if obs_count % peak_every == 0:  #Cal/pointing interval
                        doCal = True
                        doPointing = True
        if source_ok and mycat == fullcat:
            break
    project_obs = project_obs+1

#######################################################
 LOG SESSION NUMBER 14 
[10:37:50] ******** Begin Scheduling Block
[10:37:50] ******** observer = OPERATOR, SB name = 15B287_operator, project ID = AGBT15B_287, date = 10 Jan 2016

[10:37:50] Configuring telescope.
[10:37:50]     Setting State: Activating
[10:37:51]     Setting State: Ready
[10:37:51]     Setting State: Activating
[10:37:52]     Setting State: Ready
[10:37:52] Default values are
[10:37:52] if3freq  =  [0, 0, 0]
[10:37:52] notchfilter  =  In
[10:37:52] polswitch  =  thru
[10:37:52] The bad devices are: 
[10:37:52] OpticalDriver5
[10:37:52] The bad devices are: 
[10:37:52] OpticalDriver5

[10:37:52] Checking telescope
[10:37:52] Configuration Complete
[10:37:52] INFO: Selecting Catalog
[10:37:52] INFO: Using Catalog for LST 9-13
[10:37:52] INFO: Selecting Catalog
[10:37:52] INFO: Using Catalog for LST 9-13
[10:37:52] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:37:53] Calibrator 3C48 is too low: Using 3C309_1
[10:37:53] Configuring telescope.
[10:37:54]     Setting State: Activating
[10:37:55]     Setting State: Ready
[10:37:55]     Setting State: Activating
[10:37:56]     Setting State: Ready
[10:37:56] Default values are
[10:37:56] if3freq  =  [0]
[10:37:56] notchfilter  =  In
[10:37:56] polswitch  =  thru
[10:37:56] The bad devices are: 
[10:37:56] OpticalDriver5

[10:37:56] Checking telescope
[10:37:56] Configuration Complete
[10:37:56] source : 3C309_1
               F1 : 1.4
               F2 : 32.0
               S22235 : 1.0
               S1400 : 7.5
               angsize : 1.5
               location : J2000 @ (14:59:07.58, 71:40:19.87)
[10:37:56] Slewing to source.
[10:37:56] In state Ready, waiting for state Activating
[10:37:56]     Setting State: Activating
[10:37:56] Detected state Activating
[10:37:56] In state Activating, waiting for state Ready
[10:38:10]     Setting State: Ready
[10:38:10] Detected state Ready
[10:38:10] Balancing IF system.
[10:38:10] Balancing IFRack
[10:38:10]     Setting State: Activating
[10:38:10]     Setting State: Ready
[10:38:12] the sampler values are:
[10:38:12] RF_power 1 : 0.9912109
[10:38:12] RF_power 2 : 0.004882812
[10:38:12] RF_power 3 : 1.069336
[10:38:12] RF_power 4 : 0.01464844
[10:38:12] RF_power 5 : 0.02929688
[10:38:12] RF_power 6 : 2.875977
[10:38:12] RF_power 7 : 0.4882812
[10:38:12] RF_power 8 : 0.02929688
[10:38:12] source : 3C309_1
               F1 : 1.4
               F2 : 32.0
               S22235 : 1.0
               S1400 : 7.5
               angsize : 1.5
               location : J2000 @ (14:59:07.58, 71:40:19.87)
[10:38:12] Peak: Subscan 1 of 4
[10:38:13] In state Ready, waiting for state Running
[10:38:13]     Setting State: Activating
[10:38:37]     Setting State: Committed
[10:38:39]     Setting State: Running
[10:38:39] Detected state Running
[10:38:39] *** Notice: This subscan will be numbered as scan #92 in your data reduction package.
[10:38:39] In state Running, waiting for state Ready
[10:39:09]     Setting State: Stopping
[10:39:15]     Setting State: Ready
[10:39:15] Detected state Ready
[10:39:15] Ygor Telescope: WaitForStopping
[10:39:15] Peak: Subscan 2 of 4
[10:39:16] In state Ready, waiting for state Running
[10:39:16]     Setting State: Activating
[10:39:25]     Setting State: Committed
[10:39:27]     Setting State: Running
[10:39:27] Detected state Running
[10:39:27] *** Notice: This subscan will be numbered as scan #93 in your data reduction package.
[10:39:27] In state Running, waiting for state Ready
[10:39:57]     Setting State: Stopping
[10:40:03]     Setting State: Ready
[10:40:03] Detected state Ready
[10:40:03] Ygor Telescope: WaitForStopping
[10:40:04] . *** Updating antenna's pointing to az2=0.0093 and el=0.3460 arcmins

[10:40:05] Peak: Subscan 3 of 4
[10:40:05] In state Ready, waiting for state Running
[10:40:05]     Setting State: Activating
[10:40:26]     Setting State: Committed
[10:40:28]     Setting State: Running
[10:40:28] Detected state Running
[10:40:28] *** Notice: This subscan will be numbered as scan #94 in your data reduction package.
[10:40:28] In state Running, waiting for state Ready
[10:40:58]     Setting State: Stopping
[10:41:03]     Setting State: Ready
[10:41:03] Detected state Ready
[10:41:03] Ygor Telescope: WaitForStopping
[10:41:03] Peak: Subscan 4 of 4
[10:41:03] In state Ready, waiting for state Running
[10:41:03]     Setting State: Activating
[10:41:11]     Setting State: Committed
[10:41:13]     Setting State: Running
[10:41:13] Detected state Running
[10:41:13] *** Notice: This subscan will be numbered as scan #95 in your data reduction package.
[10:41:13] In state Running, waiting for state Ready
[10:41:43]     Setting State: Stopping
[10:41:47]     Setting State: Ready
[10:41:47] Detected state Ready
[10:41:47] Ygor Telescope: WaitForStopping
[10:41:48] . *** Updating antenna's pointing to az2=0.0093 and el=0.3289 arcmins

[10:41:49] source : 3C309_1
               F1 : 1.4
               F2 : 32.0
               S22235 : 1.0
               S1400 : 7.5
               angsize : 1.5
               location : J2000 @ (14:59:07.58, 71:40:19.87)
[10:41:49] Focus: Subscan 1 of 1
[10:41:50] In state Ready, waiting for state Running
[10:41:50]     Setting State: Activating
[10:42:15]     Setting State: Committed
[10:42:17]     Setting State: Running
[10:42:17] Detected state Running
[10:42:17] *** Notice: This subscan will be numbered as scan #96 in your data reduction package.
[10:42:17] In state Running, waiting for state Ready
[10:43:17]     Setting State: Stopping
[10:43:19]     Setting State: Ready
[10:43:19] Detected state Ready
[10:43:19] Ygor Telescope: WaitForStopping
[10:43:20] . *** Updating antenna's focus to -27.70 mm

[10:43:21] Configuring telescope.
[10:43:21]     Setting State: Activating
[10:43:22]     Setting State: Ready
[10:43:22]     Setting State: Activating
[10:43:23]     Setting State: Ready
[10:43:23] Default values are
[10:43:23] if3freq  =  [0, 0, 0]
[10:43:23] notchfilter  =  In
[10:43:23] polswitch  =  thru
[10:43:23] The bad devices are: 
[10:43:23] OpticalDriver5
[10:43:23] The bad devices are: 
[10:43:23] OpticalDriver5

[10:43:23] Checking telescope
[10:43:23] Configuration Complete
[10:43:23] source : 3C309_1
               F1 : 1.4
               F2 : 32.0
               S22235 : 1.0
               S1400 : 7.5
               angsize : 1.5
               location : J2000 @ (14:59:07.58, 71:40:19.87)
[10:43:23] Slewing to source.
[10:43:24] In state Ready, waiting for state Activating
[10:43:24]     Setting State: Activating
[10:43:24] Detected state Activating
[10:43:24] In state Activating, waiting for state Ready
[10:43:50]     Setting State: Ready
[10:43:50] Detected state Ready
[10:43:50] Balancing IF system.
[10:43:50] Balancing IFRack
[10:43:51]     Setting State: Activating
[10:43:51]     Setting State: Ready
[10:43:53] the sampler values are:
[10:43:53] RF_power 1 : 3.095703
[10:43:53] RF_power 2 : 0.004882812
[10:43:53] RF_power 3 : 3.139648
[10:43:53] RF_power 4 : 0.01464844
[10:43:53] RF_power 5 : 0.0390625
[10:43:53] RF_power 6 : 2.983398
[10:43:53] RF_power 7 : 3.212891
[10:43:53] RF_power 8 : 0.02441406
[10:43:53] Balancing VEGAS
[10:43:53]     Setting State: Activating
[10:43:53]     Setting State: Ready
[10:43:54]     Setting State: Activating
[10:43:54]     Setting State: Ready
[10:43:54] Calibration scans (OnOff) :3C309_1 
[10:43:54] source : 3C309_1
               F1 : 1.4
               F2 : 32.0
               S22235 : 1.0
               S1400 : 7.5
               angsize : 1.5
               location : J2000 @ (14:59:07.58, 71:40:19.87)
[10:43:55] OnOff: Subscan 1 of 2
[10:43:55] In state Ready, waiting for state Running
[10:43:55]     Setting State: Activating
[10:44:00]     Setting State: Committed
[10:44:02]     Setting State: Running
[10:44:02] Detected state Running
[10:44:02] *** Notice: This subscan will be numbered as scan #97 in your data reduction package.
[10:44:02] In state Running, waiting for state Ready
[10:46:02]     Setting State: Stopping
[10:46:04]     Setting State: Ready
[10:46:04] Detected state Ready
[10:46:04] Ygor Telescope: WaitForStopping
[10:46:04] OnOff: Subscan 2 of 2
[10:46:04] In state Ready, waiting for state Running
[10:46:04]     Setting State: Activating
[10:46:18]     Setting State: Committed
[10:46:20]     Setting State: Running
[10:46:20] Detected state Running
[10:46:20] *** Notice: This subscan will be numbered as scan #98 in your data reduction package.
[10:46:20] In state Running, waiting for state Ready
[10:48:20]     Setting State: Stopping
[10:48:22]     Setting State: Ready
[10:48:22] Detected state Ready
[10:48:22] Ygor Telescope: WaitForStopping
[10:48:22] INFO: Selecting Catalog
[10:48:22] INFO: Using Catalog for LST 9-13
[10:48:22] INFO: Selecting Catalog
[10:48:22] INFO: Using Catalog for LST 9-13
[10:48:22] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:48:22] INFO: Selecting Catalog
[10:48:22] INFO: Using Catalog for LST 9-13
[10:48:22] INFO: Selecting Catalog
[10:48:22] INFO: Using Catalog for LST 9-13
[10:48:22] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:48:22] INFO: Selecting Catalog
[10:48:22] INFO: Using Catalog for LST 9-13
[10:48:22] INFO: Selecting Catalog
[10:48:22] INFO: Using Catalog for LST 9-13
[10:48:22] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:48:22] INFO: Selecting Catalog
[10:48:22] INFO: Using Catalog for LST 9-13
[10:48:22] INFO: Selecting Catalog
[10:48:22] INFO: Using Catalog for LST 9-13
[10:48:22] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:48:22] INFO: Selecting Catalog
[10:48:22] INFO: Using Catalog for LST 9-13
[10:48:22] INFO: Selecting Catalog
[10:48:22] INFO: Using Catalog for LST 9-13
[10:48:22] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:48:22] INFO: Selecting Catalog
[10:48:22] INFO: Using Catalog for LST 9-13
[10:48:22] INFO: Selecting Catalog
[10:48:22] INFO: Using Catalog for LST 9-13
[10:48:22] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:48:22] INFO: Selecting Catalog
[10:48:22] INFO: Using Catalog for LST 9-13
[10:48:22] INFO: Selecting Catalog
[10:48:22] INFO: Using Catalog for LST 9-13
[10:48:22] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:48:22] INFO: Selecting Catalog
[10:48:22] INFO: Using Catalog for LST 9-13
[10:48:22] INFO: Selecting Catalog
[10:48:22] INFO: Using Catalog for LST 9-13
[10:48:22] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:48:22] INFO: Selecting Catalog
[10:48:22] INFO: Using Catalog for LST 9-13
[10:48:22] INFO: Selecting Catalog
[10:48:22] INFO: Using Catalog for LST 9-13
[10:48:22] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:48:22] INFO: Selecting Catalog
[10:48:22] INFO: Using Catalog for LST 9-13
[10:48:22] INFO: Selecting Catalog
[10:48:22] INFO: Using Catalog for LST 9-13
[10:48:22] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:48:22] INFO: Selecting Catalog
[10:48:22] INFO: Using Catalog for LST 9-13
[10:48:22] INFO: Selecting Catalog
[10:48:22] INFO: Using Catalog for LST 9-13
[10:48:22] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:48:22] INFO: Selecting Catalog
[10:48:22] INFO: Using Catalog for LST 9-13
[10:48:22] INFO: Selecting Catalog
[10:48:22] INFO: Using Catalog for LST 9-13
[10:48:22] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:48:22] INFO: Selecting Catalog
[10:48:22] INFO: Using Catalog for LST 9-13
[10:48:22] INFO: Selecting Catalog
[10:48:22] INFO: Using Catalog for LST 9-13
[10:48:22] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:48:22] INFO: Selecting Catalog
[10:48:22] INFO: Using Catalog for LST 9-13
[10:48:22] INFO: Selecting Catalog
[10:48:22] INFO: Using Catalog for LST 9-13
[10:48:22] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:48:22] INFO: Selecting Catalog
[10:48:22] INFO: Using Catalog for LST 9-13
[10:48:22] INFO: Selecting Catalog
[10:48:22] INFO: Using Catalog for LST 9-13
[10:48:22] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:48:23] INFO: Selecting Catalog
[10:48:23] INFO: Using Catalog for LST 9-13
[10:48:23] INFO: Selecting Catalog
[10:48:23] INFO: Using Catalog for LST 9-13
[10:48:23] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:48:23] INFO: Selecting Catalog
[10:48:23] INFO: Using Catalog for LST 9-13
[10:48:23] INFO: Selecting Catalog
[10:48:23] INFO: Using Catalog for LST 9-13
[10:48:23] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:48:23] INFO: Selecting Catalog
[10:48:23] INFO: Using Catalog for LST 9-13
[10:48:23] INFO: Selecting Catalog
[10:48:23] INFO: Using Catalog for LST 9-13
[10:48:23] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:48:23] INFO: Selecting Catalog
[10:48:23] INFO: Using Catalog for LST 9-13
[10:48:23] INFO: Selecting Catalog
[10:48:23] INFO: Using Catalog for LST 9-13
[10:48:23] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:48:23] INFO: Selecting Catalog
[10:48:23] INFO: Using Catalog for LST 9-13
[10:48:23] INFO: Selecting Catalog
[10:48:23] INFO: Using Catalog for LST 9-13
[10:48:23] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:48:23] INFO: Selecting Catalog
[10:48:23] INFO: Using Catalog for LST 9-13
[10:48:23] INFO: Selecting Catalog
[10:48:23] INFO: Using Catalog for LST 9-13
[10:48:23] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:48:23] INFO: Selecting Catalog
[10:48:23] INFO: Using Catalog for LST 9-13
[10:48:23] INFO: Selecting Catalog
[10:48:23] INFO: Using Catalog for LST 9-13
[10:48:23] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:48:23] INFO: Selecting Catalog
[10:48:23] INFO: Using Catalog for LST 9-13
[10:48:23] INFO: Selecting Catalog
[10:48:23] INFO: Using Catalog for LST 9-13
[10:48:23] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:48:23] INFO: Selecting Catalog
[10:48:23] INFO: Using Catalog for LST 9-13
[10:48:23] INFO: Selecting Catalog
[10:48:23] INFO: Using Catalog for LST 9-13
[10:48:23] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:48:23] INFO: Selecting Catalog
[10:48:23] INFO: Using Catalog for LST 9-13
[10:48:23] INFO: Selecting Catalog
[10:48:23] INFO: Using Catalog for LST 9-13
[10:48:23] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:48:23] INFO: Selecting Catalog
[10:48:23] INFO: Using Catalog for LST 9-13
[10:48:23] INFO: Selecting Catalog
[10:48:23] INFO: Using Catalog for LST 9-13
[10:48:23] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:48:23] INFO: Selecting Catalog
[10:48:23] INFO: Using Catalog for LST 9-13
[10:48:23] INFO: Selecting Catalog
[10:48:23] INFO: Using Catalog for LST 9-13
[10:48:23] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:48:23] INFO: Selecting Catalog
[10:48:23] INFO: Using Catalog for LST 9-13
[10:48:23] INFO: Selecting Catalog
[10:48:23] INFO: Using Catalog for LST 9-13
[10:48:23] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:48:23] INFO: Selecting Catalog
[10:48:23] INFO: Using Catalog for LST 9-13
[10:48:23] INFO: Selecting Catalog
[10:48:23] INFO: Using Catalog for LST 9-13
[10:48:23] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:48:23] INFO: Selecting Catalog
[10:48:23] INFO: Using Catalog for LST 9-13
[10:48:23] INFO: Selecting Catalog
[10:48:23] INFO: Using Catalog for LST 9-13
[10:48:23] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:48:23] INFO: Selecting Catalog
[10:48:23] INFO: Using Catalog for LST 9-13
[10:48:23] INFO: Selecting Catalog
[10:48:23] INFO: Using Catalog for LST 9-13
[10:48:23] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:48:24] INFO: Selecting Catalog
[10:48:24] INFO: Using Catalog for LST 9-13
[10:48:24] INFO: Selecting Catalog
[10:48:24] INFO: Using Catalog for LST 9-13
[10:48:24] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:48:24] INFO: Selecting Catalog
[10:48:24] INFO: Using Catalog for LST 9-13
[10:48:24] INFO: Selecting Catalog
[10:48:24] INFO: Using Catalog for LST 9-13
[10:48:24] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:48:24] INFO: Selecting Catalog
[10:48:24] INFO: Using Catalog for LST 9-13
[10:48:24] INFO: Selecting Catalog
[10:48:24] INFO: Using Catalog for LST 9-13
[10:48:24] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:48:24] INFO: Selecting Catalog
[10:48:24] INFO: Using Catalog for LST 9-13
[10:48:24] INFO: Selecting Catalog
[10:48:24] INFO: Using Catalog for LST 9-13
[10:48:24] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:48:24] INFO: Selecting Catalog
[10:48:24] INFO: Using Catalog for LST 9-13
[10:48:24] INFO: Selecting Catalog
[10:48:24] INFO: Using Catalog for LST 9-13
[10:48:24] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:48:24] INFO: Selecting Catalog
[10:48:24] INFO: Using Catalog for LST 9-13
[10:48:24] INFO: Selecting Catalog
[10:48:24] INFO: Using Catalog for LST 9-13
[10:48:24] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:48:24] INFO: Selecting Catalog
[10:48:24] INFO: Using Catalog for LST 9-13
[10:48:24] INFO: Selecting Catalog
[10:48:24] INFO: Using Catalog for LST 9-13
[10:48:24] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:48:24] INFO: Selecting Catalog
[10:48:24] INFO: Using Catalog for LST 9-13
[10:48:24] INFO: Selecting Catalog
[10:48:24] INFO: Using Catalog for LST 9-13
[10:48:24] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:48:24] INFO: Selecting Catalog
[10:48:24] INFO: Using Catalog for LST 9-13
[10:48:24] INFO: Selecting Catalog
[10:48:24] INFO: Using Catalog for LST 9-13
[10:48:24] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:48:24] INFO: Selecting Catalog
[10:48:24] INFO: Using Catalog for LST 9-13
[10:48:24] INFO: Selecting Catalog
[10:48:24] INFO: Using Catalog for LST 9-13
[10:48:24] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:48:24] INFO: Selecting Catalog
[10:48:24] INFO: Using Catalog for LST 9-13
[10:48:24] INFO: Selecting Catalog
[10:48:24] INFO: Using Catalog for LST 9-13
[10:48:24] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:48:24] INFO: Selecting Catalog
[10:48:24] INFO: Using Catalog for LST 9-13
[10:48:24] INFO: Selecting Catalog
[10:48:24] INFO: Using Catalog for LST 9-13
[10:48:24] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:48:24] INFO: Selecting Catalog
[10:48:24] INFO: Using Catalog for LST 9-13
[10:48:24] INFO: Selecting Catalog
[10:48:24] INFO: Using Catalog for LST 9-13
[10:48:24] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:48:24] INFO: Selecting Catalog
[10:48:24] INFO: Using Catalog for LST 9-13
[10:48:24] INFO: Selecting Catalog
[10:48:24] INFO: Using Catalog for LST 9-13
[10:48:24] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:48:24] INFO: Selecting Catalog
[10:48:24] INFO: Using Catalog for LST 9-13
[10:48:24] INFO: Selecting Catalog
[10:48:24] INFO: Using Catalog for LST 9-13
[10:48:24] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:48:24] INFO: Selecting Catalog
[10:48:24] INFO: Using Catalog for LST 9-13
[10:48:24] INFO: Selecting Catalog
[10:48:24] INFO: Using Catalog for LST 9-13
[10:48:24] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:48:25] INFO: Selecting Catalog
[10:48:25] INFO: Using Catalog for LST 9-13
[10:48:25] INFO: Selecting Catalog
[10:48:25] INFO: Using Catalog for LST 9-13
[10:48:25] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:48:25] INFO: Selecting Catalog
[10:48:25] INFO: Using Catalog for LST 9-13
[10:48:25] INFO: Selecting Catalog
[10:48:25] INFO: Using Catalog for LST 9-13
[10:48:25] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
runSuccessful: True
[10:48:25] ******** End Scheduling Block
[10:48:25] ******** observer = OPERATOR, SB name = 15B287_operator, project ID = AGBT15B_287

how much log? 19576 id: 179200self.history: <gbt.turtle.database.History.History instance at 0x4956b00>self.history.connection: <gbt.turtle.database.TurtleConnection.TurtleConnection instance at 0x4956878>how much converted log? 19784 
#######################################################
 
 
#######################################################
 SCRIPT NUMBER 15, project:AGBT15B_287_40 
 179201 128 OPERATOR 10 Amber Bonsall 2016-01-10 10:48:27 obs_completed 
#######################################################
# test script to update catalog as you go...

########## CHANGE THESE ONLY #############
OnOffOnTime = 10 #minutes (change this to 12 to be in line with DSS scheduling)
obs_per_source = 3 #total observing time per source = OnOffOnTime * obs_per_source
h = Horizon(10.0) #minimum of 10 degrees elevation
h_up = Horizon(85.0) #maximum of 85 degrees due to keyhole
myOff = Offset("J2000",1.0,0.0,cosv=True)  # Off position relative to source
doFirstPointing = True #Setting to False will skip the first pointing
doFirstCal = True  #Setting to False will skip the first 3C calibrator OnOff scan
peak_every = 12 #peak/cal every 12 OnOffOn (every 2.5 hours)
peak_near_source = False #Do another peak when changing to new source
#####################################

######### NOTES ###############
# This script runs in blocks of On-Off-On position switching with
# the two outer 'on' scans sharing one 'off'
# Total on-source time = 20 minutes
# Length of one 'On' or 'Off' = 3 minutes 20 seconds
# Length of one On-Off-On = 10 minutes
# 3 On-Off-On blocks are needed per source (30 minutes total per source)

###### Timing
# It takes 34m to completely observe 1 source+overhead (9 track scans)

execfile("/home/astro-util/projects/15B287_operator/15B287_config.py")
execfile("/home/astro-util/projects/15B287_operator/15B287_utils.py")
Catalog(fluxcal)
Catalog(lband_pointing)

scanTime = OnOffOnTime * 20.0 #seconds
tdelta = DateTime.TimeDelta(minutes=OnOffOnTime)
obs_count = 0
doCal = doFirstCal
doPointing = doFirstPointing
project_obs = 0
old_catalog_name = 'dummy'
fullcat = '/home/astro-util/projects/15B287_operator/15B287_operator.cat'

Configure(config_1)

while project_obs < 100:
    mycat,altcal = select_my_catalog()
    if mycat == old_catalog_name:
        print 'SAME CATALOG HAS BEEN SELECTED: Using FULL catalog'
        mycat = fullcat
        altcal = '3C309_1'
    old_catalog_name = mycat
    c = Catalog(mycat)
    sources = c.keys()
    for source in sources:
        doBalance = True
        newPeak = True
        calibrator = c[source]["calibrator"]
        n_obs = int(float(c[source]["n_obs"]))
        obs_left = obs_per_source-n_obs
        obs_ok = obs_left > 0
        t_now = Now()
        if t_now != None and obs_ok:
            source_rise = h.GetRise(source)
            source_set  = h.GetSet(source)
            keyhole_rise = h_up.GetRise(source)
            keyhole_set = h_up.GetSet(source)
            if source_rise != None or keyhole_set != None:
                if source_set != None and keyhole_rise != None:
                    t_ok = ((t_now + tdelta) < source_set)
                    t_ok = t_ok and (t_now >= source_rise)
                    t_ok = t_ok and ((t_now + tdelta) < keyhole_rise)
                else:
                    t_ok = True
            else:
                t_ok = False
        else:
            t_ok = False

        source_ok = t_ok and obs_ok

        if source_ok:
            if doPointing == True:
                #check the calibrator is above the horizon
                keyhole_cal_rise = h_up.GetRise(calibrator)
                keyhole_cal_set = h_up.GetSet(calibrator)
                cal_rise = h.GetRise(calibrator)
                if cal_rise>t_now or keyhole_cal_set == None:
                    myCal = altcal #low circumpolar alternative
                    print 'Calibrator %s is too low: Using %s' %(calibrator,altcal)
                else:
                    if keyhole_cal_rise != None:
                        if (t_now+tdelta) >= keyhole_cal_rise:
                            print 'Calibrator %s is in keyhole: Using %s' %(calibrator,altcal)
                            myCal = altcal
                        else:
                            myCal = calibrator
                    else:
                        myCal = calibrator

                if obs_count == 0:
                    AutoPeakFocus(myCal)
                    #Break("Check Peak and Focus")
                else:
                    AutoPeak(myCal)
                Configure(config_1)
                doBalance = True
                doPointing = False

            if doCal:
                Slew(myCal)
                Balance()
                print 'Calibration scans (OnOff) :%s ' %(myCal)
                OnOff(myCal,myOff,120.0)
                doCal = False
                doBalance = True

            for i in range(obs_left):
                t_now = Now()   #check time ok again
                t_ok = False
                if t_now != None and keyhole_set != None:
                    if source_rise != None:
                        if source_set != None:
                            t_ok = ((t_now + tdelta) < source_set)
                            t_ok = t_ok and (t_now >= source_rise)
                            if keyhole_rise != None:
                                t_ok = t_ok and ((t_now+tdelta) < keyhole_rise)
                        else:
                            t_ok = True
                    else:
                        t_ok = False
                else:
                    t_ok = False

                if t_ok:
                    if peak_near_source and newPeak:
                        Slew(source)
                        AutoPeak()
                        Configure(config_1)
                        newPeak = False
                        doBalance = True
                    if doBalance:
                        Slew(source)
                        Balance()
                        doBalance = False

                    Comment("Starting on-source scan")
                    Track(source,None,scanTime)
                    Comment("Starting off-source scan")
                    Track(source,None,scanTime,fixedOffset=myOff)
                    Comment("Starting on-source scan")
                    Track(source,None,scanTime)
                    obs_count = obs_count + 1
                    obs_tot = obs_per_source+1-obs_left+i
                    print '%s: OBS COMPLETE = %s/%s' %(source,obs_tot,obs_per_source)
                    update_my_catalogs(source,obs_tot)

                    if obs_count % peak_every == 0:  #Cal/pointing interval
                        doCal = True
                        doPointing = True
        if source_ok and mycat == fullcat:
            break
    project_obs = project_obs+1

#######################################################
 LOG SESSION NUMBER 15 
[10:48:27] ******** Begin Scheduling Block
[10:48:27] ******** observer = OPERATOR, SB name = 15B287_operator, project ID = AGBT15B_287, date = 10 Jan 2016

[10:48:27] Configuring telescope.
[10:48:27]     Setting State: Activating
[10:48:28]     Setting State: Ready
[10:48:28]     Setting State: Activating
[10:48:29]     Setting State: Ready
[10:48:29] Default values are
[10:48:29] if3freq  =  [0, 0, 0]
[10:48:29] notchfilter  =  In
[10:48:29] polswitch  =  thru
[10:48:29] The bad devices are: 
[10:48:29] OpticalDriver5
[10:48:29] The bad devices are: 
[10:48:29] OpticalDriver5

[10:48:29] Checking telescope
[10:48:29] Configuration Complete
[10:48:30] INFO: Selecting Catalog
[10:48:30] INFO: Using Catalog for LST 9-13
[10:48:30] INFO: Selecting Catalog
[10:48:30] INFO: Using Catalog for LST 9-13
[10:48:30] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:48:30] Calibrator 3C48 is too low: Using 3C309_1
[10:48:30] Configuring telescope.
[10:48:31]     Setting State: Activating
[10:48:32]     Setting State: Ready
[10:48:32]     Setting State: Activating
[10:48:33]     Setting State: Ready
[10:48:33] Default values are
[10:48:33] if3freq  =  [0]
[10:48:33] notchfilter  =  In
[10:48:33] polswitch  =  thru
[10:48:33] The bad devices are: 
[10:48:33] OpticalDriver5

[10:48:33] Checking telescope
[10:48:33] Configuration Complete
[10:48:33] source : 3C309_1
               F1 : 1.4
               F2 : 32.0
               S22235 : 1.0
               S1400 : 7.5
               angsize : 1.5
               location : J2000 @ (14:59:07.58, 71:40:19.87)
[10:48:33] Slewing to source.
[10:48:33] In state Ready, waiting for state Activating
[10:48:33]     Setting State: Activating
[10:48:33] Detected state Activating
[10:48:33] In state Activating, waiting for state Ready
[10:48:48]     Setting State: Ready
[10:48:48] Detected state Ready
[10:48:48] Balancing IF system.
[10:48:48] Balancing IFRack
[10:48:48]     Setting State: Activating
[10:48:48]     Setting State: Ready
[10:48:50] the sampler values are:
[10:48:50] RF_power 1 : 1.030273
[10:48:50] RF_power 2 : 0.004882812
[10:48:50] RF_power 3 : 0.8789062
[10:48:50] RF_power 4 : 0.01464844
[10:48:50] RF_power 5 : 0.03417969
[10:48:50] RF_power 6 : 3.095703
[10:48:50] RF_power 7 : 0.4980469
[10:48:50] RF_power 8 : 0.02929688
[10:48:50] source : 3C309_1
               F1 : 1.4
               F2 : 32.0
               S22235 : 1.0
               S1400 : 7.5
               angsize : 1.5
               location : J2000 @ (14:59:07.58, 71:40:19.87)
[10:48:50] Peak: Subscan 1 of 4
[10:48:50] In state Ready, waiting for state Running
[10:48:51]     Setting State: Activating
[10:49:15]     Setting State: Committed
[10:49:17]     Setting State: Running
[10:49:17] Detected state Running
[10:49:17] *** Notice: This subscan will be numbered as scan #99 in your data reduction package.
[10:49:17] In state Running, waiting for state Ready
[10:49:47]     Setting State: Stopping
[10:49:53]     Setting State: Ready
[10:49:53] Detected state Ready
[10:49:53] Ygor Telescope: WaitForStopping
[10:49:53] Peak: Subscan 2 of 4
[10:49:54] In state Ready, waiting for state Running
[10:49:54]     Setting State: Activating
[10:50:03]     Setting State: Committed
[10:50:05]     Setting State: Running
[10:50:05] Detected state Running
[10:50:05] *** Notice: This subscan will be numbered as scan #100 in your data reduction package.
[10:50:05] In state Running, waiting for state Ready
[10:50:35]     Setting State: Stopping
[10:50:41]     Setting State: Ready
[10:50:41] Detected state Ready
[10:50:41] Ygor Telescope: WaitForStopping
[10:50:42] *** Updating antenna's pointing to az2=0.0340 and el=0.3289 arcmins

[10:50:42] Peak: Subscan 3 of 4
[10:50:43] In state Ready, waiting for state Running
[10:50:43]     Setting State: Activating
[10:51:04]     Setting State: Committed
[10:51:06]     Setting State: Running
[10:51:06] Detected state Running
[10:51:06] *** Notice: This subscan will be numbered as scan #101 in your data reduction package.
[10:51:06] In state Running, waiting for state Ready
[10:51:36]     Setting State: Stopping
[10:51:41]     Setting State: Ready
[10:51:41] Detected state Ready
[10:51:41] Ygor Telescope: WaitForStopping
[10:51:41] Peak: Subscan 4 of 4
[10:51:41] In state Ready, waiting for state Running
[10:51:41]     Setting State: Activating
[10:51:49]     Setting State: Committed
[10:51:51]     Setting State: Running
[10:51:51] Detected state Running
[10:51:51] *** Notice: This subscan will be numbered as scan #102 in your data reduction package.
[10:51:51] In state Running, waiting for state Ready
[10:52:21]     Setting State: Stopping
[10:52:25]     Setting State: Ready
[10:52:25] Detected state Ready
[10:52:25] Ygor Telescope: WaitForStopping
[10:52:26] . *** Updating antenna's pointing to az2=0.0340 and el=0.3153 arcmins

[10:52:27] source : 3C309_1
               F1 : 1.4
               F2 : 32.0
               S22235 : 1.0
               S1400 : 7.5
               angsize : 1.5
               location : J2000 @ (14:59:07.58, 71:40:19.87)
[10:52:27] Focus: Subscan 1 of 1
[10:52:27] In state Ready, waiting for state Running
[10:52:27]     Setting State: Activating
[10:52:53]     Setting State: Committed
[10:52:55]     Setting State: Running
[10:52:55] Detected state Running
[10:52:55] *** Notice: This subscan will be numbered as scan #103 in your data reduction package.
[10:52:55] In state Running, waiting for state Ready
[10:53:55]     Setting State: Stopping
[10:53:57]     Setting State: Ready
[10:53:57] Detected state Ready
[10:53:57] Ygor Telescope: WaitForStopping
[10:53:58] . *** Updating antenna's focus to -27.05 mm

[10:53:58] Configuring telescope.
[10:53:58]     Setting State: Activating
[10:54:00]     Setting State: Ready
[10:54:02]     Setting State: Activating
[10:54:03]     Setting State: Ready
[10:54:03] Default values are
[10:54:03] if3freq  =  [0, 0, 0]
[10:54:03] notchfilter  =  In
[10:54:03] polswitch  =  thru
[10:54:03] The bad devices are: 
[10:54:03] OpticalDriver5
[10:54:03] The bad devices are: 
[10:54:03] OpticalDriver5
[10:54:03] Waiting for the ConverterRack to finish activating
[10:54:03] . .
[10:54:03] Checking telescope
[10:54:03] Configuration Complete
[10:54:03] source : 3C309_1
               F1 : 1.4
               F2 : 32.0
               S22235 : 1.0
               S1400 : 7.5
               angsize : 1.5
               location : J2000 @ (14:59:07.58, 71:40:19.87)
[10:54:03] Slewing to source.
[10:54:03] In state Ready, waiting for state Activating
[10:54:03]     Setting State: Activating
[10:54:03] Detected state Activating
[10:54:03] In state Activating, waiting for state Ready
[10:54:30]     Setting State: Ready
[10:54:30] Detected state Ready
[10:54:30] Balancing IF system.
[10:54:30] Balancing IFRack
[10:54:31]     Setting State: Activating
[10:54:31]     Setting State: Ready
[10:54:33] the sampler values are:
[10:54:33] RF_power 1 : 3.105469
[10:54:33] RF_power 2 : 0
[10:54:33] RF_power 3 : 3.129883
[10:54:33] RF_power 4 : 0.009765625
[10:54:33] RF_power 5 : 0.03417969
[10:54:33] RF_power 6 : 3.007812
[10:54:33] RF_power 7 : 3.232422
[10:54:33] RF_power 8 : 0.02441406
[10:54:33] Balancing VEGAS
[10:54:33]     Setting State: Activating
[10:54:33]     Setting State: Ready
[10:54:34]     Setting State: Activating
[10:54:34]     Setting State: Ready
[10:54:34] Calibration scans (OnOff) :3C309_1 
[10:54:34] source : 3C309_1
               F1 : 1.4
               F2 : 32.0
               S22235 : 1.0
               S1400 : 7.5
               angsize : 1.5
               location : J2000 @ (14:59:07.58, 71:40:19.87)
[10:54:35] OnOff: Subscan 1 of 2
[10:54:35] In state Ready, waiting for state Running
[10:54:35]     Setting State: Activating
[10:54:40]     Setting State: Committed
[10:54:42]     Setting State: Running
[10:54:42] Detected state Running
[10:54:42] *** Notice: This subscan will be numbered as scan #104 in your data reduction package.
[10:54:42] In state Running, waiting for state Ready
[10:56:42]     Setting State: Stopping
[10:56:44]     Setting State: Ready
[10:56:44] Detected state Ready
[10:56:44] Ygor Telescope: WaitForStopping
[10:56:44] OnOff: Subscan 2 of 2
[10:56:44] In state Ready, waiting for state Running
[10:56:44]     Setting State: Activating
[10:56:59]     Setting State: Committed
[10:57:01]     Setting State: Running
[10:57:01] Detected state Running
[10:57:01] *** Notice: This subscan will be numbered as scan #105 in your data reduction package.
[10:57:01] In state Running, waiting for state Ready
[10:59:01]     Setting State: Stopping
[10:59:03]     Setting State: Ready
[10:59:03] Detected state Ready
[10:59:03] Ygor Telescope: WaitForStopping
[10:59:03] INFO: Selecting Catalog
[10:59:03] INFO: Using Catalog for LST 9-13
[10:59:03] INFO: Selecting Catalog
[10:59:03] INFO: Using Catalog for LST 9-13
[10:59:03] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:59:03] INFO: Selecting Catalog
[10:59:03] INFO: Using Catalog for LST 9-13
[10:59:03] INFO: Selecting Catalog
[10:59:03] INFO: Using Catalog for LST 9-13
[10:59:03] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:59:03] INFO: Selecting Catalog
[10:59:03] INFO: Using Catalog for LST 9-13
[10:59:03] INFO: Selecting Catalog
[10:59:03] INFO: Using Catalog for LST 9-13
[10:59:03] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:59:03] INFO: Selecting Catalog
[10:59:03] INFO: Using Catalog for LST 9-13
[10:59:03] INFO: Selecting Catalog
[10:59:03] INFO: Using Catalog for LST 9-13
[10:59:03] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:59:03] INFO: Selecting Catalog
[10:59:03] INFO: Using Catalog for LST 9-13
[10:59:03] INFO: Selecting Catalog
[10:59:03] INFO: Using Catalog for LST 9-13
[10:59:03] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:59:03] INFO: Selecting Catalog
[10:59:03] INFO: Using Catalog for LST 9-13
[10:59:03] INFO: Selecting Catalog
[10:59:03] INFO: Using Catalog for LST 9-13
[10:59:03] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:59:03] INFO: Selecting Catalog
[10:59:03] INFO: Using Catalog for LST 9-13
[10:59:03] INFO: Selecting Catalog
[10:59:03] INFO: Using Catalog for LST 9-13
[10:59:03] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:59:03] INFO: Selecting Catalog
[10:59:03] INFO: Using Catalog for LST 9-13
[10:59:03] INFO: Selecting Catalog
[10:59:03] INFO: Using Catalog for LST 9-13
[10:59:03] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:59:03] INFO: Selecting Catalog
[10:59:03] INFO: Using Catalog for LST 9-13
[10:59:03] INFO: Selecting Catalog
[10:59:03] INFO: Using Catalog for LST 9-13
[10:59:03] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:59:03] INFO: Selecting Catalog
[10:59:03] INFO: Using Catalog for LST 9-13
[10:59:03] INFO: Selecting Catalog
[10:59:03] INFO: Using Catalog for LST 9-13
[10:59:03] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:59:03] INFO: Selecting Catalog
[10:59:03] INFO: Using Catalog for LST 9-13
[10:59:03] INFO: Selecting Catalog
[10:59:03] INFO: Using Catalog for LST 9-13
[10:59:03] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:59:03] INFO: Selecting Catalog
[10:59:03] INFO: Using Catalog for LST 9-13
[10:59:03] INFO: Selecting Catalog
[10:59:03] INFO: Using Catalog for LST 9-13
[10:59:03] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:59:03] INFO: Selecting Catalog
[10:59:03] INFO: Using Catalog for LST 9-13
[10:59:03] INFO: Selecting Catalog
[10:59:03] INFO: Using Catalog for LST 9-13
[10:59:03] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:59:03] INFO: Selecting Catalog
[10:59:03] INFO: Using Catalog for LST 9-13
[10:59:03] INFO: Selecting Catalog
[10:59:03] INFO: Using Catalog for LST 9-13
[10:59:03] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:59:03] INFO: Selecting Catalog
[10:59:03] INFO: Using Catalog for LST 9-13
[10:59:03] INFO: Selecting Catalog
[10:59:03] INFO: Using Catalog for LST 9-13
[10:59:03] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:59:04] INFO: Selecting Catalog
[10:59:04] INFO: Using Catalog for LST 9-13
[10:59:04] INFO: Selecting Catalog
[10:59:04] INFO: Using Catalog for LST 9-13
[10:59:04] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:59:04] INFO: Selecting Catalog
[10:59:04] INFO: Using Catalog for LST 9-13
[10:59:04] INFO: Selecting Catalog
[10:59:04] INFO: Using Catalog for LST 9-13
[10:59:04] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:59:04] INFO: Selecting Catalog
[10:59:04] INFO: Using Catalog for LST 9-13
[10:59:04] INFO: Selecting Catalog
[10:59:04] INFO: Using Catalog for LST 9-13
[10:59:04] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:59:04] INFO: Selecting Catalog
[10:59:04] INFO: Using Catalog for LST 9-13
[10:59:04] INFO: Selecting Catalog
[10:59:04] INFO: Using Catalog for LST 9-13
[10:59:04] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:59:04] INFO: Selecting Catalog
[10:59:04] INFO: Using Catalog for LST 9-13
[10:59:04] INFO: Selecting Catalog
[10:59:04] INFO: Using Catalog for LST 9-13
[10:59:04] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:59:04] INFO: Selecting Catalog
[10:59:04] INFO: Using Catalog for LST 9-13
[10:59:04] INFO: Selecting Catalog
[10:59:04] INFO: Using Catalog for LST 9-13
[10:59:04] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:59:04] INFO: Selecting Catalog
[10:59:04] INFO: Using Catalog for LST 9-13
[10:59:04] INFO: Selecting Catalog
[10:59:04] INFO: Using Catalog for LST 9-13
[10:59:04] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:59:04] INFO: Selecting Catalog
[10:59:04] INFO: Using Catalog for LST 9-13
[10:59:04] INFO: Selecting Catalog
[10:59:04] INFO: Using Catalog for LST 9-13
[10:59:04] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:59:04] INFO: Selecting Catalog
[10:59:04] INFO: Using Catalog for LST 9-13
[10:59:04] INFO: Selecting Catalog
[10:59:04] INFO: Using Catalog for LST 9-13
[10:59:04] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:59:04] INFO: Selecting Catalog
[10:59:04] INFO: Using Catalog for LST 9-13
[10:59:04] INFO: Selecting Catalog
[10:59:04] INFO: Using Catalog for LST 9-13
[10:59:04] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:59:04] INFO: Selecting Catalog
[10:59:04] INFO: Using Catalog for LST 9-13
[10:59:04] INFO: Selecting Catalog
[10:59:04] INFO: Using Catalog for LST 9-13
[10:59:04] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:59:04] INFO: Selecting Catalog
[10:59:04] INFO: Using Catalog for LST 9-13
[10:59:04] INFO: Selecting Catalog
[10:59:04] INFO: Using Catalog for LST 9-13
[10:59:04] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:59:04] INFO: Selecting Catalog
[10:59:04] INFO: Using Catalog for LST 9-13
[10:59:04] INFO: Selecting Catalog
[10:59:04] INFO: Using Catalog for LST 9-13
[10:59:04] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:59:04] INFO: Selecting Catalog
[10:59:04] INFO: Using Catalog for LST 9-13
[10:59:04] INFO: Selecting Catalog
[10:59:04] INFO: Using Catalog for LST 9-13
[10:59:04] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:59:04] INFO: Selecting Catalog
[10:59:04] INFO: Using Catalog for LST 9-13
[10:59:04] INFO: Selecting Catalog
[10:59:04] INFO: Using Catalog for LST 9-13
[10:59:04] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:59:04] INFO: Selecting Catalog
[10:59:04] INFO: Using Catalog for LST 9-13
[10:59:04] INFO: Selecting Catalog
[10:59:04] INFO: Using Catalog for LST 9-13
[10:59:04] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:59:05] INFO: Selecting Catalog
[10:59:05] INFO: Using Catalog for LST 9-13
[10:59:05] INFO: Selecting Catalog
[10:59:05] INFO: Using Catalog for LST 9-13
[10:59:05] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:59:05] INFO: Selecting Catalog
[10:59:05] INFO: Using Catalog for LST 9-13
[10:59:05] INFO: Selecting Catalog
[10:59:05] INFO: Using Catalog for LST 9-13
[10:59:05] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:59:05] INFO: Selecting Catalog
[10:59:05] INFO: Using Catalog for LST 9-13
[10:59:05] INFO: Selecting Catalog
[10:59:05] INFO: Using Catalog for LST 9-13
[10:59:05] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:59:05] INFO: Selecting Catalog
[10:59:05] INFO: Using Catalog for LST 9-13
[10:59:05] INFO: Selecting Catalog
[10:59:05] INFO: Using Catalog for LST 9-13
[10:59:05] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:59:05] INFO: Selecting Catalog
[10:59:05] INFO: Using Catalog for LST 9-13
[10:59:05] INFO: Selecting Catalog
[10:59:05] INFO: Using Catalog for LST 9-13
[10:59:05] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:59:05] INFO: Selecting Catalog
[10:59:05] INFO: Using Catalog for LST 9-13
[10:59:05] INFO: Selecting Catalog
[10:59:05] INFO: Using Catalog for LST 9-13
[10:59:05] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:59:05] INFO: Selecting Catalog
[10:59:05] INFO: Using Catalog for LST 9-13
[10:59:05] INFO: Selecting Catalog
[10:59:05] INFO: Using Catalog for LST 9-13
[10:59:05] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:59:05] INFO: Selecting Catalog
[10:59:05] INFO: Using Catalog for LST 9-13
[10:59:05] INFO: Selecting Catalog
[10:59:05] INFO: Using Catalog for LST 9-13
[10:59:05] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:59:05] INFO: Selecting Catalog
[10:59:05] INFO: Using Catalog for LST 9-13
[10:59:05] INFO: Selecting Catalog
[10:59:05] INFO: Using Catalog for LST 9-13
[10:59:05] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:59:05] INFO: Selecting Catalog
[10:59:05] INFO: Using Catalog for LST 9-13
[10:59:05] INFO: Selecting Catalog
[10:59:05] INFO: Using Catalog for LST 9-13
[10:59:05] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:59:05] INFO: Selecting Catalog
[10:59:05] INFO: Using Catalog for LST 9-13
[10:59:05] INFO: Selecting Catalog
[10:59:05] INFO: Using Catalog for LST 9-13
[10:59:05] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:59:05] INFO: Selecting Catalog
[10:59:05] INFO: Using Catalog for LST 9-13
[10:59:05] INFO: Selecting Catalog
[10:59:05] INFO: Using Catalog for LST 9-13
[10:59:05] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:59:05] INFO: Selecting Catalog
[10:59:05] INFO: Using Catalog for LST 9-13
[10:59:05] INFO: Selecting Catalog
[10:59:05] INFO: Using Catalog for LST 9-13
[10:59:05] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:59:05] INFO: Selecting Catalog
[10:59:05] INFO: Using Catalog for LST 9-13
[10:59:05] INFO: Selecting Catalog
[10:59:05] INFO: Using Catalog for LST 9-13
[10:59:05] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:59:05] INFO: Selecting Catalog
[10:59:05] INFO: Using Catalog for LST 9-13
[10:59:05] INFO: Selecting Catalog
[10:59:05] INFO: Using Catalog for LST 9-13
[10:59:05] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:59:05] INFO: Selecting Catalog
[10:59:05] INFO: Using Catalog for LST 9-13
[10:59:05] INFO: Selecting Catalog
[10:59:05] INFO: Using Catalog for LST 9-13
[10:59:05] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:59:05] INFO: Selecting Catalog
[10:59:05] INFO: Using Catalog for LST 9-13
[10:59:05] INFO: Selecting Catalog
[10:59:05] INFO: Using Catalog for LST 9-13
[10:59:05] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:59:06] INFO: Selecting Catalog
[10:59:06] INFO: Using Catalog for LST 9-13
[10:59:06] INFO: Selecting Catalog
[10:59:06] INFO: Using Catalog for LST 9-13
[10:59:06] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
runSuccessful: True
[10:59:06] ******** End Scheduling Block
[10:59:06] ******** observer = OPERATOR, SB name = 15B287_operator, project ID = AGBT15B_287

how much log? 19648 id: 179201self.history: <gbt.turtle.database.History.History instance at 0x4956b00>self.history.connection: <gbt.turtle.database.TurtleConnection.TurtleConnection instance at 0x4956878>how much converted log? 19856 
#######################################################
 
 
#######################################################
 SCRIPT NUMBER 16, project:AGBT15B_287_40 
 179202 128 OPERATOR 10 Amber Bonsall 2016-01-10 10:59:08 obs_aborted 
#######################################################
# test script to update catalog as you go...

########## CHANGE THESE ONLY #############
OnOffOnTime = 10 #minutes (change this to 12 to be in line with DSS scheduling)
obs_per_source = 3 #total observing time per source = OnOffOnTime * obs_per_source
h = Horizon(10.0) #minimum of 10 degrees elevation
h_up = Horizon(85.0) #maximum of 85 degrees due to keyhole
myOff = Offset("J2000",1.0,0.0,cosv=True)  # Off position relative to source
doFirstPointing = True #Setting to False will skip the first pointing
doFirstCal = True  #Setting to False will skip the first 3C calibrator OnOff scan
peak_every = 12 #peak/cal every 12 OnOffOn (every 2.5 hours)
peak_near_source = False #Do another peak when changing to new source
#####################################

######### NOTES ###############
# This script runs in blocks of On-Off-On position switching with
# the two outer 'on' scans sharing one 'off'
# Total on-source time = 20 minutes
# Length of one 'On' or 'Off' = 3 minutes 20 seconds
# Length of one On-Off-On = 10 minutes
# 3 On-Off-On blocks are needed per source (30 minutes total per source)

###### Timing
# It takes 34m to completely observe 1 source+overhead (9 track scans)

execfile("/home/astro-util/projects/15B287_operator/15B287_config.py")
execfile("/home/astro-util/projects/15B287_operator/15B287_utils.py")
Catalog(fluxcal)
Catalog(lband_pointing)

scanTime = OnOffOnTime * 20.0 #seconds
tdelta = DateTime.TimeDelta(minutes=OnOffOnTime)
obs_count = 0
doCal = doFirstCal
doPointing = doFirstPointing
project_obs = 0
old_catalog_name = 'dummy'
fullcat = '/home/astro-util/projects/15B287_operator/15B287_operator.cat'

Configure(config_1)

while project_obs < 100:
    mycat,altcal = select_my_catalog()
    if mycat == old_catalog_name:
        print 'SAME CATALOG HAS BEEN SELECTED: Using FULL catalog'
        mycat = fullcat
        altcal = '3C309_1'
    old_catalog_name = mycat
    c = Catalog(mycat)
    sources = c.keys()
    for source in sources:
        doBalance = True
        newPeak = True
        calibrator = c[source]["calibrator"]
        n_obs = int(float(c[source]["n_obs"]))
        obs_left = obs_per_source-n_obs
        obs_ok = obs_left > 0
        t_now = Now()
        if t_now != None and obs_ok:
            source_rise = h.GetRise(source)
            source_set  = h.GetSet(source)
            keyhole_rise = h_up.GetRise(source)
            keyhole_set = h_up.GetSet(source)
            if source_rise != None or keyhole_set != None:
                if source_set != None and keyhole_rise != None:
                    t_ok = ((t_now + tdelta) < source_set)
                    t_ok = t_ok and (t_now >= source_rise)
                    t_ok = t_ok and ((t_now + tdelta) < keyhole_rise)
                else:
                    t_ok = True
            else:
                t_ok = False
        else:
            t_ok = False

        source_ok = t_ok and obs_ok

        if source_ok:
            if doPointing == True:
                #check the calibrator is above the horizon
                keyhole_cal_rise = h_up.GetRise(calibrator)
                keyhole_cal_set = h_up.GetSet(calibrator)
                cal_rise = h.GetRise(calibrator)
                if cal_rise>t_now or keyhole_cal_set == None:
                    myCal = altcal #low circumpolar alternative
                    print 'Calibrator %s is too low: Using %s' %(calibrator,altcal)
                else:
                    if keyhole_cal_rise != None:
                        if (t_now+tdelta) >= keyhole_cal_rise:
                            print 'Calibrator %s is in keyhole: Using %s' %(calibrator,altcal)
                            myCal = altcal
                        else:
                            myCal = calibrator
                    else:
                        myCal = calibrator

                if obs_count == 0:
                    AutoPeakFocus(myCal)
                    #Break("Check Peak and Focus")
                else:
                    AutoPeak(myCal)
                Configure(config_1)
                doBalance = True
                doPointing = False

            if doCal:
                Slew(myCal)
                Balance()
                print 'Calibration scans (OnOff) :%s ' %(myCal)
                OnOff(myCal,myOff,120.0)
                doCal = False
                doBalance = True

            for i in range(obs_left):
                t_now = Now()   #check time ok again
                t_ok = False
                if t_now != None and keyhole_set != None:
                    if source_rise != None:
                        if source_set != None:
                            t_ok = ((t_now + tdelta) < source_set)
                            t_ok = t_ok and (t_now >= source_rise)
                            if keyhole_rise != None:
                                t_ok = t_ok and ((t_now+tdelta) < keyhole_rise)
                        else:
                            t_ok = True
                    else:
                        t_ok = False
                else:
                    t_ok = False

                if t_ok:
                    if peak_near_source and newPeak:
                        Slew(source)
                        AutoPeak()
                        Configure(config_1)
                        newPeak = False
                        doBalance = True
                    if doBalance:
                        Slew(source)
                        Balance()
                        doBalance = False

                    Comment("Starting on-source scan")
                    Track(source,None,scanTime)
                    Comment("Starting off-source scan")
                    Track(source,None,scanTime,fixedOffset=myOff)
                    Comment("Starting on-source scan")
                    Track(source,None,scanTime)
                    obs_count = obs_count + 1
                    obs_tot = obs_per_source+1-obs_left+i
                    print '%s: OBS COMPLETE = %s/%s' %(source,obs_tot,obs_per_source)
                    update_my_catalogs(source,obs_tot)

                    if obs_count % peak_every == 0:  #Cal/pointing interval
                        doCal = True
                        doPointing = True
        if source_ok and mycat == fullcat:
            break
    project_obs = project_obs+1

#######################################################
 LOG SESSION NUMBER 16 
[10:59:08] ******** Begin Scheduling Block
[10:59:08] ******** observer = OPERATOR, SB name = 15B287_operator, project ID = AGBT15B_287, date = 10 Jan 2016

[10:59:08] Configuring telescope.
[10:59:08]     Setting State: Activating
[10:59:09]     Setting State: Ready
[10:59:09]     Setting State: Activating
[10:59:10]     Setting State: Ready
[10:59:10] Default values are
[10:59:10] if3freq  =  [0, 0, 0]
[10:59:10] notchfilter  =  In
[10:59:10] polswitch  =  thru
[10:59:10] The bad devices are: 
[10:59:10] OpticalDriver5
[10:59:10] The bad devices are: 
[10:59:10] OpticalDriver5

[10:59:10] Checking telescope
[10:59:10] Configuration Complete
[10:59:11] INFO: Selecting Catalog
[10:59:11] INFO: Using Catalog for LST 9-13
[10:59:11] INFO: Selecting Catalog
[10:59:11] INFO: Using Catalog for LST 9-13
[10:59:11] SAME CATALOG HAS BEEN SELECTED: Using FULL catalog
[10:59:11] Calibrator 3C48 is too low: Using 3C309_1
[10:59:11] Configuring telescope.
[10:59:12]     Setting State: Activating
[10:59:13]     Setting State: Ready
[10:59:13]     Setting State: Activating
[10:59:14]     Setting State: Ready
[10:59:14] Default values are
[10:59:14] if3freq  =  [0]
[10:59:14] notchfilter  =  In
[10:59:14] polswitch  =  thru
[10:59:14] The bad devices are: 
[10:59:14] OpticalDriver5

[10:59:14] Checking telescope
[10:59:14] Configuration Complete
[10:59:14] source : 3C309_1
               F1 : 1.4
               F2 : 32.0
               S22235 : 1.0
               S1400 : 7.5
               angsize : 1.5
               location : J2000 @ (14:59:07.58, 71:40:19.87)
[10:59:14] Slewing to source.
[10:59:14] In state Ready, waiting for state Activating
[10:59:14]     Setting State: Activating
[10:59:14] Detected state Activating
[10:59:14] In state Activating, waiting for state Ready
[10:59:29]     Setting State: Ready
[10:59:29] Detected state Ready
[10:59:29] Balancing IF system.
[10:59:29] Balancing IFRack
[10:59:29]     Setting State: Activating
[10:59:29]     Setting State: Ready
[10:59:31] the sampler values are:
[10:59:31] RF_power 1 : 1.040039
[10:59:31] RF_power 2 : 0
[10:59:31] RF_power 3 : 1.108398
[10:59:31] RF_power 4 : 0.009765625
[10:59:31] RF_power 5 : 0.02929688
[10:59:31] RF_power 6 : 2.963867
[10:59:31] RF_power 7 : 0.4443359
[10:59:31] RF_power 8 : 0.02441406
[10:59:31] source : 3C309_1
               F1 : 1.4
               F2 : 32.0
               S22235 : 1.0
               S1400 : 7.5
               angsize : 1.5
               location : J2000 @ (14:59:07.58, 71:40:19.87)
[10:59:31] Peak: Subscan 1 of 4
[10:59:32] In state Ready, waiting for state Running
[10:59:32]     Setting State: Activating
[10:59:56]     Setting State: Committed
[10:59:58]     Setting State: Running
[10:59:58] Detected state Running
[10:59:58] *** Notice: This subscan will be numbered as scan #106 in your data reduction package.
[10:59:58] In state Running, waiting for state Ready
[11:00:28]     Setting State: Stopping
[11:00:34]     Setting State: Ready
[11:00:34] Detected state Ready
[11:00:34] Ygor Telescope: WaitForStopping
[11:00:34] Peak: Subscan 2 of 4
[11:00:35] In state Ready, waiting for state Running
[11:00:35]     Setting State: Activating
[11:00:44]     Setting State: Committed
[11:00:46]     Setting State: Running
[11:00:46] Detected state Running
[11:00:46] *** Notice: This subscan will be numbered as scan #107 in your data reduction package.
[11:00:46] In state Running, waiting for state Ready
[11:01:16]     Setting State: Stopping
[11:01:23]     Setting State: Ready
[11:01:23] Detected state Ready
[11:01:23] Ygor Telescope: WaitForStopping
[11:01:24] . *** Updating antenna's pointing to az2=0.0480 and el=0.3153 arcmins

[11:01:24] Peak: Subscan 3 of 4
[11:01:24] In state Ready, waiting for state Running
[11:01:24]     Setting State: Activating
[11:01:46]     Setting State: Committed
[11:01:48]     Setting State: Running
[11:01:48] Detected state Running
[11:01:48] *** Notice: This subscan will be numbered as scan #108 in your data reduction package.
[11:01:48] In state Running, waiting for state Ready
[11:02:18]     Setting State: Stopping
[11:02:23]     Setting State: Ready
[11:02:23] Detected state Ready
[11:02:23] Ygor Telescope: WaitForStopping
[11:02:23] Peak: Subscan 4 of 4
[11:02:23] In state Ready, waiting for state Running
[11:02:23]     Setting State: Activating
[11:02:31]     Setting State: Committed
[11:02:33]     Setting State: Running
[11:02:33] Detected state Running
[11:02:33] *** Notice: This subscan will be numbered as scan #109 in your data reduction package.
[11:02:33] In state Running, waiting for state Ready
[11:03:03]     Setting State: Stopping
[11:03:07]     Setting State: Ready
[11:03:07] Detected state Ready
[11:03:07] Ygor Telescope: WaitForStopping
[11:03:08] *** Updating antenna's pointing to az2=0.0480 and el=0.3440 arcmins

[11:03:08] source : 3C309_1
               F1 : 1.4
               F2 : 32.0
               S22235 : 1.0
               S1400 : 7.5
               angsize : 1.5
               location : J2000 @ (14:59:07.58, 71:40:19.87)
[11:03:08] Focus: Subscan 1 of 1
[11:03:09] In state Ready, waiting for state Running
[11:03:09]     Setting State: Activating
[11:03:35]     Setting State: Committed
[11:03:37]     Setting State: Running
[11:03:37] Detected state Running
[11:03:37] *** Notice: This subscan will be numbered as scan #110 in your data reduction package.
[11:03:37] In state Running, waiting for state Ready
[11:04:37]     Setting State: Stopping
[11:04:39]     Setting State: Ready
[11:04:39] Detected state Ready
[11:04:39] Ygor Telescope: WaitForStopping
[11:04:39] *** Updating antenna's focus to -24.12 mm

[11:04:40] Configuring telescope.
[11:04:40]     Setting State: Activating
[11:04:41]     Setting State: Ready
[11:04:41]     Setting State: Activating
[11:04:42]     Setting State: Ready
[11:04:42] Default values are
[11:04:42] if3freq  =  [0, 0, 0]
[11:04:42] notchfilter  =  In
[11:04:42] polswitch  =  thru
[11:04:42] The bad devices are: 
[11:04:42] OpticalDriver5
[11:04:42] The bad devices are: 
[11:04:42] OpticalDriver5

[11:04:42] Checking telescope
[11:04:42] Configuration Complete
[11:04:42] source : 3C309_1
               F1 : 1.4
               F2 : 32.0
               S22235 : 1.0
               S1400 : 7.5
               angsize : 1.5
               location : J2000 @ (14:59:07.58, 71:40:19.87)
[11:04:42] Slewing to source.
[11:04:43] In state Ready, waiting for state Activating
[11:04:43]     Setting State: Activating
[11:04:43] Detected state Activating
[11:04:43] In state Activating, waiting for state Ready
[11:05:10]     Setting State: Ready
[11:05:10] Detected state Ready
[11:05:10] Balancing IF system.
[11:05:10] Balancing IFRack
[11:05:10]     Setting State: Activating
[11:05:10]     Setting State: Ready
[11:05:12] the sampler values are:
[11:05:12] RF_power 1 : 2.949219
[11:05:12] RF_power 2 : 0.004882812
[11:05:12] RF_power 3 : 2.973633
[11:05:12] RF_power 4 : 0.01464844
[11:05:12] RF_power 5 : 0.03417969
[11:05:12] RF_power 6 : 2.841797
[11:05:12] RF_power 7 : 3.066406
[11:05:12] RF_power 8 : 0.02929688
[11:05:12] Balancing VEGAS
[11:05:12]     Setting State: Activating
[11:05:12]     Setting State: Ready
[11:05:13]     Setting State: Activating
[11:05:13]     Setting State: Ready
[11:05:14] Calibration scans (OnOff) :3C309_1 
[11:05:14] source : 3C309_1
               F1 : 1.4
               F2 : 32.0
               S22235 : 1.0
               S1400 : 7.5
               angsize : 1.5
               location : J2000 @ (14:59:07.58, 71:40:19.87)
[11:05:14] OnOff: Subscan 1 of 2
[11:05:14] In state Ready, waiting for state Running
[11:05:14]     Setting State: Activating
[11:05:19]     Setting State: Committed
[11:05:21]     Setting State: Running
[11:05:21] Detected state Running
[11:05:21] *** Notice: This subscan will be numbered as scan #111 in your data reduction package.
[11:05:21] In state Running, waiting for state Ready
[11:07:21]     Setting State: Stopping
[11:07:23]     Setting State: Ready
[11:07:23] Detected state Ready
[11:07:23] Ygor Telescope: WaitForStopping
[11:07:23] OnOff: Subscan 2 of 2
[11:07:23] In state Ready, waiting for state Running
[11:07:23]     Setting State: Activating
[11:07:38]     Setting State: Committed
[11:07:40]     Setting State: Running
[11:07:40] Detected state Running
[11:07:40] *** Notice: This subscan will be numbered as scan #112 in your data reduction package.
[11:07:40] In state Running, waiting for state Ready
[11:09:40]     Setting State: Stopping
[11:09:42]     Setting State: Ready
[11:09:42] Detected state Ready
[11:09:42] Ygor Telescope: WaitForStopping
[11:09:42] INFO: Selecting Catalog
[11:09:42] INFO: Using Catalog for LST 13-17
[11:09:42] source : UGC08778
               N_OBS : 0.0
               SESSION : 15.0
               location : J2000 @ (13:52:06.70, 38:04:01.30)
               CALIBRATOR : 3C286
               VEL : 3209.6
[11:09:42] Slewing to source.
[11:09:42] In state Ready, waiting for state Activating
[11:09:42]     Setting State: Activating
[11:09:42] Detected state Activating
[11:09:42] In state Activating, waiting for state Ready
[11:12:10]     Setting State: Ready
[11:12:10] Detected state Ready
[11:12:10] Balancing IF system.
[11:12:10] Balancing IFRack
[11:12:11]     Setting State: Activating
[11:12:11]     Setting State: Ready
[11:12:12] the sampler values are:
[11:12:12] RF_power 1 : 3.15918
[11:12:12] RF_power 2 : 0.004882812
[11:12:12] RF_power 3 : 3.173828
[11:12:12] RF_power 4 : 0.009765625
[11:12:12] RF_power 5 : 0.03417969
[11:12:12] RF_power 6 : 3.232422
[11:12:12] RF_power 7 : 2.988281
[11:12:12] RF_power 8 : 0.02441406
[11:12:12] Balancing VEGAS
[11:12:13]     Setting State: Activating
[11:12:13]     Setting State: Ready
[11:12:14]     Setting State: Activating
[11:12:14]     Setting State: Ready
[11:12:14] Starting on-source scan
[11:12:14] source : UGC08778
               N_OBS : 0.0
               SESSION : 15.0
               location : J2000 @ (13:52:06.70, 38:04:01.30)
               CALIBRATOR : 3C286
               VEL : 3209.6
[11:12:15] Track: Subscan 1 of 1
[11:12:15] In state Ready, waiting for state Running
[11:12:15]     Setting State: Activating
[11:12:15]     Setting State: Aborting
[11:12:15] ygor.Telescope: WaitForRunning: Asking abort confirmation.
[11:12:15] 
[11:12:15] User queried: "Abort detected! Terminate block?" waiting for reply...
[11:15:43]     Setting State: Ready
[11:16:51] User replied: "No".
[11:16:51] In state Ready, waiting for state Ready
[11:16:51] Detected state Ready
[11:16:51] Ygor Telescope: WaitForStopping
[11:16:51] Starting off-source scan
[11:16:51] source : UGC08778
               N_OBS : 0.0
               SESSION : 15.0
               location : J2000 @ (13:52:06.70, 38:04:01.30)
               CALIBRATOR : 3C286
               VEL : 3209.6
[11:16:51] Track: Subscan 1 of 1
[11:16:51] In state Ready, waiting for state Running
[11:16:52]     Setting State: Activating
[11:16:52]     Setting State: Aborting
[11:16:52] ygor.Telescope: WaitForRunning: Asking abort confirmation.
[11:16:52] 
[11:16:52] User queried: "Abort detected! Terminate block?" waiting for reply...
[11:16:53] User replied: "No".
[11:16:53] In state Aborting, waiting for state Ready
[11:20:20]     Setting State: Ready
[11:20:20] Detected state Ready
[11:20:20] Ygor Telescope: WaitForStopping
[11:20:20] Starting on-source scan
[11:20:20] source : UGC08778
               N_OBS : 0.0
               SESSION : 15.0
               location : J2000 @ (13:52:06.70, 38:04:01.30)
               CALIBRATOR : 3C286
               VEL : 3209.6
[11:20:21] Track: Subscan 1 of 1
[11:20:21] In state Ready, waiting for state Running
[11:20:21]     Setting State: Activating
[11:30:42]     Setting State: Committed
[11:30:44]     Setting State: Running
[11:30:44] Detected state Running
[11:30:44] *** Notice: This subscan will be numbered as scan #113 in your data reduction package.
[11:30:44] In state Running, waiting for state Ready
[11:34:04]     Setting State: Stopping
[11:34:06]     Setting State: Ready
[11:34:06] Detected state Ready
[11:34:06] Ygor Telescope: WaitForStopping
[11:34:06] UGC08778: OBS COMPLETE = 1/3
[11:34:06] Updating Catalogs
[11:34:06] source : NGC5631
               N_OBS : 0.0
               SESSION : 19.0
               location : J2000 @ (14:26:33.30, 56:34:57.40)
               CALIBRATOR : 3C295
               VEL : 1968.0
[11:34:06] Slewing to source.
[11:34:06] In state Ready, waiting for state Activating
[11:34:06]     Setting State: Activating
[11:34:06] Detected state Activating
[11:34:06] In state Activating, waiting for state Ready
[11:36:33]     Setting State: Ready
[11:36:33] Detected state Ready
[11:36:33] Balancing IF system.
[11:36:34] Balancing IFRack
[11:36:34]     Setting State: Activating
[11:36:34]     Setting State: Ready
[11:36:36] the sampler values are:
[11:36:36] RF_power 1 : 3.056641
[11:36:36] RF_power 2 : 0
[11:36:36] RF_power 3 : 3.125
[11:36:36] RF_power 4 : 0.01464844
[11:36:36] RF_power 5 : 0.03417969
[11:36:36] RF_power 6 : 3.051758
[11:36:36] RF_power 7 : 2.944336
[11:36:36] RF_power 8 : 0.02441406
[11:36:36] Balancing VEGAS
[11:36:36]     Setting State: Activating
[11:36:36]     Setting State: Ready
[11:36:37]     Setting State: Activating
[11:36:37]     Setting State: Ready
[11:36:38] Starting on-source scan
[11:36:38] source : NGC5631
               N_OBS : 0.0
               SESSION : 19.0
               location : J2000 @ (14:26:33.30, 56:34:57.40)
               CALIBRATOR : 3C295
               VEL : 1968.0
[11:36:38] Track: Subscan 1 of 1
[11:36:38] In state Ready, waiting for state Running
[11:36:38]     Setting State: Activating
[11:36:43]     Setting State: Committed
[11:36:45]     Setting State: Running
[11:36:45] Detected state Running
[11:36:45] *** Notice: This subscan will be numbered as scan #114 in your data reduction package.
[11:36:45] In state Running, waiting for state Ready
[11:40:05]     Setting State: Stopping
[11:40:07]     Setting State: Ready
[11:40:07] Detected state Ready
[11:40:07] Ygor Telescope: WaitForStopping
[11:40:07] Starting off-source scan
[11:40:07] source : NGC5631
               N_OBS : 0.0
               SESSION : 19.0
               location : J2000 @ (14:26:33.30, 56:34:57.40)
               CALIBRATOR : 3C295
               VEL : 1968.0
[11:40:07] Track: Subscan 1 of 1
[11:40:07] In state Ready, waiting for state Running
[11:40:07]     Setting State: Activating
[11:40:29]     Setting State: Committed
[11:40:31]     Setting State: Running
[11:40:31] Detected state Running
[11:40:31] *** Notice: This subscan will be numbered as scan #115 in your data reduction package.
[11:40:31] In state Running, waiting for state Ready
[11:43:51]     Setting State: Stopping
[11:43:53]     Setting State: Ready
[11:43:53] Detected state Ready
[11:43:53] Ygor Telescope: WaitForStopping
[11:43:53] Starting on-source scan
[11:43:53] source : NGC5631
               N_OBS : 0.0
               SESSION : 19.0
               location : J2000 @ (14:26:33.30, 56:34:57.40)
               CALIBRATOR : 3C295
               VEL : 1968.0
[11:43:53] Track: Subscan 1 of 1
[11:43:53] In state Ready, waiting for state Running
[11:43:53]     Setting State: Activating
[11:44:15]     Setting State: Committed
[11:44:17]     Setting State: Running
[11:44:17] Detected state Running
[11:44:17] *** Notice: This subscan will be numbered as scan #116 in your data reduction package.
[11:44:17] In state Running, waiting for state Ready
[11:47:37]     Setting State: Stopping
[11:47:39]     Setting State: Ready
[11:47:39] Detected state Ready
[11:47:39] Ygor Telescope: WaitForStopping
[11:47:39] NGC5631: OBS COMPLETE = 1/3
[11:47:39] Updating Catalogs
[11:47:39] Starting on-source scan
[11:47:39] source : NGC5631
               N_OBS : 0.0
               SESSION : 19.0
               location : J2000 @ (14:26:33.30, 56:34:57.40)
               CALIBRATOR : 3C295
               VEL : 1968.0
[11:47:39] Track: Subscan 1 of 1
[11:47:40] In state Ready, waiting for state Running
[11:47:40]     Setting State: Activating
[11:47:45]     Setting State: Committed
[11:47:47]     Setting State: Running
[11:47:47] Detected state Running
[11:47:47] *** Notice: This subscan will be numbered as scan #117 in your data reduction package.
[11:47:47] In state Running, waiting for state Ready
[11:51:07]     Setting State: Stopping
[11:51:09]     Setting State: Ready
[11:51:09] Detected state Ready
[11:51:09] Ygor Telescope: WaitForStopping
[11:51:09] Starting off-source scan
[11:51:09] source : NGC5631
               N_OBS : 0.0
               SESSION : 19.0
               location : J2000 @ (14:26:33.30, 56:34:57.40)
               CALIBRATOR : 3C295
               VEL : 1968.0
[11:51:09] Track: Subscan 1 of 1
[11:51:09] In state Ready, waiting for state Running
[11:51:09]     Setting State: Activating
[11:51:31]     Setting State: Committed
[11:51:33]     Setting State: Running
[11:51:33] Detected state Running
[11:51:33] *** Notice: This subscan will be numbered as scan #118 in your data reduction package.
[11:51:33] In state Running, waiting for state Ready
[11:54:53]     Setting State: Stopping
[11:54:55]     Setting State: Ready
[11:54:55] Detected state Ready
[11:54:55] Ygor Telescope: WaitForStopping
[11:54:55] Starting on-source scan
[11:54:55] source : NGC5631
               N_OBS : 0.0
               SESSION : 19.0
               location : J2000 @ (14:26:33.30, 56:34:57.40)
               CALIBRATOR : 3C295
               VEL : 1968.0
[11:54:55] Track: Subscan 1 of 1
[11:54:55] In state Ready, waiting for state Running
[11:54:55]     Setting State: Activating
[11:55:18]     Setting State: Committed
[11:55:20]     Setting State: Running
[11:55:20] Detected state Running
[11:55:20] *** Notice: This subscan will be numbered as scan #119 in your data reduction package.
[11:55:20] In state Running, waiting for state Ready
[11:58:40]     Setting State: Stopping
[11:58:42]     Setting State: Ready
[11:58:42] Detected state Ready
[11:58:42] Ygor Telescope: WaitForStopping
[11:58:42] NGC5631: OBS COMPLETE = 2/3
[11:58:42] Updating Catalogs
[11:58:42] Starting on-source scan
[11:58:42] source : NGC5631
               N_OBS : 0.0
               SESSION : 19.0
               location : J2000 @ (14:26:33.30, 56:34:57.40)
               CALIBRATOR : 3C295
               VEL : 1968.0
[11:58:42] Track: Subscan 1 of 1
[11:58:43] In state Ready, waiting for state Running
[11:58:43]     Setting State: Activating
[11:58:48]     Setting State: Committed
[11:58:50]     Setting State: Running
[11:58:50] Detected state Running
[11:58:50] *** Notice: This subscan will be numbered as scan #120 in your data reduction package.
[11:58:50] In state Running, waiting for state Ready
[12:02:10]     Setting State: Stopping
[12:02:12]     Setting State: Ready
[12:02:12] Detected state Ready
[12:02:12] Ygor Telescope: WaitForStopping
[12:02:12] Starting off-source scan
[12:02:12] source : NGC5631
               N_OBS : 0.0
               SESSION : 19.0
               location : J2000 @ (14:26:33.30, 56:34:57.40)
               CALIBRATOR : 3C295
               VEL : 1968.0
[12:02:12] Track: Subscan 1 of 1
[12:02:12] In state Ready, waiting for state Running
[12:02:12]     Setting State: Activating
[12:02:35]     Setting State: Committed
[12:02:37]     Setting State: Running
[12:02:37] Detected state Running
[12:02:37] *** Notice: This subscan will be numbered as scan #121 in your data reduction package.
[12:02:37] In state Running, waiting for state Ready
[12:05:57]     Setting State: Stopping
[12:05:59]     Setting State: Ready
[12:05:59] Detected state Ready
[12:05:59] Ygor Telescope: WaitForStopping
[12:05:59] Starting on-source scan
[12:05:59] source : NGC5631
               N_OBS : 0.0
               SESSION : 19.0
               location : J2000 @ (14:26:33.30, 56:34:57.40)
               CALIBRATOR : 3C295
               VEL : 1968.0
[12:05:59] Track: Subscan 1 of 1
[12:05:59] In state Ready, waiting for state Running
[12:05:59]     Setting State: Activating
[12:06:22]     Setting State: Committed
[12:06:24]     Setting State: Running
[12:06:24] Detected state Running
[12:06:24] *** Notice: This subscan will be numbered as scan #122 in your data reduction package.
[12:06:24] In state Running, waiting for state Ready
[12:09:44]     Setting State: Stopping
[12:09:46]     Setting State: Ready
[12:09:46] Detected state Ready
[12:09:46] Ygor Telescope: WaitForStopping
[12:09:46] NGC5631: OBS COMPLETE = 3/3
[12:09:46] Updating Catalogs
[12:09:46] source : NGC5016
               N_OBS : 0.0
               SESSION : 16.0
               location : J2000 @ (13:12:06.70, 24:05:42.00)
               CALIBRATOR : 3C286
               VEL : 2591.7
[12:09:46] Slewing to source.
[12:09:46] In state Ready, waiting for state Activating
[12:09:46]     Setting State: Activating
[12:09:46] Detected state Activating
[12:09:46] In state Activating, waiting for state Ready
[12:16:16]     Setting State: Ready
[12:16:16] Detected state Ready
[12:16:16] Balancing IF system.
[12:16:16] Balancing IFRack
[12:16:16]     Setting State: Activating
[12:16:16]     Setting State: Ready
[12:16:18] the sampler values are:
[12:16:18] RF_power 1 : 2.724609
[12:16:18] RF_power 2 : 0.004882812
[12:16:18] RF_power 3 : 2.729492
[12:16:18] RF_power 4 : 0.01464844
[12:16:18] RF_power 5 : 0.03417969
[12:16:18] RF_power 6 : 2.729492
[12:16:18] RF_power 7 : 2.524414
[12:16:18] RF_power 8 : 0.02929688
[12:16:18] Balancing VEGAS
[12:16:18]     Setting State: Activating
[12:16:18]     Setting State: Ready
[12:16:19]     Setting State: Activating
[12:16:19]     Setting State: Ready
[12:16:20] Starting on-source scan
[12:16:20] source : NGC5016
               N_OBS : 0.0
               SESSION : 16.0
               location : J2000 @ (13:12:06.70, 24:05:42.00)
               CALIBRATOR : 3C286
               VEL : 2591.7
[12:16:20] Track: Subscan 1 of 1
[12:16:21] In state Ready, waiting for state Running
[12:16:21]     Setting State: Activating
[12:16:26]     Setting State: Committed
[12:16:28]     Setting State: Running
[12:16:28] Detected state Running
[12:16:28] *** Notice: This subscan will be numbered as scan #123 in your data reduction package.
[12:16:28] In state Running, waiting for state Ready
[12:19:48]     Setting State: Stopping
[12:19:50]     Setting State: Ready
[12:19:50] Detected state Ready
[12:19:50] Ygor Telescope: WaitForStopping
[12:19:50] Starting off-source scan
[12:19:50] source : NGC5016
               N_OBS : 0.0
               SESSION : 16.0
               location : J2000 @ (13:12:06.70, 24:05:42.00)
               CALIBRATOR : 3C286
               VEL : 2591.7
[12:19:50] Track: Subscan 1 of 1
[12:19:50] In state Ready, waiting for state Running
[12:19:50]     Setting State: Activating
[12:20:11]     Setting State: Committed
[12:20:13]     Setting State: Running
[12:20:13] Detected state Running
[12:20:13] *** Notice: This subscan will be numbered as scan #124 in your data reduction package.
[12:20:13] In state Running, waiting for state Ready
[12:23:33]     Setting State: Stopping
[12:23:35]     Setting State: Ready
[12:23:35] Detected state Ready
[12:23:35] Ygor Telescope: WaitForStopping
[12:23:35] Starting on-source scan
[12:23:35] source : NGC5016
               N_OBS : 0.0
               SESSION : 16.0
               location : J2000 @ (13:12:06.70, 24:05:42.00)
               CALIBRATOR : 3C286
               VEL : 2591.7
[12:23:35] Track: Subscan 1 of 1
[12:23:35] In state Ready, waiting for state Running
[12:23:35]     Setting State: Activating
[12:23:55]     Setting State: Committed
[12:23:57]     Setting State: Running
[12:23:57] Detected state Running
[12:23:57] *** Notice: This subscan will be numbered as scan #125 in your data reduction package.
[12:23:57] In state Running, waiting for state Ready
[12:27:17]     Setting State: Stopping
[12:27:19]     Setting State: Ready
[12:27:19] Detected state Ready
[12:27:19] Ygor Telescope: WaitForStopping
[12:27:19] NGC5016: OBS COMPLETE = 1/3
[12:27:19] Updating Catalogs
[12:27:19] Starting on-source scan
[12:27:19] source : NGC5016
               N_OBS : 0.0
               SESSION : 16.0
               location : J2000 @ (13:12:06.70, 24:05:42.00)
               CALIBRATOR : 3C286
               VEL : 2591.7
[12:27:19] Track: Subscan 1 of 1
[12:27:20] In state Ready, waiting for state Running
[12:27:20]     Setting State: Activating
[12:27:25]     Setting State: Committed
[12:27:27]     Setting State: Running
[12:27:27] Detected state Running
[12:27:27] *** Notice: This subscan will be numbered as scan #126 in your data reduction package.
[12:27:27] In state Running, waiting for state Ready
[12:30:47]     Setting State: Stopping
[12:30:49]     Setting State: Ready
[12:30:49] Detected state Ready
[12:30:49] Ygor Telescope: WaitForStopping
[12:30:49] Starting off-source scan
[12:30:49] source : NGC5016
               N_OBS : 0.0
               SESSION : 16.0
               location : J2000 @ (13:12:06.70, 24:05:42.00)
               CALIBRATOR : 3C286
               VEL : 2591.7
[12:30:49] Track: Subscan 1 of 1
[12:30:49] In state Ready, waiting for state Running
[12:30:49]     Setting State: Activating
[12:31:08]     Setting State: Committed
[12:31:10]     Setting State: Running
[12:31:10] Detected state Running
[12:31:10] *** Notice: This subscan will be numbered as scan #127 in your data reduction package.
[12:31:10] In state Running, waiting for state Ready
[12:34:30]     Setting State: Stopping
[12:34:32]     Setting State: Ready
[12:34:32] Detected state Ready
[12:34:32] Ygor Telescope: WaitForStopping
[12:34:32] Starting on-source scan
[12:34:32] source : NGC5016
               N_OBS : 0.0
               SESSION : 16.0
               location : J2000 @ (13:12:06.70, 24:05:42.00)
               CALIBRATOR : 3C286
               VEL : 2591.7
[12:34:32] Track: Subscan 1 of 1
[12:34:32] In state Ready, waiting for state Running
[12:34:32]     Setting State: Activating
[12:34:51]     Setting State: Committed
[12:34:53]     Setting State: Running
[12:34:53] Detected state Running
[12:34:53] *** Notice: This subscan will be numbered as scan #128 in your data reduction package.
[12:34:53] In state Running, waiting for state Ready
[12:38:13]     Setting State: Stopping
[12:38:15]     Setting State: Ready
[12:38:15] Detected state Ready
[12:38:15] Ygor Telescope: WaitForStopping
[12:38:15] NGC5016: OBS COMPLETE = 2/3
[12:38:15] Updating Catalogs
[12:38:15] Starting on-source scan
[12:38:15] source : NGC5016
               N_OBS : 0.0
               SESSION : 16.0
               location : J2000 @ (13:12:06.70, 24:05:42.00)
               CALIBRATOR : 3C286
               VEL : 2591.7
[12:38:15] Track: Subscan 1 of 1
[12:38:16] In state Ready, waiting for state Running
[12:38:16]     Setting State: Activating
[12:38:21]     Setting State: Committed
[12:38:23]     Setting State: Running
[12:38:23] Detected state Running
[12:38:23] *** Notice: This subscan will be numbered as scan #129 in your data reduction package.
[12:38:23] In state Running, waiting for state Ready
[12:41:43]     Setting State: Stopping
[12:41:45]     Setting State: Ready
[12:41:45] Detected state Ready
[12:41:45] Ygor Telescope: WaitForStopping
[12:41:45] Starting off-source scan
[12:41:45] source : NGC5016
               N_OBS : 0.0
               SESSION : 16.0
               location : J2000 @ (13:12:06.70, 24:05:42.00)
               CALIBRATOR : 3C286
               VEL : 2591.7
[12:41:45] Track: Subscan 1 of 1
[12:41:45] In state Ready, waiting for state Running
[12:41:45]     Setting State: Activating
[12:42:03]     Setting State: Committed
[12:42:05]     Setting State: Running
[12:42:05] Detected state Running
[12:42:05] *** Notice: This subscan will be numbered as scan #130 in your data reduction package.
[12:42:05] In state Running, waiting for state Ready
[12:45:25]     Setting State: Stopping
[12:45:27]     Setting State: Ready
[12:45:27] Detected state Ready
[12:45:27] Ygor Telescope: WaitForStopping
[12:45:27] Starting on-source scan
[12:45:27] source : NGC5016
               N_OBS : 0.0
               SESSION : 16.0
               location : J2000 @ (13:12:06.70, 24:05:42.00)
               CALIBRATOR : 3C286
               VEL : 2591.7
[12:45:27] Track: Subscan 1 of 1
[12:45:27] In state Ready, waiting for state Running
[12:45:28]     Setting State: Activating
[12:45:45]     Setting State: Committed
[12:45:47]     Setting State: Running
[12:45:47] Detected state Running
[12:45:47] *** Notice: This subscan will be numbered as scan #131 in your data reduction package.
[12:45:47] In state Running, waiting for state Ready
[12:49:07]     Setting State: Stopping
[12:49:09]     Setting State: Ready
[12:49:09] Detected state Ready
[12:49:09] Ygor Telescope: WaitForStopping
[12:49:09] NGC5016: OBS COMPLETE = 3/3
[12:49:09] Updating Catalogs
[12:49:09] source : NGC5056
               N_OBS : 0.0
               SESSION : 15.0
               location : J2000 @ (13:16:12.30, 30:57:01.10)
               CALIBRATOR : 3C286
               VEL : 5454.1
[12:49:09] Slewing to source.
[12:49:09] In state Ready, waiting for state Activating
[12:49:09]     Setting State: Activating
[12:49:09] Detected state Activating
[12:49:09] In state Activating, waiting for state Ready
[12:49:56]     Setting State: Ready
[12:49:56] Detected state Ready
[12:49:56] Balancing IF system.
[12:49:57] Balancing IFRack
[12:49:57]     Setting State: Activating
[12:49:57]     Setting State: Ready
[12:49:59] the sampler values are:
[12:49:59] RF_power 1 : 2.954102
[12:49:59] RF_power 2 : 0
[12:49:59] RF_power 3 : 2.817383
[12:49:59] RF_power 4 : 0.01464844
[12:49:59] RF_power 5 : 0.02929688
[12:49:59] RF_power 6 : 3.227539
[12:49:59] RF_power 7 : 3.085938
[12:49:59] RF_power 8 : 0.02441406
[12:49:59] Balancing VEGAS
[12:49:59]     Setting State: Activating
[12:49:59]     Setting State: Ready
[12:50:00]     Setting State: Activating
[12:50:00]     Setting State: Ready
[12:50:01] Starting on-source scan
[12:50:01] source : NGC5056
               N_OBS : 0.0
               SESSION : 15.0
               location : J2000 @ (13:16:12.30, 30:57:01.10)
               CALIBRATOR : 3C286
               VEL : 5454.1
[12:50:01] Track: Subscan 1 of 1
[12:50:03] In state Ready, waiting for state Running
[12:50:03]     Setting State: Activating
[12:50:08]     Setting State: Committed
[12:50:10]     Setting State: Running
[12:50:10] Detected state Running
[12:50:10] *** Notice: This subscan will be numbered as scan #132 in your data reduction package.
[12:50:10] In state Running, waiting for state Ready
[12:53:30]     Setting State: Stopping
[12:53:32]     Setting State: Ready
[12:53:32] Detected state Ready
[12:53:32] Ygor Telescope: WaitForStopping
[12:53:32] Starting off-source scan
[12:53:32] source : NGC5056
               N_OBS : 0.0
               SESSION : 15.0
               location : J2000 @ (13:16:12.30, 30:57:01.10)
               CALIBRATOR : 3C286
               VEL : 5454.1
[12:53:32] Track: Subscan 1 of 1
[12:53:32] In state Ready, waiting for state Running
[12:53:32]     Setting State: Activating
[12:53:48]     Setting State: Committed
[12:53:50]     Setting State: Running
[12:53:50] Detected state Running
[12:53:50] *** Notice: This subscan will be numbered as scan #133 in your data reduction package.
[12:53:50] In state Running, waiting for state Ready
[12:57:10]     Setting State: Stopping
[12:57:12]     Setting State: Ready
[12:57:12] Detected state Ready
[12:57:12] Ygor Telescope: WaitForStopping
[12:57:12] Starting on-source scan
[12:57:12] source : NGC5056
               N_OBS : 0.0
               SESSION : 15.0
               location : J2000 @ (13:16:12.30, 30:57:01.10)
               CALIBRATOR : 3C286
               VEL : 5454.1
[12:57:12] Track: Subscan 1 of 1
[12:57:12] In state Ready, waiting for state Running
[12:57:12]     Setting State: Activating
[12:57:28]     Setting State: Committed
[12:57:30]     Setting State: Running
[12:57:30] Detected state Running
[12:57:30] *** Notice: This subscan will be numbered as scan #134 in your data reduction package.
[12:57:30] In state Running, waiting for state Ready
[13:00:50]     Setting State: Stopping
[13:00:52]     Setting State: Ready
[13:00:52] Detected state Ready
[13:00:52] Ygor Telescope: WaitForStopping
[13:00:52] NGC5056: OBS COMPLETE = 1/3
[13:00:52] Updating Catalogs
[13:00:52] Starting on-source scan
[13:00:52] source : NGC5056
               N_OBS : 0.0
               SESSION : 15.0
               location : J2000 @ (13:16:12.30, 30:57:01.10)
               CALIBRATOR : 3C286
               VEL : 5454.1
[13:00:52] Track: Subscan 1 of 1
[13:00:53] In state Ready, waiting for state Running
[13:00:53]     Setting State: Activating
[13:00:58]     Setting State: Committed
[13:01:00]     Setting State: Running
[13:01:00] Detected state Running
[13:01:00] *** Notice: This subscan will be numbered as scan #135 in your data reduction package.
[13:01:00] In state Running, waiting for state Ready
[13:04:20]     Setting State: Stopping
[13:04:22]     Setting State: Ready
[13:04:22] Detected state Ready
[13:04:22] Ygor Telescope: WaitForStopping
[13:04:22] Starting off-source scan
[13:04:22] source : NGC5056
               N_OBS : 0.0
               SESSION : 15.0
               location : J2000 @ (13:16:12.30, 30:57:01.10)
               CALIBRATOR : 3C286
               VEL : 5454.1
[13:04:22] Track: Subscan 1 of 1
[13:04:22] In state Ready, waiting for state Running
[13:04:22]     Setting State: Activating
[13:04:37]     Setting State: Committed
[13:04:39]     Setting State: Running
[13:04:39] Detected state Running
[13:04:39] *** Notice: This subscan will be numbered as scan #136 in your data reduction package.
[13:04:39] In state Running, waiting for state Ready
[13:07:59]     Setting State: Stopping
[13:08:01]     Setting State: Ready
[13:08:01] Detected state Ready
[13:08:01] Ygor Telescope: WaitForStopping
[13:08:01] Starting on-source scan
[13:08:01] source : NGC5056
               N_OBS : 0.0
               SESSION : 15.0
               location : J2000 @ (13:16:12.30, 30:57:01.10)
               CALIBRATOR : 3C286
               VEL : 5454.1
[13:08:01] Track: Subscan 1 of 1
[13:08:01] In state Ready, waiting for state Running
[13:08:02]     Setting State: Activating
[13:08:16]     Setting State: Committed
[13:08:18]     Setting State: Running
[13:08:18] Detected state Running
[13:08:18] *** Notice: This subscan will be numbered as scan #137 in your data reduction package.
[13:08:18] In state Running, waiting for state Ready
[13:11:38]     Setting State: Stopping
[13:11:40]     Setting State: Ready
[13:11:40] Detected state Ready
[13:11:40] Ygor Telescope: WaitForStopping
[13:11:40] NGC5056: OBS COMPLETE = 2/3
[13:11:40] Updating Catalogs
[13:11:40] Starting on-source scan
[13:11:40] source : NGC5056
               N_OBS : 0.0
               SESSION : 15.0
               location : J2000 @ (13:16:12.30, 30:57:01.10)
               CALIBRATOR : 3C286
               VEL : 5454.1
[13:11:40] Track: Subscan 1 of 1
[13:11:41] In state Ready, waiting for state Running
[13:11:41]     Setting State: Activating
[13:11:46]     Setting State: Committed
[13:11:48]     Setting State: Running
[13:11:48] Detected state Running
[13:11:48] *** Notice: This subscan will be numbered as scan #138 in your data reduction package.
[13:11:48] In state Running, waiting for state Ready
[13:15:08]     Setting State: Stopping
[13:15:10]     Setting State: Ready
[13:15:10] Detected state Ready

[13:15:10] *** Notice: Scheduling block paused.
[13:15:15] *** Notice: Scheduling block resumed.

[13:15:15] Ygor Telescope: WaitForStopping
[13:15:15] 
[13:15:15] User queried: "Abort detected! Terminate block?" waiting for reply...
[13:15:18] User replied: "Yes".
[13:15:18] Exiting scheduling block.
runSuccessful: False
[13:15:18] ******** End Scheduling Block
[13:15:18] ******** observer = OPERATOR, SB name = 15B287_operator, project ID = AGBT15B_287

how much log? 36117 id: 179202self.history: <gbt.turtle.database.History.History instance at 0x4956b00>self.history.connection: <gbt.turtle.database.TurtleConnection.TurtleConnection instance at 0x4956878>how much converted log? 36325 
#######################################################
